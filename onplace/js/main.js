function hasTouch(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}if(function(e){var t={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};e.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(n)}),this;var s={},o=this,r=e(window).width(),a=e(window).height();if(!e(o).data("bxSlider")){var l=function(){e(o).data("bxSlider")||(s.settings=e.extend({},t,n),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"===s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!==s.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<t.length;i++)if(void 0!==e.style[t[i]])return s.cssPrefix=t[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"===s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),d())},d=function(){var t=s.children.eq(s.settings.startSlide);o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.settings.ariaLive&&!s.settings.ticker&&s.viewport.attr("aria-live","polite"),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"===s.settings.mode?1e3*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:p()}),s.children.css({"float":"horizontal"===s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",h()),"horizontal"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"===s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&y(),s.active.last=s.settings.startSlide===f()-1,s.settings.video&&o.fitVids(),("all"===s.settings.preloadImages||s.settings.ticker)&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.controls&&k(),s.settings.auto&&s.settings.autoControls&&C(),s.settings.pager&&w(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(t,g)},c=function(t,i){var n=t.find('img:not([src=""]), iframe').length,s=0;return 0===n?void i():void t.find('img:not([src=""]), iframe').each(function(){e(this).one("load error",function(){++s===n&&i()}).each(function(){this.complete&&e(this).trigger("load")})})},g=function(){if(s.settings.infiniteLoop&&"fade"!==s.settings.mode&&!s.settings.ticker){var t="vertical"===s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,t).clone(!0).addClass("bx-clone"),n=s.children.slice(-t).clone(!0).addClass("bx-clone");s.settings.ariaHidden&&(i.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),o.append(i).prepend(n)}s.loader.remove(),x(),"vertical"===s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(u()),o.redrawSlider(),s.settings.onSliderLoad.call(o,s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",_),s.settings.auto&&s.settings.autoStart&&(f()>1||s.settings.autoSlideForOnePage)&&A(),s.settings.ticker&&q(),s.settings.pager&&P(s.settings.startSlide),s.settings.controls&&z(),s.settings.touchEnabled&&!s.settings.ticker&&R(),s.settings.keyboardEnabled&&!s.settings.ticker&&e(document).keydown(L)},u=function(){var t=0,n=e();if("vertical"===s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1===s.settings.moveSlides?s.active.index:s.active.index*m();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"===s.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"===s.viewport.css("box-sizing")?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"===s.viewport.css("box-sizing")&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},p=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"===s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},h=function(){var e=s.settings.slideWidth,t=s.viewport.width();if(0===s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"===s.settings.mode)e=t;else if(s.settings.maxSlides>1&&"horizontal"===s.settings.mode){if(t>s.maxThreshold)return e;t<s.minThreshold?e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides:s.settings.shrinkItems&&(e=Math.floor((t+s.settings.slideMargin)/Math.ceil((t+s.settings.slideMargin)/(e+s.settings.slideMargin))-s.settings.slideMargin))}return e},v=function(){var e=1,t=null;return"horizontal"===s.settings.mode&&s.settings.slideWidth>0?s.viewport.width()<s.minThreshold?e=s.settings.minSlides:s.viewport.width()>s.maxThreshold?e=s.settings.maxSlides:(t=s.children.first().width()+s.settings.slideMargin,e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)):"vertical"===s.settings.mode&&(e=s.settings.minSlides),e},f=function(){var e=0,t=0,i=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/m());else for(;t<s.children.length;)++e,t=i+v(),i+=s.settings.moveSlides<=v()?s.settings.moveSlides:v();else e=Math.ceil(s.children.length/v());return e},m=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=v()?s.settings.moveSlides:v()},x=function(){var e,t,i;s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop?"horizontal"===s.settings.mode?(t=s.children.last(),e=t.position(),b(-(e.left-(s.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===s.settings.mode&&(i=s.children.length-s.settings.minSlides,e=s.children.eq(i).position(),b(-e.top,"reset",0)):(e=s.children.eq(s.active.index*m()).position(),s.active.index===f()-1&&(s.active.last=!0),void 0!==e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0)))},b=function(t,i,n,r){var a,l;s.usingCSS?(l="vertical"===s.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),O())}):O()):"reset"===i?o.css(s.animProp,l):"ticker"===i&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(r.resetValue,"reset",0),H())}):(b(r.resetValue,"reset",0),H()))):(a={},a[s.animProp]=t,"slide"===i?o.animate(a,n,s.settings.easing,function(){O()}):"reset"===i?o.css(s.animProp,t):"ticker"===i&&o.animate(a,n,"linear",function(){b(r.resetValue,"reset",0),H()}))},S=function(){for(var t="",i="",n=f(),o=0;o<n;o++)i="",s.settings.buildPager&&e.isFunction(s.settings.buildPager)||s.settings.pagerCustom?(i=s.settings.buildPager(o),s.pagerEl.addClass("bx-custom-pager")):(i=o+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+o+'" class="bx-pager-link">'+i+"</a></div>";s.pagerEl.html(t)},w=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),S()),s.pagerEl.on("click touchend","a",M)},k=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click touchend",E),s.controls.prev.bind("click touchend",I),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},C=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",$),s.controls.autoEl.on("click",".bx-stop",T),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),D(s.settings.autoStart?"stop":"start")},y=function(){s.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!==i&&(""+i).length&&e(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},E=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToNextSlide())},I=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToPrevSlide())},$=function(e){o.startAuto(),e.preventDefault()},T=function(e){o.stopAuto(),e.preventDefault()},M=function(t){var i,n;t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),i=e(t.currentTarget),void 0!==i.attr("data-slide-index")&&(n=parseInt(i.attr("data-slide-index")),n!==s.active.index&&o.goToSlide(n)))},P=function(t){var i=s.children.length;return"short"===s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},O=function(){if(s.settings.infiniteLoop){var e="";0===s.active.index?e=s.children.eq(0).position():s.active.index===f()-1&&s.carousel?e=s.children.eq((f()-1)*m()).position():s.active.index===s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)},D=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},z=function(){1===f()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0===s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index===f()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},A=function(){if(s.settings.autoDelay>0){setTimeout(o.startAuto,s.settings.autoDelay)}else o.startAuto(),e(window).focus(function(){o.startAuto()}).blur(function(){o.stopAuto()});s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},q=function(){var t,i,n,r,a,l,d,c,g=0;"next"===s.settings.autoDirection?o.append(s.children.clone().addClass("bx-clone")):(o.prepend(s.children.clone().addClass("bx-clone")),t=s.children.first().position(),g="horizontal"===s.settings.mode?-t.left:-t.top),b(g,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&(s.usingCSS?(r="horizontal"===s.settings.mode?4:5,s.viewport.hover(function(){i=o.css("-"+s.cssPrefix+"-transform"),n=parseFloat(i.split(",")[r]),b(n,"reset",0)},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(n))),H(d)})):s.viewport.hover(function(){o.stop()},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(o.css(l)))),H(d)})),H()},H=function(e){var t,i,n,r=e?e:s.settings.speed,a={left:0,top:0},l={left:0,top:0};"next"===s.settings.autoDirection?a=o.find(".bx-clone").first().position():l=s.children.first().position(),t="horizontal"===s.settings.mode?-a.left:-a.top,i="horizontal"===s.settings.mode?-l.left:-l.top,n={resetValue:i},b(t,"ticker",r,n)},W=function(t){var i=e(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=t.offset();return n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+t.outerWidth(),s.bottom=s.top+t.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)},L=function(e){var t=document.activeElement.tagName.toLowerCase(),i="input|textarea",n=new RegExp(t,["i"]),s=n.exec(i);if(null==s&&W(o)){if(39===e.keyCode)return E(e),!1;if(37===e.keyCode)return I(e),!1}},R=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart MSPointerDown pointerdown",V),s.viewport.on("click",".bxslider a",function(e){s.viewport.hasClass("click-disabled")&&(e.preventDefault(),s.viewport.removeClass("click-disabled"))})},V=function(e){if(s.controls.el.addClass("disabled"),s.working)e.preventDefault(),s.controls.el.removeClass("disabled");else{s.touch.originalPos=o.position();var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t];s.touch.start.x=i[0].pageX,s.touch.start.y=i[0].pageY,s.viewport.get(0).setPointerCapture&&(s.pointerId=t.pointerId,s.viewport.get(0).setPointerCapture(s.pointerId)),s.viewport.bind("touchmove MSPointerMove pointermove",N),s.viewport.bind("touchend MSPointerUp pointerup",Y),s.viewport.bind("MSPointerCancel pointercancel",F)}},F=function(e){b(s.touch.originalPos.left,"reset",0),s.controls.el.removeClass("disabled"),s.viewport.unbind("MSPointerCancel pointercancel",F),s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},N=function(e){var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=Math.abs(i[0].pageX-s.touch.start.x),o=Math.abs(i[0].pageY-s.touch.start.y),r=0,a=0;3*n>o&&s.settings.preventDefaultSwipeX?e.preventDefault():3*o>n&&s.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!==s.settings.mode&&s.settings.oneToOneTouch&&("horizontal"===s.settings.mode?(a=i[0].pageX-s.touch.start.x,r=s.touch.originalPos.left+a):(a=i[0].pageY-s.touch.start.y,r=s.touch.originalPos.top+a),b(r,"reset",0))},Y=function(e){s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.controls.el.removeClass("disabled");var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=0,r=0;s.touch.end.x=i[0].pageX,s.touch.end.y=i[0].pageY,"fade"===s.settings.mode?(r=Math.abs(s.touch.start.x-s.touch.end.x),r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())):("horizontal"===s.settings.mode?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0===s.active.index&&r>0||s.active.last&&r<0)?b(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(n,"reset",200)),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},_=function(t){if(s.initialized)if(s.working)window.setTimeout(_,10);else{var i=e(window).width(),n=e(window).height();r===i&&a===n||(r=i,a=n,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}},X=function(e){var t=v();s.settings.ariaHidden&&!s.settings.ticker&&(s.children.attr("aria-hidden","true"),s.children.slice(e,e+t).attr("aria-hidden","false"))},Z=function(e){return e<0?s.settings.infiniteLoop?f()-1:s.active.index:e>=f()?s.settings.infiniteLoop?0:s.active.index:e};return o.goToSlide=function(t,i){var n,r,a,l,d=!0,c=0,g={left:0,top:0},p=null;if(s.oldIndex=s.active.index,s.active.index=Z(t),!s.working&&s.active.index!==s.oldIndex){if(s.working=!0,d=s.settings.onSlideBefore.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index),"undefined"!=typeof d&&!d)return s.active.index=s.oldIndex,void(s.working=!1);"next"===i?s.settings.onSlideNext.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1):"prev"===i&&(s.settings.onSlidePrev.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1)),s.active.last=s.active.index>=f()-1,(s.settings.pager||s.settings.pagerCustom)&&P(s.active.index),s.settings.controls&&z(),"fade"===s.settings.mode?(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),O()})):(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),!s.settings.infiniteLoop&&s.carousel&&s.active.last?"horizontal"===s.settings.mode?(p=s.children.eq(s.children.length-1),g=p.position(),c=s.viewport.width()-p.outerWidth()):(n=s.children.length-s.settings.minSlides,g=s.children.eq(n).position()):s.carousel&&s.active.last&&"prev"===i?(r=1===s.settings.moveSlides?s.settings.maxSlides-m():(f()-1)*m()-(s.children.length-s.settings.maxSlides),p=o.children(".bx-clone").eq(r),g=p.position()):"next"===i&&0===s.active.index?(g=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1):t>=0&&(l=t*parseInt(m()),g=s.children.eq(l).position()),"undefined"!=typeof g?(a="horizontal"===s.settings.mode?-(g.left-c):-g.top,b(a,"slide",s.settings.speed)):s.working=!1),s.settings.ariaHidden&&X(s.active.index*m())}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!==s.active.index){var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"===s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&e!==!0&&D("stop"))},o.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&e!==!0&&D("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideElement=function(e){return s.children.eq(e)},o.getSlideCount=function(){return s.children.length},o.isWorking=function(){return s.working},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).outerWidth(h()),s.viewport.css("height",u()),s.settings.ticker||x(),s.active.last&&(s.active.index=f()-1),s.active.index>=f()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(S(),P(s.active.index)),s.settings.ariaHidden&&X(s.active.index*m())},o.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){void 0!==e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!==e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&!s.settings.pagerCustom&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",_),s.settings.keyboardEnabled&&e(document).unbind("keydown",L),e(this).removeData("bxSlider"))},o.reloadSlider=function(t){void 0!==t&&(n=t),o.destroySlider(),l(),e(o).data("bxSlider",this)},l(),e(o).data("bxSlider",this),this}}}(jQuery),hasTouch())try{for(var si in document.styleSheets){var styleSheet=document.styleSheets[si];if(styleSheet.rules)for(var ri=styleSheet.rules.length-1;ri>=0;ri--)styleSheet.rules[ri].selectorText&&styleSheet.rules[ri].selectorText.match(":hover")&&styleSheet.deleteRule(ri)}}catch(ex){}$(function(){var e=$(".sidebar"),t=$(".navbar__links"),i=$(".navbar"),n=$("#burger");$(".links__item"),$(".sidebarlayout");e.click(function(){t.toggleClass("--visible"),e.toggleClass("--on"),n.toggleClass("close").toggleClass("opened")}),i.siblings().click(function(){t.removeClass("--visible"),e.removeClass("--on"),n.addClass("close").removeClass("opened")});var s=$("#show-pop-up"),o=$(".wpbtn-footer"),r=$(".cover"),a=$(".close-button"),l=$(".whitepapper"),d=$("#show-feedback"),c=$(".feedback-wrap"),g=$(".space-close"),u=$("#qr-wechat"),p=$("#link-wechat"),h=$(".feedback-ico");u.hide().click(function(){u.fadeToggle(600),h.delay(600).fadeToggle(400)}),p.click(function(e){e.preventDefault(),u.delay(400).fadeToggle(600),h.fadeToggle(400)}),d.click(function(e){e.preventDefault(),c.fadeToggle("400"),d.toggleClass("white"),g.toggle(400)}),g.click(function(){c.fadeOut(400),d.removeClass("white"),g.hide()}),s.click(function(e){e.preventDefault(),r.fadeIn(400),l.fadeIn(400)}),o.click(function(e){e.preventDefault(),r.fadeIn(400),l.fadeIn(400)}),a.click(function(){r.fadeOut(400),l.fadeOut(400)}),r.click(function(){r.fadeOut(400),l.fadeOut(400)});var v=$(".hexogon"),f=$(".line"),m=$("g.text"),x=$(".roadmap");f.hide(),m.hide(),v.click(function(){x.addClass("step1"),setTimeout(function(){x.addClass("step2")},1200),setTimeout(function(){f.fadeIn("1000"),m.delay(1e3).fadeIn("400")},2e3)});var b=($("a.lang"),$("#lang-us"),$("#lang-cn"),$("#lang-in"),$(".langswitch-wrap")),S=$(".langswitch"),w=$(".langswitch-carusel");b.click(function(){S.toggle(400),$(".links__item").toggleClass("hided")}),w.bxSlider({auto:!0,controls:!1,pause:2e3,pager:!1,touchEnabled:!1});var k=$(".pop-up-video"),C=$("#play-video-eng-btn"),y=$("#play-video-cn-btn");C.click(function(){k.append('<iframe id="video" src="https://www.youtube.com/embed/p1YiDKlSe8k?rel=0&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),k.fadeIn(700)}),y.click(function(){k.append('<video id="video" controls autoplay><source src="http://onplace.io/img/video/onplace-china-subtitle.mp4" type="video/mp4"/></video>'),k.fadeIn(700)}),$(".close-button-video").click(function(e){var t=$("#video"),i=$("#video-pop-up");e.preventDefault(),k.hide(700),i.remove(),t.remove()}),$(".partners-carousel").bxSlider({auto:!0,controls:!1,pause:3e3,pager:!1});var E={Empty:$("#picture-empty"),Edward:$("#picture-Edward"),Andrei:$("#picture-Andrei"),Dmitriy:$("#picture-Dmitriy"),Ilya:$("#picture-Ilya"),Mike:$("#picture-Mike"),Oleg:$("#picture-Oleg"),Michael:$("#picture-Michael"),Eugene:$("#picture-Eugene"),Ruslan:$("#picture-Ruslan"),Vladimir:$("#picture-Vladimir")},I={team:$("#team-description"),Edward:$("#Edward-description"),Andrei:$("#Andrei-description"),Dmitriy:$("#Dmitriy-description"),Ilya:$("#Ilya-description"),Mike:$("#Mike-description"),Oleg:$("#Oleg-description"),Michael:$("#Michael-description"),Eugene:$("#Eugene-description"),Ruslan:$("#Ruslan-description"),Vladimir:$("#Vladimir-description")},T={total:$(".backgrounds-item"),Edward:$("#Edward-background"),Andrei:$("#Andrei-background"),Mike:$("#Mike-background"),Dmitriy:$("#Dmitriy-background"),Ilya:$("#Ilya-background"),Oleg:$("#Oleg-background"),Michael:$("#Michael-background"),Eugene:$("#Eugene-background"),Ruslan:$("#Ruslan-background"),Vladimir:$("#Vladimir-background")},M=$(".member-picture"),P=$(".blue_polygons"),O=$(".team");I.team.show(),M.click(function(){P.fadeOut(800),O.addClass("white")}),E.Empty.click(function(e){e.preventDefault(),T.total.fadeOut(800),I.team.fadeIn(800).siblings().fadeOut(800),P.fadeIn(800),O.removeClass("white")}),E.Andrei.click(function(e){e.preventDefault(),T.Andrei.fadeIn(800).siblings().fadeOut(800),I.Andrei.fadeIn(800).siblings().fadeOut(800)}),E.Edward.click(function(e){e.preventDefault(),T.Edward.fadeIn(800).siblings().fadeOut(800),I.Edward.fadeIn(800).siblings().fadeOut(800)}),E.Dmitriy.click(function(e){e.preventDefault(),T.Dmitriy.fadeIn(800).siblings().fadeOut(800),I.Dmitriy.fadeIn(800).siblings().fadeOut(800)}),E.Ilya.click(function(e){e.preventDefault(),T.Ilya.fadeIn(800).siblings().fadeOut(800),I.Ilya.fadeIn(800).siblings().fadeOut(800)}),E.Mike.click(function(e){e.preventDefault(),T.Mike.fadeIn(800).siblings().fadeOut(800),I.Mike.fadeIn(800).siblings().fadeOut(800)}),E.Oleg.click(function(e){e.preventDefault(),T.Oleg.fadeIn(800).siblings().fadeOut(800),I.Oleg.fadeIn(800).siblings().fadeOut(800)}),E.Michael.click(function(e){e.preventDefault(),T.Michael.fadeIn(800).siblings().fadeOut(800),I.Michael.fadeIn(800).siblings().fadeOut(800)}),E.Eugene.click(function(e){e.preventDefault(),T.Eugene.fadeIn(800).siblings().fadeOut(800),I.Eugene.fadeIn(800).siblings().fadeOut(800)}),E.Ruslan.click(function(e){e.preventDefault(),T.Ruslan.fadeIn(800).siblings().fadeOut(800),I.Ruslan.fadeIn(800).siblings().fadeOut(800)}),E.Vladimir.click(function(e){e.preventDefault(),T.Vladimir.fadeIn(800).siblings().fadeOut(800),I.Vladimir.fadeIn(800).siblings().fadeOut(800)}),$(window).scroll(function(){var e=$(this).scrollTop();T.total.css({transform:"translate(0px, -"+e/3+"px)"})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGFzVG91Y2giLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwibXNNYXhUb3VjaFBvaW50cyIsIiQiLCJkZWZhdWx0cyIsIm1vZGUiLCJzbGlkZVNlbGVjdG9yIiwiaW5maW5pdGVMb29wIiwiaGlkZUNvbnRyb2xPbkVuZCIsInNwZWVkIiwiZWFzaW5nIiwic2xpZGVNYXJnaW4iLCJzdGFydFNsaWRlIiwicmFuZG9tU3RhcnQiLCJjYXB0aW9ucyIsInRpY2tlciIsInRpY2tlckhvdmVyIiwiYWRhcHRpdmVIZWlnaHQiLCJhZGFwdGl2ZUhlaWdodFNwZWVkIiwidmlkZW8iLCJ1c2VDU1MiLCJwcmVsb2FkSW1hZ2VzIiwicmVzcG9uc2l2ZSIsInNsaWRlWkluZGV4Iiwid3JhcHBlckNsYXNzIiwidG91Y2hFbmFibGVkIiwic3dpcGVUaHJlc2hvbGQiLCJvbmVUb09uZVRvdWNoIiwicHJldmVudERlZmF1bHRTd2lwZVgiLCJwcmV2ZW50RGVmYXVsdFN3aXBlWSIsImFyaWFMaXZlIiwiYXJpYUhpZGRlbiIsImtleWJvYXJkRW5hYmxlZCIsInBhZ2VyIiwicGFnZXJUeXBlIiwicGFnZXJTaG9ydFNlcGFyYXRvciIsInBhZ2VyU2VsZWN0b3IiLCJidWlsZFBhZ2VyIiwicGFnZXJDdXN0b20iLCJjb250cm9scyIsIm5leHRUZXh0IiwicHJldlRleHQiLCJuZXh0U2VsZWN0b3IiLCJwcmV2U2VsZWN0b3IiLCJhdXRvQ29udHJvbHMiLCJzdGFydFRleHQiLCJzdG9wVGV4dCIsImF1dG9Db250cm9sc0NvbWJpbmUiLCJhdXRvQ29udHJvbHNTZWxlY3RvciIsImF1dG8iLCJwYXVzZSIsImF1dG9TdGFydCIsImF1dG9EaXJlY3Rpb24iLCJzdG9wQXV0b09uQ2xpY2siLCJhdXRvSG92ZXIiLCJhdXRvRGVsYXkiLCJhdXRvU2xpZGVGb3JPbmVQYWdlIiwibWluU2xpZGVzIiwibWF4U2xpZGVzIiwibW92ZVNsaWRlcyIsInNsaWRlV2lkdGgiLCJzaHJpbmtJdGVtcyIsIm9uU2xpZGVyTG9hZCIsIm9uU2xpZGVCZWZvcmUiLCJvblNsaWRlQWZ0ZXIiLCJvblNsaWRlTmV4dCIsIm9uU2xpZGVQcmV2Iiwib25TbGlkZXJSZXNpemUiLCJmbiIsImJ4U2xpZGVyIiwib3B0aW9ucyIsInRoaXMiLCJsZW5ndGgiLCJlYWNoIiwic2xpZGVyIiwiZWwiLCJ3aW5kb3dXaWR0aCIsIndpbmRvdyIsIndpZHRoIiwid2luZG93SGVpZ2h0IiwiaGVpZ2h0IiwiZGF0YSIsImluaXQiLCJzZXR0aW5ncyIsImV4dGVuZCIsInBhcnNlSW50IiwiY2hpbGRyZW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhY3RpdmUiLCJpbmRleCIsImNhcm91c2VsIiwibWluVGhyZXNob2xkIiwibWF4VGhyZXNob2xkIiwid29ya2luZyIsImludGVydmFsIiwiYW5pbVByb3AiLCJ1c2luZ0NTUyIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsImkiLCJ1bmRlZmluZWQiLCJzdHlsZSIsImNzc1ByZWZpeCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImF0dHIiLCJzZXR1cCIsInByZWxvYWRTZWxlY3RvciIsImVxIiwid3JhcCIsInZpZXdwb3J0IiwicGFyZW50IiwibG9hZGVyIiwicHJlcGVuZCIsImNzcyIsInBvc2l0aW9uIiwib3ZlcmZsb3ciLCJtYXhXaWR0aCIsImdldFZpZXdwb3J0TWF4V2lkdGgiLCJmbG9hdCIsImxpc3RTdHlsZSIsImdldFNsaWRlV2lkdGgiLCJ6SW5kZXgiLCJkaXNwbGF5IiwiYXBwZW5kQ2FwdGlvbnMiLCJsYXN0IiwiZ2V0UGFnZXJRdHkiLCJmaXRWaWRzIiwiYXBwZW5kQ29udHJvbHMiLCJhcHBlbmRDb250cm9sc0F1dG8iLCJhcHBlbmRQYWdlciIsImFmdGVyIiwibG9hZEVsZW1lbnRzIiwic3RhcnQiLCJzZWxlY3RvciIsImNhbGxiYWNrIiwidG90YWwiLCJmaW5kIiwiY291bnQiLCJvbmUiLCJjb21wbGV0ZSIsInRyaWdnZXIiLCJzbGljZSIsInNsaWNlQXBwZW5kIiwiY2xvbmUiLCJhZGRDbGFzcyIsInNsaWNlUHJlcGVuZCIsImFwcGVuZCIsInJlbW92ZSIsInNldFNsaWRlUG9zaXRpb24iLCJnZXRWaWV3cG9ydEhlaWdodCIsInJlZHJhd1NsaWRlciIsImNhbGwiLCJpbml0aWFsaXplZCIsImJpbmQiLCJyZXNpemVXaW5kb3ciLCJpbml0QXV0byIsImluaXRUaWNrZXIiLCJ1cGRhdGVQYWdlckFjdGl2ZSIsInVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzIiwiaW5pdFRvdWNoIiwia2V5ZG93biIsImtleVByZXNzIiwiY3VycmVudEluZGV4IiwiZ2V0TW92ZUJ5IiwiYWRkIiwib3V0ZXJIZWlnaHQiLCJtYXgiLCJhcHBseSIsIm1hcCIsImdldCIsInBhcnNlRmxvYXQiLCJuZXdFbFdpZHRoIiwid3JhcFdpZHRoIiwiY2VpbCIsImdldE51bWJlclNsaWRlc1Nob3dpbmciLCJzbGlkZXNTaG93aW5nIiwiY2hpbGRXaWR0aCIsImZpcnN0IiwicGFnZXJRdHkiLCJicmVha1BvaW50IiwiY291bnRlciIsImxhc3RDaGlsZCIsImxhc3RTaG93aW5nSW5kZXgiLCJzZXRQb3NpdGlvblByb3BlcnR5IiwibGVmdCIsIm91dGVyV2lkdGgiLCJ0b3AiLCJ2YWx1ZSIsInR5cGUiLCJkdXJhdGlvbiIsInBhcmFtcyIsImFuaW1hdGVPYmoiLCJwcm9wVmFsdWUiLCJlIiwidGFyZ2V0IiwiaXMiLCJ1bmJpbmQiLCJ1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbiIsInJlc2V0VmFsdWUiLCJ0aWNrZXJMb29wIiwiYW5pbWF0ZSIsInBvcHVsYXRlUGFnZXIiLCJwYWdlckh0bWwiLCJsaW5rQ29udGVudCIsImlzRnVuY3Rpb24iLCJwYWdlckVsIiwiaHRtbCIsIm9uIiwiY2xpY2tQYWdlckJpbmQiLCJuZXh0IiwicHJldiIsImNsaWNrTmV4dEJpbmQiLCJjbGlja1ByZXZCaW5kIiwiZGlyZWN0aW9uRWwiLCJzdG9wIiwiYXV0b0VsIiwiY2xpY2tTdGFydEJpbmQiLCJjbGlja1N0b3BCaW5kIiwidXBkYXRlQXV0b0NvbnRyb2xzIiwidGl0bGUiLCJwcmV2ZW50RGVmYXVsdCIsImhhc0NsYXNzIiwic3RvcEF1dG8iLCJnb1RvTmV4dFNsaWRlIiwiZ29Ub1ByZXZTbGlkZSIsInN0YXJ0QXV0byIsInBhZ2VyTGluayIsInBhZ2VySW5kZXgiLCJjdXJyZW50VGFyZ2V0IiwiZ29Ub1NsaWRlIiwic2xpZGVJbmRleCIsImxlbiIsInJlbW92ZUNsYXNzIiwib2xkSW5kZXgiLCJzdGF0ZSIsInNldFRpbWVvdXQiLCJmb2N1cyIsImJsdXIiLCJob3ZlciIsImF1dG9QYXVzZWQiLCJ0cmFuc2Zvcm0iLCJpZHgiLCJyYXRpbyIsInByb3BlcnR5IiwibmV3U3BlZWQiLCJ0b3RhbERpbWVucyIsInN0YXJ0UG9zaXRpb24iLCJzcGxpdCIsImFicyIsInJlc3VtZVNwZWVkIiwiYW5pbWF0ZVByb3BlcnR5IiwicmVzZXQiLCJpc09uU2NyZWVuIiwid2luIiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsImJvdW5kcyIsIm9mZnNldCIsInJpZ2h0IiwiYm90dG9tIiwiYWN0aXZlRWxlbWVudFRhZyIsImFjdGl2ZUVsZW1lbnQiLCJ0YWdOYW1lIiwidGFnRmlsdGVycyIsInAiLCJSZWdFeHAiLCJyZXN1bHQiLCJleGVjIiwia2V5Q29kZSIsInRvdWNoIiwieCIsInkiLCJlbmQiLCJvblRvdWNoU3RhcnQiLCJvcmlnaW5hbFBvcyIsIm9yaWciLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hQb2ludHMiLCJjaGFuZ2VkVG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJJZCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsIm9uUG9pbnRlckNhbmNlbCIsInJlbGVhc2VQb2ludGVyQ2FwdHVyZSIsInhNb3ZlbWVudCIsInlNb3ZlbWVudCIsImNoYW5nZSIsImRpc3RhbmNlIiwid2luZG93V2lkdGhOZXciLCJ3aW5kb3dIZWlnaHROZXciLCJhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzIiwic3RhcnRWaXNpYmxlSW5kZXgiLCJudW1iZXJPZlNsaWRlc1Nob3dpbmciLCJzZXRTbGlkZUluZGV4IiwiZGlyZWN0aW9uIiwicmVxdWVzdEVsIiwicGVyZm9ybVRyYW5zaXRpb24iLCJtb3ZlQnkiLCJmaWx0ZXIiLCJmYWRlT3V0IiwiZmFkZUluIiwicHJldmVudENvbnRyb2xVcGRhdGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJnZXRDdXJyZW50U2xpZGUiLCJnZXRDdXJyZW50U2xpZGVFbGVtZW50IiwiZ2V0U2xpZGVFbGVtZW50IiwiZ2V0U2xpZGVDb3VudCIsImlzV29ya2luZyIsImRlc3Ryb3lTbGlkZXIiLCJyZW1vdmVBdHRyIiwidW53cmFwIiwicmVtb3ZlRGF0YSIsInJlbG9hZFNsaWRlciIsImpRdWVyeSIsInNpIiwic3R5bGVTaGVldHMiLCJzdHlsZVNoZWV0IiwicnVsZXMiLCJyaSIsInNlbGVjdG9yVGV4dCIsIm1hdGNoIiwiZGVsZXRlUnVsZSIsImV4IiwiJHNpZGViYXIiLCIkbmF2YmFyIiwiJG5hdmJhckNvbnRhaW5lciIsIiRidXJnZXIiLCJjbGljayIsInRvZ2dsZUNsYXNzIiwic2libGluZ3MiLCIkd2hpdGVQYXBwZXIiLCIkd2hpdGVQYXBwZXJCdG4iLCIkb3ZlcmxheSIsIiRjbG9zZUJ0biIsIiRwb3BVcFdoaXRlcGFwcGVyIiwiJGZlZWRiYWNrIiwiJHBvcFVwRmVlZGJhY2siLCIkY2xvc2VTcGFjZSIsIiRxcldlQ2hhdCIsIiRsaW5rV2VDaGF0IiwiJGZlZWRiYWNrTGlua3MiLCJoaWRlIiwiZmFkZVRvZ2dsZSIsImRlbGF5IiwidG9nZ2xlIiwiZXZlbnQiLCIkaGV4YWdvbmUiLCIkbGluZUNvbm5lY3QiLCIkdGV4dFBvaW50cyIsIiRyb2FkbWFwIiwiJGxhbmdCdG4iLCIkbGFuZ1N3aXRjaCIsIiRsYW5nU3dpdGNoQ2FydXNlbCIsIiRwb3BVcFZpZGVvQ29udGFpbmVyIiwiJHBvcFVwVmlkZW9CdG4iLCIkcG9wVXBWaWRlb0NuQnRuIiwiJHZpZGVvIiwiJHZpZGVvU2NyZWVuIiwicGljdHVyZXMiLCJFbXB0eSIsIkVkd2FyZCIsIkFuZHJlaSIsIkRtaXRyaXkiLCJJbHlhIiwiTWlrZSIsIk9sZWciLCJNaWNoYWVsIiwiRXVnZW5lIiwiUnVzbGFuIiwiVmxhZGltaXIiLCJkZXNjcmlwdGlvbiIsInRlYW0iLCJiYWNrZ3JvdW5kcyIsImhleG9saW5rcyIsImJsdWVoZXhlcyIsInRlYW1TZWN0aW9uIiwic2hvdyIsInNjcm9sbCIsInN0Il0sIm1hcHBpbmdzIjoiQUFpa0RBLFFBQVNBLFlBQ0wsTUFBTyxnQkFBa0JDLFVBQVNDLGlCQUN4QkMsVUFBVUMsZUFBaUIsR0FDM0JELFVBQVVFLGlCQUFtQixFQUczQyxHQXZrREMsU0FBVUMsR0FFVCxHQUFJQyxJQUdGQyxLQUFNLGFBQ05DLGNBQWUsR0FDZkMsY0FBYyxFQUNkQyxrQkFBa0IsRUFDbEJDLE1BQU8sSUFDUEMsT0FBUSxLQUNSQyxZQUFhLEVBQ2JDLFdBQVksRUFDWkMsYUFBYSxFQUNiQyxVQUFVLEVBQ1ZDLFFBQVEsRUFDUkMsYUFBYSxFQUNiQyxnQkFBZ0IsRUFDaEJDLG9CQUFxQixJQUNyQkMsT0FBTyxFQUNQQyxRQUFRLEVBQ1JDLGNBQWUsVUFDZkMsWUFBWSxFQUNaQyxZQUFhLEdBQ2JDLGFBQWMsYUFHZEMsY0FBYyxFQUNkQyxlQUFnQixHQUNoQkMsZUFBZSxFQUNmQyxzQkFBc0IsRUFDdEJDLHNCQUFzQixFQUd0QkMsVUFBVSxFQUNWQyxZQUFZLEVBR1pDLGlCQUFpQixFQUdqQkMsT0FBTyxFQUNQQyxVQUFXLE9BQ1hDLG9CQUFxQixNQUNyQkMsY0FBZSxLQUNmQyxXQUFZLEtBQ1pDLFlBQWEsS0FHYkMsVUFBVSxFQUNWQyxTQUFVLE9BQ1ZDLFNBQVUsT0FDVkMsYUFBYyxLQUNkQyxhQUFjLEtBQ2RDLGNBQWMsRUFDZEMsVUFBVyxRQUNYQyxTQUFVLE9BQ1ZDLHFCQUFxQixFQUNyQkMscUJB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RUFBRTJCLGlCQUNGNEosRUFBWU4sUUFBUW5FLE9BQU8sS0FBSzhCLFdBQVcvQixRQUFRLEtBQ25Ed0UsRUFBWUosUUFBUW5FLE9BQU8sS0FBSzhCLFdBQVcvQixRQUFRLE9BRXJENEQsRUFBU1MsT0FBT3hDLE1BQU0sU0FBUzFJLEdBQzdCQSxFQUFFMkIsaUJBQ0Y0SixFQUFZTCxPQUFPcEUsT0FBTyxLQUFLOEIsV0FBVy9CLFFBQVEsS0FDbER3RSxFQUFZSCxPQUFPcEUsT0FBTyxLQUFLOEIsV0FBVy9CLFFBQVEsT0FFcEQ0RCxFQUFTVSxPQUFPekMsTUFBTSxTQUFTMUksR0FDN0JBLEVBQUUyQixpQkFDRjRKLEVBQVlKLE9BQU9yRSxPQUFPLEtBQUs4QixXQUFXL0IsUUFBUSxLQUNsRHdFLEVBQVlGLE9BQU9yRSxPQUFPLEtBQUs4QixXQUFXL0IsUUFBUSxPQUVwRDRELEVBQVNXLFNBQVMxQyxNQUFNLFNBQVMxSSxHQUMvQkEsRUFBRTJCLGlCQUNGNEosRUFBWUgsU0FBU3RFLE9BQU8sS0FBSzhCLFdBQVcvQixRQUFRLEtBQ3BEd0UsRUFBWUQsU0FBU3RFLE9BQU8sS0FBSzhCLFdBQVcvQixRQUFRLE9BSXREL1MsRUFBRTBFLFFBQVFvVCxPQUFPLFdBQ2YsR0FBSUMsR0FBSy9YLEVBQUVvRSxNQUFNMkwsV0FFakIwSCxHQUFZalAsTUFBTXRCLEtBQU0rSCxVQUFXLG1CQUFxQjhJLEVBQUcsRUFBRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigkKSB7XHJcblxyXG4gIHZhciBkZWZhdWx0cyA9IHtcclxuXHJcbiAgICAvLyBHRU5FUkFMXHJcbiAgICBtb2RlOiAnaG9yaXpvbnRhbCcsXHJcbiAgICBzbGlkZVNlbGVjdG9yOiAnJyxcclxuICAgIGluZmluaXRlTG9vcDogdHJ1ZSxcclxuICAgIGhpZGVDb250cm9sT25FbmQ6IGZhbHNlLFxyXG4gICAgc3BlZWQ6IDUwMCxcclxuICAgIGVhc2luZzogbnVsbCxcclxuICAgIHNsaWRlTWFyZ2luOiAwLFxyXG4gICAgc3RhcnRTbGlkZTogMCxcclxuICAgIHJhbmRvbVN0YXJ0OiBmYWxzZSxcclxuICAgIGNhcHRpb25zOiBmYWxzZSxcclxuICAgIHRpY2tlcjogZmFsc2UsXHJcbiAgICB0aWNrZXJIb3ZlcjogZmFsc2UsXHJcbiAgICBhZGFwdGl2ZUhlaWdodDogZmFsc2UsXHJcbiAgICBhZGFwdGl2ZUhlaWdodFNwZWVkOiA1MDAsXHJcbiAgICB2aWRlbzogZmFsc2UsXHJcbiAgICB1c2VDU1M6IHRydWUsXHJcbiAgICBwcmVsb2FkSW1hZ2VzOiAndmlzaWJsZScsXHJcbiAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgc2xpZGVaSW5kZXg6IDUwLFxyXG4gICAgd3JhcHBlckNsYXNzOiAnYngtd3JhcHBlcicsXHJcblxyXG4gICAgLy8gVE9VQ0hcclxuICAgIHRvdWNoRW5hYmxlZDogdHJ1ZSxcclxuICAgIHN3aXBlVGhyZXNob2xkOiA1MCxcclxuICAgIG9uZVRvT25lVG91Y2g6IHRydWUsXHJcbiAgICBwcmV2ZW50RGVmYXVsdFN3aXBlWDogdHJ1ZSxcclxuICAgIHByZXZlbnREZWZhdWx0U3dpcGVZOiBmYWxzZSxcclxuXHJcbiAgICAvLyBBQ0NFU1NJQklMSVRZXHJcbiAgICBhcmlhTGl2ZTogdHJ1ZSxcclxuICAgIGFyaWFIaWRkZW46IHRydWUsXHJcblxyXG4gICAgLy8gS0VZQk9BUkRcclxuICAgIGtleWJvYXJkRW5hYmxlZDogZmFsc2UsXHJcblxyXG4gICAgLy8gUEFHRVJcclxuICAgIHBhZ2VyOiB0cnVlLFxyXG4gICAgcGFnZXJUeXBlOiAnZnVsbCcsXHJcbiAgICBwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJyxcclxuICAgIHBhZ2VyU2VsZWN0b3I6IG51bGwsXHJcbiAgICBidWlsZFBhZ2VyOiBudWxsLFxyXG4gICAgcGFnZXJDdXN0b206IG51bGwsXHJcblxyXG4gICAgLy8gQ09OVFJPTFNcclxuICAgIGNvbnRyb2xzOiB0cnVlLFxyXG4gICAgbmV4dFRleHQ6ICdOZXh0JyxcclxuICAgIHByZXZUZXh0OiAnUHJldicsXHJcbiAgICBuZXh0U2VsZWN0b3I6IG51bGwsXHJcbiAgICBwcmV2U2VsZWN0b3I6IG51bGwsXHJcbiAgICBhdXRvQ29udHJvbHM6IGZhbHNlLFxyXG4gICAgc3RhcnRUZXh0OiAnU3RhcnQnLFxyXG4gICAgc3RvcFRleHQ6ICdTdG9wJyxcclxuICAgIGF1dG9Db250cm9sc0NvbWJpbmU6IGZhbHNlLFxyXG4gICAgYXV0b0NvbnRyb2xzU2VsZWN0b3I6IG51bGwsXHJcblxyXG4gICAgLy8gQVVUT1xyXG4gICAgYXV0bzogZmFsc2UsXHJcbiAgICBwYXVzZTogNDAwMCxcclxuICAgIGF1dG9TdGFydDogdHJ1ZSxcclxuICAgIGF1dG9EaXJlY3Rpb246ICduZXh0JyxcclxuICAgIHN0b3BBdXRvT25DbGljazogZmFsc2UsXHJcbiAgICBhdXRvSG92ZXI6IGZhbHNlLFxyXG4gICAgYXV0b0RlbGF5OiAwLFxyXG4gICAgYXV0b1NsaWRlRm9yT25lUGFnZTogZmFsc2UsXHJcblxyXG4gICAgLy8gQ0FST1VTRUxcclxuICAgIG1pblNsaWRlczogMSxcclxuICAgIG1heFNsaWRlczogMSxcclxuICAgIG1vdmVTbGlkZXM6IDAsXHJcbiAgICBzbGlkZVdpZHRoOiAwLFxyXG4gICAgc2hyaW5rSXRlbXM6IGZhbHNlLFxyXG5cclxuICAgIC8vIENBTExCQUNLU1xyXG4gICAgb25TbGlkZXJMb2FkOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXHJcbiAgICBvblNsaWRlQmVmb3JlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXHJcbiAgICBvblNsaWRlQWZ0ZXI6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcclxuICAgIG9uU2xpZGVOZXh0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXHJcbiAgICBvblNsaWRlUHJldjogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxyXG4gICAgb25TbGlkZXJSZXNpemU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gIH07XHJcblxyXG4gICQuZm4uYnhTbGlkZXIgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblxyXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHN1cHBvcnQgbXVsdGlwbGUgZWxlbWVudHNcclxuICAgIGlmICh0aGlzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykuYnhTbGlkZXIob3B0aW9ucyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBjcmVhdGUgYSBuYW1lc3BhY2UgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHRoZSBwbHVnaW5cclxuICAgIHZhciBzbGlkZXIgPSB7fSxcclxuICAgIC8vIHNldCBhIHJlZmVyZW5jZSB0byBvdXIgc2xpZGVyIGVsZW1lbnRcclxuICAgIGVsID0gdGhpcyxcclxuICAgIC8vIGdldCB0aGUgb3JpZ2luYWwgd2luZG93IGRpbWVucyAodGhhbmtzIGEgbG90IElFKVxyXG4gICAgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKSxcclxuICAgIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcclxuXHJcbiAgICAvLyBSZXR1cm4gaWYgc2xpZGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWRcclxuICAgIGlmICgkKGVsKS5kYXRhKCdieFNsaWRlcicpKSB7IHJldHVybjsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqID0gUFJJVkFURSBGVU5DVElPTlNcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIG5hbWVzcGFjZSBzZXR0aW5ncyB0byBiZSB1c2VkIHRocm91Z2hvdXQgcGx1Z2luXHJcbiAgICAgKi9cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIFJldHVybiBpZiBzbGlkZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZFxyXG4gICAgICBpZiAoJChlbCkuZGF0YSgnYnhTbGlkZXInKSkgeyByZXR1cm47IH1cclxuICAgICAgLy8gbWVyZ2UgdXNlci1zdXBwbGllZCBvcHRpb25zIHdpdGggdGhlIGRlZmF1bHRzXHJcbiAgICAgIHNsaWRlci5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XHJcbiAgICAgIC8vIHBhcnNlIHNsaWRlV2lkdGggc2V0dGluZ1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA9IHBhcnNlSW50KHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKTtcclxuICAgICAgLy8gc3RvcmUgdGhlIG9yaWdpbmFsIGNoaWxkcmVuXHJcbiAgICAgIHNsaWRlci5jaGlsZHJlbiA9IGVsLmNoaWxkcmVuKHNsaWRlci5zZXR0aW5ncy5zbGlkZVNlbGVjdG9yKTtcclxuICAgICAgLy8gY2hlY2sgaWYgYWN0dWFsIG51bWJlciBvZiBzbGlkZXMgaXMgbGVzcyB0aGFuIG1pblNsaWRlcyAvIG1heFNsaWRlc1xyXG4gICAgICBpZiAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA8IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMpIHsgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IH1cclxuICAgICAgaWYgKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPCBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKSB7IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyB9XHJcbiAgICAgIC8vIGlmIHJhbmRvbSBzdGFydCwgc2V0IHRoZSBzdGFydFNsaWRlIHNldHRpbmcgdG8gcmFuZG9tIG51bWJlclxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnJhbmRvbVN0YXJ0KSB7IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCk7IH1cclxuICAgICAgLy8gc3RvcmUgYWN0aXZlIHNsaWRlIGluZm9ybWF0aW9uXHJcbiAgICAgIHNsaWRlci5hY3RpdmUgPSB7IGluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSB9O1xyXG4gICAgICAvLyBzdG9yZSBpZiB0aGUgc2xpZGVyIGlzIGluIGNhcm91c2VsIG1vZGUgKGRpc3BsYXlpbmcgLyBtb3ZpbmcgbXVsdGlwbGUgc2xpZGVzKVxyXG4gICAgICBzbGlkZXIuY2Fyb3VzZWwgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgLy8gaWYgY2Fyb3VzZWwsIGZvcmNlIHByZWxvYWRJbWFnZXMgPSAnYWxsJ1xyXG4gICAgICBpZiAoc2xpZGVyLmNhcm91c2VsKSB7IHNsaWRlci5zZXR0aW5ncy5wcmVsb2FkSW1hZ2VzID0gJ2FsbCc7IH1cclxuICAgICAgLy8gY2FsY3VsYXRlIHRoZSBtaW4gLyBtYXggd2lkdGggdGhyZXNob2xkcyBiYXNlZCBvbiBtaW4gLyBtYXggbnVtYmVyIG9mIHNsaWRlc1xyXG4gICAgICAvLyB1c2VkIHRvIHNldHVwIGFuZCB1cGRhdGUgY2Fyb3VzZWwgc2xpZGVzIGRpbWVuc2lvbnNcclxuICAgICAgc2xpZGVyLm1pblRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xyXG4gICAgICBzbGlkZXIubWF4VGhyZXNob2xkID0gKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCkgKyAoKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSAxKSAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7XHJcbiAgICAgIC8vIHN0b3JlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBzbGlkZXIgKGlmIGN1cnJlbnRseSBhbmltYXRpbmcsIHdvcmtpbmcgaXMgdHJ1ZSlcclxuICAgICAgc2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcclxuICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgY29udHJvbHMgb2JqZWN0XHJcbiAgICAgIHNsaWRlci5jb250cm9scyA9IHt9O1xyXG4gICAgICAvLyBpbml0aWFsaXplIGFuIGF1dG8gaW50ZXJ2YWxcclxuICAgICAgc2xpZGVyLmludGVydmFsID0gbnVsbDtcclxuICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZSBmb3IgdHJhbnNpdGlvbnNcclxuICAgICAgc2xpZGVyLmFuaW1Qcm9wID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcgPyAndG9wJyA6ICdsZWZ0JztcclxuICAgICAgLy8gZGV0ZXJtaW5lIGlmIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBjYW4gYmUgdXNlZFxyXG4gICAgICBzbGlkZXIudXNpbmdDU1MgPSBzbGlkZXIuc2V0dGluZ3MudXNlQ1NTICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAnZmFkZScgJiYgKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vIGNyZWF0ZSBvdXIgdGVzdCBkaXYgZWxlbWVudFxyXG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAvLyBjc3MgdHJhbnNpdGlvbiBwcm9wZXJ0aWVzXHJcbiAgICAgICAgcHJvcHMgPSBbJ1dlYmtpdFBlcnNwZWN0aXZlJywgJ01velBlcnNwZWN0aXZlJywgJ09QZXJzcGVjdGl2ZScsICdtc1BlcnNwZWN0aXZlJ107XHJcbiAgICAgICAgLy8gdGVzdCBmb3IgZWFjaCBwcm9wZXJ0eVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIGlmIChkaXYuc3R5bGVbcHJvcHNbaV1dICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc2xpZGVyLmNzc1ByZWZpeCA9IHByb3BzW2ldLnJlcGxhY2UoJ1BlcnNwZWN0aXZlJywgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHNsaWRlci5hbmltUHJvcCA9ICctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zZm9ybSc7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH0oKSk7XHJcbiAgICAgIC8vIGlmIHZlcnRpY2FsIG1vZGUgYWx3YXlzIG1ha2UgbWF4U2xpZGVzIGFuZCBtaW5TbGlkZXMgZXF1YWxcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzOyB9XHJcbiAgICAgIC8vIHNhdmUgb3JpZ2luYWwgc3R5bGUgZGF0YVxyXG4gICAgICBlbC5kYXRhKCdvcmlnU3R5bGUnLCBlbC5hdHRyKCdzdHlsZScpKTtcclxuICAgICAgZWwuY2hpbGRyZW4oc2xpZGVyLnNldHRpbmdzLnNsaWRlU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnLCAkKHRoaXMpLmF0dHIoJ3N0eWxlJykpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIHBlcmZvcm0gYWxsIERPTSAvIENTUyBtb2RpZmljYXRpb25zXHJcbiAgICAgIHNldHVwKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgYWxsIERPTSBhbmQgQ1NTIG1vZGlmaWNhdGlvbnNcclxuICAgICAqL1xyXG4gICAgdmFyIHNldHVwID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBwcmVsb2FkU2VsZWN0b3IgPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpOyAvLyBzZXQgdGhlIGRlZmF1bHQgcHJlbG9hZCBzZWxlY3RvciAodmlzaWJsZSlcclxuXHJcbiAgICAgIC8vIHdyYXAgZWwgaW4gYSB3cmFwcGVyXHJcbiAgICAgIGVsLndyYXAoJzxkaXYgY2xhc3M9XCInICsgc2xpZGVyLnNldHRpbmdzLndyYXBwZXJDbGFzcyArICdcIj48ZGl2IGNsYXNzPVwiYngtdmlld3BvcnRcIj48L2Rpdj48L2Rpdj4nKTtcclxuICAgICAgLy8gc3RvcmUgYSBuYW1lc3BhY2UgcmVmZXJlbmNlIHRvIC5ieC12aWV3cG9ydFxyXG4gICAgICBzbGlkZXIudmlld3BvcnQgPSBlbC5wYXJlbnQoKTtcclxuXHJcbiAgICAgIC8vIGFkZCBhcmlhLWxpdmUgaWYgdGhlIHNldHRpbmcgaXMgZW5hYmxlZCBhbmQgdGlja2VyIG1vZGUgaXMgZGlzYWJsZWRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhTGl2ZSAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xyXG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5hdHRyKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gYWRkIGEgbG9hZGluZyBkaXYgdG8gZGlzcGxheSB3aGlsZSBpbWFnZXMgYXJlIGxvYWRpbmdcclxuICAgICAgc2xpZGVyLmxvYWRlciA9ICQoJzxkaXYgY2xhc3M9XCJieC1sb2FkaW5nXCIgLz4nKTtcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LnByZXBlbmQoc2xpZGVyLmxvYWRlcik7XHJcbiAgICAgIC8vIHNldCBlbCB0byBhIG1hc3NpdmUgd2lkdGgsIHRvIGhvbGQgYW55IG5lZWRlZCBzbGlkZXNcclxuICAgICAgLy8gYWxzbyBzdHJpcCBhbnkgbWFyZ2luIGFuZCBwYWRkaW5nIGZyb20gZWxcclxuICAgICAgZWwuY3NzKHtcclxuICAgICAgICB3aWR0aDogc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoICogMTAwMCArIDIxNSkgKyAnJScgOiAnYXV0bycsXHJcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGlmIHVzaW5nIENTUywgYWRkIHRoZSBlYXNpbmcgcHJvcGVydHlcclxuICAgICAgaWYgKHNsaWRlci51c2luZ0NTUyAmJiBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nKSB7XHJcbiAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgc2xpZGVyLnNldHRpbmdzLmVhc2luZyk7XHJcbiAgICAgIC8vIGlmIG5vdCB1c2luZyBDU1MgYW5kIG5vIGVhc2luZyB2YWx1ZSB3YXMgc3VwcGxpZWQsIHVzZSB0aGUgZGVmYXVsdCBKUyBhbmltYXRpb24gZWFzaW5nIChzd2luZylcclxuICAgICAgfSBlbHNlIGlmICghc2xpZGVyLnNldHRpbmdzLmVhc2luZykge1xyXG4gICAgICAgIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcgPSAnc3dpbmcnO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIG1ha2UgbW9kaWZpY2F0aW9ucyB0byB0aGUgdmlld3BvcnQgKC5ieC12aWV3cG9ydClcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmNzcyh7XHJcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXHJcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcclxuICAgICAgfSk7XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC5wYXJlbnQoKS5jc3Moe1xyXG4gICAgICAgIG1heFdpZHRoOiBnZXRWaWV3cG9ydE1heFdpZHRoKClcclxuICAgICAgfSk7XHJcbiAgICAgIC8vIGFwcGx5IGNzcyB0byBhbGwgc2xpZGVyIGNoaWxkcmVuXHJcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3Moe1xyXG4gICAgICAgIGZsb2F0OiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ25vbmUnLFxyXG4gICAgICAgIGxpc3RTdHlsZTogJ25vbmUnLFxyXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBhcHBseSB0aGUgY2FsY3VsYXRlZCB3aWR0aCBhZnRlciB0aGUgZmxvYXQgaXMgYXBwbGllZCB0byBwcmV2ZW50IHNjcm9sbGJhciBpbnRlcmZlcmVuY2VcclxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmNzcygnd2lkdGgnLCBnZXRTbGlkZVdpZHRoKCkpO1xyXG4gICAgICAvLyBpZiBzbGlkZU1hcmdpbiBpcyBzdXBwbGllZCwgYWRkIHRoZSBjc3NcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkgeyBzbGlkZXIuY2hpbGRyZW4uY3NzKCdtYXJnaW5SaWdodCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7IH1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHsgc2xpZGVyLmNoaWxkcmVuLmNzcygnbWFyZ2luQm90dG9tJywgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTsgfVxyXG4gICAgICAvLyBpZiBcImZhZGVcIiBtb2RlLCBhZGQgcG9zaXRpb25pbmcgYW5kIHotaW5kZXggQ1NTXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2ZhZGUnKSB7XHJcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmNzcyh7XHJcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcclxuICAgICAgICAgIHpJbmRleDogMCxcclxuICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHByZXBhcmUgdGhlIHotaW5kZXggb24gdGhlIHNob3dpbmcgZWxlbWVudFxyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSkuY3NzKHt6SW5kZXg6IHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCwgZGlzcGxheTogJ2Jsb2NrJ30pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGNyZWF0ZSBhbiBlbGVtZW50IHRvIGNvbnRhaW4gYWxsIHNsaWRlciBjb250cm9scyAocGFnZXIsIHN0YXJ0IC8gc3RvcCwgZXRjKVxyXG4gICAgICBzbGlkZXIuY29udHJvbHMuZWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHNcIiAvPicpO1xyXG4gICAgICAvLyBpZiBjYXB0aW9ucyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNhcHRpb25zKSB7IGFwcGVuZENhcHRpb25zKCk7IH1cclxuICAgICAgLy8gY2hlY2sgaWYgc3RhcnRTbGlkZSBpcyBsYXN0IHNsaWRlXHJcbiAgICAgIHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlID09PSBnZXRQYWdlclF0eSgpIC0gMTtcclxuICAgICAgLy8gaWYgdmlkZW8gaXMgdHJ1ZSwgc2V0IHVwIHRoZSBmaXRWaWRzIHBsdWdpblxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnZpZGVvKSB7IGVsLmZpdFZpZHMoKTsgfVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnByZWxvYWRJbWFnZXMgPT09ICdhbGwnIHx8IHNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgcHJlbG9hZFNlbGVjdG9yID0gc2xpZGVyLmNoaWxkcmVuOyB9XHJcbiAgICAgIC8vIG9ubHkgY2hlY2sgZm9yIGNvbnRyb2wgYWRkaXRpb24gaWYgbm90IGluIFwidGlja2VyXCIgbW9kZVxyXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcclxuICAgICAgICAvLyBpZiBjb250cm9scyBhcmUgcmVxdWVzdGVkLCBhZGQgdGhlbVxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMpIHsgYXBwZW5kQ29udHJvbHMoKTsgfVxyXG4gICAgICAgIC8vIGlmIGF1dG8gaXMgdHJ1ZSwgYW5kIGF1dG8gY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scykgeyBhcHBlbmRDb250cm9sc0F1dG8oKTsgfVxyXG4gICAgICAgIC8vIGlmIHBhZ2VyIGlzIHJlcXVlc3RlZCwgYWRkIGl0XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyBhcHBlbmRQYWdlcigpOyB9XHJcbiAgICAgICAgLy8gaWYgYW55IGNvbnRyb2wgb3B0aW9uIGlzIHJlcXVlc3RlZCwgYWRkIHRoZSBjb250cm9scyB3cmFwcGVyXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyBzbGlkZXIudmlld3BvcnQuYWZ0ZXIoc2xpZGVyLmNvbnRyb2xzLmVsKTsgfVxyXG4gICAgICAvLyBpZiB0aWNrZXIgbW9kZSwgZG8gbm90IGFsbG93IGEgcGFnZXJcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBsb2FkRWxlbWVudHMocHJlbG9hZFNlbGVjdG9yLCBzdGFydCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBsb2FkRWxlbWVudHMgPSBmdW5jdGlvbihzZWxlY3RvciwgY2FsbGJhY2spIHtcclxuICAgICAgdmFyIHRvdGFsID0gc2VsZWN0b3IuZmluZCgnaW1nOm5vdChbc3JjPVwiXCJdKSwgaWZyYW1lJykubGVuZ3RoLFxyXG4gICAgICBjb3VudCA9IDA7XHJcbiAgICAgIGlmICh0b3RhbCA9PT0gMCkge1xyXG4gICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHNlbGVjdG9yLmZpbmQoJ2ltZzpub3QoW3NyYz1cIlwiXSksIGlmcmFtZScpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgJCh0aGlzKS5vbmUoJ2xvYWQgZXJyb3InLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICgrK2NvdW50ID09PSB0b3RhbCkgeyBjYWxsYmFjaygpOyB9XHJcbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGlmICh0aGlzLmNvbXBsZXRlKSB7ICQodGhpcykudHJpZ2dlcignbG9hZCcpOyB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0YXJ0IHRoZSBzbGlkZXJcclxuICAgICAqL1xyXG4gICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGlmIGluZmluaXRlIGxvb3AsIHByZXBhcmUgYWRkaXRpb25hbCBzbGlkZXNcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT09ICdmYWRlJyAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xyXG4gICAgICAgIHZhciBzbGljZSAgICA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA6IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMsXHJcbiAgICAgICAgc2xpY2VBcHBlbmQgID0gc2xpZGVyLmNoaWxkcmVuLnNsaWNlKDAsIHNsaWNlKS5jbG9uZSh0cnVlKS5hZGRDbGFzcygnYngtY2xvbmUnKSxcclxuICAgICAgICBzbGljZVByZXBlbmQgPSBzbGlkZXIuY2hpbGRyZW4uc2xpY2UoLXNsaWNlKS5jbG9uZSh0cnVlKS5hZGRDbGFzcygnYngtY2xvbmUnKTtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHtcclxuICAgICAgICAgIHNsaWNlQXBwZW5kLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XHJcbiAgICAgICAgICBzbGljZVByZXBlbmQuYXR0cignYXJpYS1oaWRkZW4nLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWwuYXBwZW5kKHNsaWNlQXBwZW5kKS5wcmVwZW5kKHNsaWNlUHJlcGVuZCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVtb3ZlIHRoZSBsb2FkaW5nIERPTSBlbGVtZW50XHJcbiAgICAgIHNsaWRlci5sb2FkZXIucmVtb3ZlKCk7XHJcbiAgICAgIC8vIHNldCB0aGUgbGVmdCAvIHRvcCBwb3NpdGlvbiBvZiBcImVsXCJcclxuICAgICAgc2V0U2xpZGVQb3NpdGlvbigpO1xyXG4gICAgICAvLyBpZiBcInZlcnRpY2FsXCIgbW9kZSwgYWx3YXlzIHVzZSBhZGFwdGl2ZUhlaWdodCB0byBwcmV2ZW50IG9kZCBiZWhhdmlvclxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHsgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0ID0gdHJ1ZTsgfVxyXG4gICAgICAvLyBzZXQgdGhlIHZpZXdwb3J0IGhlaWdodFxyXG4gICAgICBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KGdldFZpZXdwb3J0SGVpZ2h0KCkpO1xyXG4gICAgICAvLyBtYWtlIHN1cmUgZXZlcnl0aGluZyBpcyBwb3NpdGlvbmVkIGp1c3QgcmlnaHQgKHNhbWUgYXMgYSB3aW5kb3cgcmVzaXplKVxyXG4gICAgICBlbC5yZWRyYXdTbGlkZXIoKTtcclxuICAgICAgLy8gb25TbGlkZXJMb2FkIGNhbGxiYWNrXHJcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5vblNsaWRlckxvYWQuY2FsbChlbCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XHJcbiAgICAgIC8vIHNsaWRlciBoYXMgYmVlbiBmdWxseSBpbml0aWFsaXplZFxyXG4gICAgICBzbGlkZXIuaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAvLyBiaW5kIHRoZSByZXNpemUgY2FsbCB0byB0aGUgd2luZG93XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucmVzcG9uc2l2ZSkgeyAkKHdpbmRvdykuYmluZCgncmVzaXplJywgcmVzaXplV2luZG93KTsgfVxyXG4gICAgICAvLyBpZiBhdXRvIGlzIHRydWUgYW5kIGhhcyBtb3JlIHRoYW4gMSBwYWdlLCBzdGFydCB0aGUgc2hvd1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLmF1dG9TdGFydCAmJiAoZ2V0UGFnZXJRdHkoKSA+IDEgfHwgc2xpZGVyLnNldHRpbmdzLmF1dG9TbGlkZUZvck9uZVBhZ2UpKSB7IGluaXRBdXRvKCk7IH1cclxuICAgICAgLy8gaWYgdGlja2VyIGlzIHRydWUsIHN0YXJ0IHRoZSB0aWNrZXJcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgaW5pdFRpY2tlcigpOyB9XHJcbiAgICAgIC8vIGlmIHBhZ2VyIGlzIHJlcXVlc3RlZCwgbWFrZSB0aGUgYXBwcm9wcmlhdGUgcGFnZXIgbGluayBhY3RpdmVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSk7IH1cclxuICAgICAgLy8gY2hlY2sgZm9yIGFueSB1cGRhdGVzIHRvIHRoZSBjb250cm9scyAobGlrZSBoaWRlQ29udHJvbE9uRW5kIHVwZGF0ZXMpXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMpIHsgdXBkYXRlRGlyZWN0aW9uQ29udHJvbHMoKTsgfVxyXG4gICAgICAvLyBpZiB0b3VjaEVuYWJsZWQgaXMgdHJ1ZSwgc2V0dXAgdGhlIHRvdWNoIGV2ZW50c1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnRvdWNoRW5hYmxlZCAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikgeyBpbml0VG91Y2goKTsgfVxyXG4gICAgICAvLyBpZiBrZXlib2FyZEVuYWJsZWQgaXMgdHJ1ZSwgc2V0dXAgdGhlIGtleWJvYXJkIGV2ZW50c1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLmtleWRvd24oa2V5UHJlc3MpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCBoZWlnaHQgb2YgdGhlIHZpZXdwb3J0LCB1c2VkIHRvIGRldGVybWluZSBlaXRoZXIgYWRhcHRpdmVIZWlnaHQgb3IgdGhlIG1heEhlaWdodCB2YWx1ZVxyXG4gICAgICovXHJcbiAgICB2YXIgZ2V0Vmlld3BvcnRIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGhlaWdodCA9IDA7XHJcbiAgICAgIC8vIGZpcnN0IGRldGVybWluZSB3aGljaCBjaGlsZHJlbiAoc2xpZGVzKSBzaG91bGQgYmUgdXNlZCBpbiBvdXIgaGVpZ2h0IGNhbGN1bGF0aW9uXHJcbiAgICAgIHZhciBjaGlsZHJlbiA9ICQoKTtcclxuICAgICAgLy8gaWYgbW9kZSBpcyBub3QgXCJ2ZXJ0aWNhbFwiIGFuZCBhZGFwdGl2ZUhlaWdodCBpcyBmYWxzZSwgaW5jbHVkZSBhbGwgY2hpbGRyZW5cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAndmVydGljYWwnICYmICFzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQpIHtcclxuICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBpZiBub3QgY2Fyb3VzZWwsIHJldHVybiB0aGUgc2luZ2xlIGFjdGl2ZSBjaGlsZFxyXG4gICAgICAgIGlmICghc2xpZGVyLmNhcm91c2VsKSB7XHJcbiAgICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KTtcclxuICAgICAgICAvLyBpZiBjYXJvdXNlbCwgcmV0dXJuIGEgc2xpY2Ugb2YgY2hpbGRyZW5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gZ2V0IHRoZSBpbmRpdmlkdWFsIHNsaWRlIGluZGV4XHJcbiAgICAgICAgICB2YXIgY3VycmVudEluZGV4ID0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPT09IDEgPyBzbGlkZXIuYWN0aXZlLmluZGV4IDogc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpO1xyXG4gICAgICAgICAgLy8gYWRkIHRoZSBjdXJyZW50IHNsaWRlIHRvIHRoZSBjaGlsZHJlblxyXG4gICAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4KTtcclxuICAgICAgICAgIC8vIGN5Y2xlIHRocm91Z2ggdGhlIHJlbWFpbmluZyBcInNob3dpbmdcIiBzbGlkZXNcclxuICAgICAgICAgIGZvciAoaSA9IDE7IGkgPD0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAvLyBpZiBsb29wZWQgYmFjayB0byB0aGUgc3RhcnRcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJbmRleCArIGkgPj0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uYWRkKHNsaWRlci5jaGlsZHJlbi5lcShpIC0gMSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uYWRkKHNsaWRlci5jaGlsZHJlbi5lcShjdXJyZW50SW5kZXggKyBpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgc3VtIG9mIHRoZSBoZWlnaHRzIG9mIHRoZSBjaGlsZHJlblxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICBjaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGFkZCB1c2VyLXN1cHBsaWVkIG1hcmdpbnNcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkge1xyXG4gICAgICAgICAgaGVpZ2h0ICs9IHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiAqIChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBpZiBub3QgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgbWF4IGhlaWdodCBvZiB0aGUgY2hpbGRyZW5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBoZWlnaHQgPSBNYXRoLm1heC5hcHBseShNYXRoLCBjaGlsZHJlbi5tYXAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICByZXR1cm4gJCh0aGlzKS5vdXRlckhlaWdodChmYWxzZSk7XHJcbiAgICAgICAgfSkuZ2V0KCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm94LXNpemluZycpID09PSAnYm9yZGVyLWJveCcpIHtcclxuICAgICAgICBoZWlnaHQgKz0gcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy1ib3R0b20nKSkgK1xyXG4gICAgICAgICAgICAgIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLXRvcC13aWR0aCcpKSArIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLWJvdHRvbS13aWR0aCcpKTtcclxuICAgICAgfSBlbHNlIGlmIChzbGlkZXIudmlld3BvcnQuY3NzKCdib3gtc2l6aW5nJykgPT09ICdwYWRkaW5nLWJveCcpIHtcclxuICAgICAgICBoZWlnaHQgKz0gcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLXRvcCcpKSArIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy1ib3R0b20nKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBoZWlnaHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSB1c2VkIGZvciB0aGUgb3V0ZXIgd3JhcHBlciAvIHZpZXdwb3J0XHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRWaWV3cG9ydE1heFdpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB3aWR0aCA9ICcxMDAlJztcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gMCkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICB3aWR0aCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB3aWR0aCA9IHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gd2lkdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSBhcHBsaWVkIHRvIGVhY2ggc2xpZGVcclxuICAgICAqL1xyXG4gICAgdmFyIGdldFNsaWRlV2lkdGggPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIG5ld0VsV2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCwgLy8gc3RhcnQgd2l0aCBhbnkgdXNlci1zdXBwbGllZCBzbGlkZSB3aWR0aFxyXG4gICAgICB3cmFwV2lkdGggICAgICA9IHNsaWRlci52aWV3cG9ydC53aWR0aCgpOyAgICAvLyBnZXQgdGhlIGN1cnJlbnQgdmlld3BvcnQgd2lkdGhcclxuICAgICAgLy8gaWYgc2xpZGUgd2lkdGggd2FzIG5vdCBzdXBwbGllZCwgb3IgaXMgbGFyZ2VyIHRoYW4gdGhlIHZpZXdwb3J0IHVzZSB0aGUgdmlld3BvcnQgd2lkdGhcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID09PSAwIHx8XHJcbiAgICAgICAgKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gd3JhcFdpZHRoICYmICFzbGlkZXIuY2Fyb3VzZWwpIHx8XHJcbiAgICAgICAgc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICBuZXdFbFdpZHRoID0gd3JhcFdpZHRoO1xyXG4gICAgICAvLyBpZiBjYXJvdXNlbCwgdXNlIHRoZSB0aHJlc2hvbGRzIHRvIGRldGVybWluZSB0aGUgd2lkdGhcclxuICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMSAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgaWYgKHdyYXBXaWR0aCA+IHNsaWRlci5tYXhUaHJlc2hvbGQpIHtcclxuICAgICAgICAgIHJldHVybiBuZXdFbFdpZHRoO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod3JhcFdpZHRoIDwgc2xpZGVyLm1pblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgbmV3RWxXaWR0aCA9ICh3cmFwV2lkdGggLSAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luICogKHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgLSAxKSkpIC8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcclxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5zaHJpbmtJdGVtcykge1xyXG4gICAgICAgICAgbmV3RWxXaWR0aCA9IE1hdGguZmxvb3IoKHdyYXBXaWR0aCArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikgLyAoTWF0aC5jZWlsKCh3cmFwV2lkdGggKyBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gKG5ld0VsV2lkdGggKyBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pKSkgLSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbmV3RWxXaWR0aDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2xpZGVzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydCAoaW5jbHVkZXMgcGFydGlhbGx5IHZpc2libGUgc2xpZGVzKVxyXG4gICAgICovXHJcbiAgICB2YXIgZ2V0TnVtYmVyU2xpZGVzU2hvd2luZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgc2xpZGVzU2hvd2luZyA9IDEsXHJcbiAgICAgIGNoaWxkV2lkdGggPSBudWxsO1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApIHtcclxuICAgICAgICAvLyBpZiB2aWV3cG9ydCBpcyBzbWFsbGVyIHRoYW4gbWluVGhyZXNob2xkLCByZXR1cm4gbWluU2xpZGVzXHJcbiAgICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIDwgc2xpZGVyLm1pblRocmVzaG9sZCkge1xyXG4gICAgICAgICAgc2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XHJcbiAgICAgICAgLy8gaWYgdmlld3BvcnQgaXMgbGFyZ2VyIHRoYW4gbWF4VGhyZXNob2xkLCByZXR1cm4gbWF4U2xpZGVzXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSA+IHNsaWRlci5tYXhUaHJlc2hvbGQpIHtcclxuICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzO1xyXG4gICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGJldHdlZW4gbWluIC8gbWF4IHRocmVzaG9sZHMsIGRpdmlkZSB2aWV3cG9ydCB3aWR0aCBieSBmaXJzdCBjaGlsZCB3aWR0aFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjaGlsZFdpZHRoID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkud2lkdGgoKSArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbjtcclxuICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKChzbGlkZXIudmlld3BvcnQud2lkdGgoKSArXHJcbiAgICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikgLyBjaGlsZFdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgIC8vIGlmIFwidmVydGljYWxcIiBtb2RlLCBzbGlkZXMgc2hvd2luZyB3aWxsIGFsd2F5cyBiZSBtaW5TbGlkZXNcclxuICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICAgIHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzbGlkZXNTaG93aW5nO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwYWdlcyAob25lIGZ1bGwgdmlld3BvcnQgb2Ygc2xpZGVzIGlzIG9uZSBcInBhZ2VcIilcclxuICAgICAqL1xyXG4gICAgdmFyIGdldFBhZ2VyUXR5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBwYWdlclF0eSA9IDAsXHJcbiAgICAgIGJyZWFrUG9pbnQgPSAwLFxyXG4gICAgICBjb3VudGVyID0gMDtcclxuICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyBzcGVjaWZpZWQgYnkgdGhlIHVzZXJcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID4gMCkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XHJcbiAgICAgICAgICBwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TW92ZUJ5KCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyB3aGVuIGJyZWFrcG9pbnQgZ29lcyBhYm92ZSBjaGlsZHJlbiBsZW5ndGgsIGNvdW50ZXIgaXMgdGhlIG51bWJlciBvZiBwYWdlc1xyXG4gICAgICAgICAgd2hpbGUgKGJyZWFrUG9pbnQgPCBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICsrcGFnZXJRdHk7XHJcbiAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xyXG4gICAgICAgICAgICBjb3VudGVyICs9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSA/IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDogZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKSBkaXZpZGUgY2hpbGRyZW4gbGVuZ3RoIGJ5IHNpZGVzIHNob3dpbmcsIHRoZW4gcm91bmQgdXBcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBwYWdlclF0eSA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcGFnZXJRdHk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGluZGl2aWR1YWwgc2xpZGVzIGJ5IHdoaWNoIHRvIHNoaWZ0IHRoZSBzbGlkZXJcclxuICAgICAqL1xyXG4gICAgdmFyIGdldE1vdmVCeSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBpZiBtb3ZlU2xpZGVzIHdhcyBzZXQgYnkgdGhlIHVzZXIgYW5kIG1vdmVTbGlkZXMgaXMgbGVzcyB0aGFuIG51bWJlciBvZiBzbGlkZXMgc2hvd2luZ1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPiAwICYmIHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzIDw9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSkge1xyXG4gICAgICAgIHJldHVybiBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcztcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBtb3ZlU2xpZGVzIGlzIDAgKGF1dG8pXHJcbiAgICAgIHJldHVybiBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgc2xpZGVyJ3MgKGVsKSBsZWZ0IG9yIHRvcCBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICB2YXIgc2V0U2xpZGVQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcG9zaXRpb24sIGxhc3RDaGlsZCwgbGFzdFNob3dpbmdJbmRleDtcclxuICAgICAgLy8gaWYgbGFzdCBzbGlkZSwgbm90IGluZmluaXRlIGxvb3AsIGFuZCBudW1iZXIgb2YgY2hpbGRyZW4gaXMgbGFyZ2VyIHRoYW4gc3BlY2lmaWVkIG1heFNsaWRlc1xyXG4gICAgICBpZiAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA+IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmICFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCdzIHBvc2l0aW9uXHJcbiAgICAgICAgICBsYXN0Q2hpbGQgPSBzbGlkZXIuY2hpbGRyZW4ubGFzdCgpO1xyXG4gICAgICAgICAgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTtcclxuICAgICAgICAgIC8vIHNldCB0aGUgbGVmdCBwb3NpdGlvblxyXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtKHBvc2l0aW9uLmxlZnQgLSAoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgLSBsYXN0Q2hpbGQub3V0ZXJXaWR0aCgpKSksICdyZXNldCcsIDApO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBzaG93aW5nIGluZGV4J3MgcG9zaXRpb25cclxuICAgICAgICAgIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcclxuICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKGxhc3RTaG93aW5nSW5kZXgpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIHRvcCBwb3NpdGlvblxyXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24udG9wLCAncmVzZXQnLCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIC8vIGlmIG5vdCBsYXN0IHNsaWRlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBwb3NpdGlvbiBvZiB0aGUgZmlyc3Qgc2hvd2luZyBzbGlkZVxyXG4gICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSkucG9zaXRpb24oKTtcclxuICAgICAgICAvLyBjaGVjayBmb3IgbGFzdCBzbGlkZVxyXG4gICAgICAgIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBnZXRQYWdlclF0eSgpIC0gMSkgeyBzbGlkZXIuYWN0aXZlLmxhc3QgPSB0cnVlOyB9XHJcbiAgICAgICAgLy8gc2V0IHRoZSByZXNwZWN0aXZlIHBvc2l0aW9uXHJcbiAgICAgICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLmxlZnQsICdyZXNldCcsIDApOyB9XHJcbiAgICAgICAgICBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZWwncyBhbmltYXRpbmcgcHJvcGVydHkgcG9zaXRpb24gKHdoaWNoIGluIHR1cm4gd2lsbCBzb21ldGltZXMgYW5pbWF0ZSBlbCkuXHJcbiAgICAgKiBJZiB1c2luZyBDU1MsIHNldHMgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eS4gSWYgbm90IHVzaW5nIENTUywgc2V0cyB0aGUgdG9wIC8gbGVmdCBwcm9wZXJ0eS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgKGludClcclxuICAgICAqICAtIHRoZSBhbmltYXRpbmcgcHJvcGVydHkncyB2YWx1ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0eXBlIChzdHJpbmcpICdzbGlkZScsICdyZXNldCcsICd0aWNrZXInXHJcbiAgICAgKiAgLSB0aGUgdHlwZSBvZiBpbnN0YW5jZSBmb3Igd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGR1cmF0aW9uIChpbnQpXHJcbiAgICAgKiAgLSB0aGUgYW1vdW50IG9mIHRpbWUgKGluIG1zKSB0aGUgdHJhbnNpdGlvbiBzaG91bGQgb2NjdXB5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAoYXJyYXkpIG9wdGlvbmFsXHJcbiAgICAgKiAgLSBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBhbnkgdmFyaWFibGVzIHRoYXQgbmVlZCB0byBiZSBwYXNzZWQgaW5cclxuICAgICAqL1xyXG4gICAgdmFyIHNldFBvc2l0aW9uUHJvcGVydHkgPSBmdW5jdGlvbih2YWx1ZSwgdHlwZSwgZHVyYXRpb24sIHBhcmFtcykge1xyXG4gICAgICB2YXIgYW5pbWF0ZU9iaiwgcHJvcFZhbHVlO1xyXG4gICAgICAvLyB1c2UgQ1NTIHRyYW5zZm9ybVxyXG4gICAgICBpZiAoc2xpZGVyLnVzaW5nQ1NTKSB7XHJcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSB0cmFuc2xhdGUzZCB2YWx1ZVxyXG4gICAgICAgIHByb3BWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gJ3RyYW5zbGF0ZTNkKDAsICcgKyB2YWx1ZSArICdweCwgMCknIDogJ3RyYW5zbGF0ZTNkKCcgKyB2YWx1ZSArICdweCwgMCwgMCknO1xyXG4gICAgICAgIC8vIGFkZCB0aGUgQ1NTIHRyYW5zaXRpb24tZHVyYXRpb25cclxuICAgICAgICBlbC5jc3MoJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNpdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uIC8gMTAwMCArICdzJyk7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdzbGlkZScpIHtcclxuICAgICAgICAgIC8vIHNldCB0aGUgcHJvcGVydHkgdmFsdWVcclxuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XHJcbiAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IDApIHtcclxuICAgICAgICAgICAgLy8gYmluZCBhIGNhbGxiYWNrIG1ldGhvZCAtIGV4ZWN1dGVzIHdoZW4gQ1NTIHRyYW5zaXRpb24gY29tcGxldGVzXHJcbiAgICAgICAgICAgIGVsLmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgLy9tYWtlIHN1cmUgaXQncyB0aGUgY29ycmVjdCBvbmVcclxuICAgICAgICAgICAgICBpZiAoISQoZS50YXJnZXQpLmlzKGVsKSkgeyByZXR1cm47IH1cclxuICAgICAgICAgICAgICAvLyB1bmJpbmQgdGhlIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgZWwudW5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJyk7XHJcbiAgICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2UgeyAvL2R1cmF0aW9uID0gMFxyXG4gICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3Jlc2V0Jykge1xyXG4gICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgcHJvcFZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0aWNrZXInKSB7XHJcbiAgICAgICAgICAvLyBtYWtlIHRoZSB0cmFuc2l0aW9uIHVzZSAnbGluZWFyJ1xyXG4gICAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJywgJ2xpbmVhcicpO1xyXG4gICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgcHJvcFZhbHVlKTtcclxuICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICBlbC5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgIC8vbWFrZSBzdXJlIGl0J3MgdGhlIGNvcnJlY3Qgb25lXHJcbiAgICAgICAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5pcyhlbCkpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgLy8gdW5iaW5kIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgIGVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xyXG4gICAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBwb3NpdGlvblxyXG4gICAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zLnJlc2V0VmFsdWUsICdyZXNldCcsIDApO1xyXG4gICAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBsb29wIGFnYWluXHJcbiAgICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7IC8vZHVyYXRpb24gPSAwXHJcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zLnJlc2V0VmFsdWUsICdyZXNldCcsIDApO1xyXG4gICAgICAgICAgICB0aWNrZXJMb29wKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyB1c2UgSlMgYW5pbWF0ZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFuaW1hdGVPYmogPSB7fTtcclxuICAgICAgICBhbmltYXRlT2JqW3NsaWRlci5hbmltUHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3NsaWRlJykge1xyXG4gICAgICAgICAgZWwuYW5pbWF0ZShhbmltYXRlT2JqLCBkdXJhdGlvbiwgc2xpZGVyLnNldHRpbmdzLmVhc2luZywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXNldCcpIHtcclxuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHZhbHVlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0aWNrZXInKSB7XHJcbiAgICAgICAgICBlbC5hbmltYXRlKGFuaW1hdGVPYmosIGR1cmF0aW9uLCAnbGluZWFyJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkocGFyYW1zLnJlc2V0VmFsdWUsICdyZXNldCcsIDApO1xyXG4gICAgICAgICAgICAvLyBydW4gdGhlIHJlY3Vyc2l2ZSBsb29wIGFmdGVyIGFuaW1hdGlvblxyXG4gICAgICAgICAgICB0aWNrZXJMb29wKCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQb3B1bGF0ZXMgdGhlIHBhZ2VyIHdpdGggcHJvcGVyIGFtb3VudCBvZiBwYWdlc1xyXG4gICAgICovXHJcbiAgICB2YXIgcG9wdWxhdGVQYWdlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcGFnZXJIdG1sID0gJycsXHJcbiAgICAgIGxpbmtDb250ZW50ID0gJycsXHJcbiAgICAgIHBhZ2VyUXR5ID0gZ2V0UGFnZXJRdHkoKTtcclxuICAgICAgLy8gbG9vcCB0aHJvdWdoIGVhY2ggcGFnZXIgaXRlbVxyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VyUXR5OyBpKyspIHtcclxuICAgICAgICBsaW5rQ29udGVudCA9ICcnO1xyXG4gICAgICAgIC8vIGlmIGEgYnVpbGRQYWdlciBmdW5jdGlvbiBpcyBzdXBwbGllZCwgdXNlIGl0IHRvIGdldCBwYWdlciBsaW5rIHZhbHVlLCBlbHNlIHVzZSBpbmRleCArIDFcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSB8fCBzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHtcclxuICAgICAgICAgIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSk7XHJcbiAgICAgICAgICBzbGlkZXIucGFnZXJFbC5hZGRDbGFzcygnYngtY3VzdG9tLXBhZ2VyJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxpbmtDb250ZW50ID0gaSArIDE7XHJcbiAgICAgICAgICBzbGlkZXIucGFnZXJFbC5hZGRDbGFzcygnYngtZGVmYXVsdC1wYWdlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyB2YXIgbGlua0NvbnRlbnQgPSBzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlciAmJiAkLmlzRnVuY3Rpb24oc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIpID8gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIoaSkgOiBpICsgMTtcclxuICAgICAgICAvLyBhZGQgdGhlIG1hcmt1cCB0byB0aGUgc3RyaW5nXHJcbiAgICAgICAgcGFnZXJIdG1sICs9ICc8ZGl2IGNsYXNzPVwiYngtcGFnZXItaXRlbVwiPjxhIGhyZWY9XCJcIiBkYXRhLXNsaWRlLWluZGV4PVwiJyArIGkgKyAnXCIgY2xhc3M9XCJieC1wYWdlci1saW5rXCI+JyArIGxpbmtDb250ZW50ICsgJzwvYT48L2Rpdj4nO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHBvcHVsYXRlIHRoZSBwYWdlciBlbGVtZW50IHdpdGggcGFnZXIgbGlua3NcclxuICAgICAgc2xpZGVyLnBhZ2VyRWwuaHRtbChwYWdlckh0bWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZHMgdGhlIHBhZ2VyIHRvIHRoZSBjb250cm9scyBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHZhciBhcHBlbmRQYWdlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkge1xyXG4gICAgICAgIC8vIGNyZWF0ZSB0aGUgcGFnZXIgRE9NIGVsZW1lbnRcclxuICAgICAgICBzbGlkZXIucGFnZXJFbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1wYWdlclwiIC8+Jyk7XHJcbiAgICAgICAgLy8gaWYgYSBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0IHdpdGggdGhlIHBhZ2VyXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKSB7XHJcbiAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKS5odG1sKHNsaWRlci5wYWdlckVsKTtcclxuICAgICAgICAvLyBpZiBubyBwYWdlciBzZWxlY3RvciB3YXMgc3VwcGxpZWQsIGFkZCBpdCBhZnRlciB0aGUgd3JhcHBlclxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1wYWdlcicpLmFwcGVuZChzbGlkZXIucGFnZXJFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHBvcHVsYXRlIHRoZSBwYWdlclxyXG4gICAgICAgIHBvcHVsYXRlUGFnZXIoKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZXIucGFnZXJFbCA9ICQoc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBhc3NpZ24gdGhlIHBhZ2VyIGNsaWNrIGJpbmRpbmdcclxuICAgICAgc2xpZGVyLnBhZ2VyRWwub24oJ2NsaWNrIHRvdWNoZW5kJywgJ2EnLCBjbGlja1BhZ2VyQmluZCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kcyBwcmV2IC8gbmV4dCBjb250cm9scyB0byB0aGUgY29udHJvbHMgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICB2YXIgYXBwZW5kQ29udHJvbHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQgPSAkKCc8YSBjbGFzcz1cImJ4LW5leHRcIiBocmVmPVwiXCI+JyArIHNsaWRlci5zZXR0aW5ncy5uZXh0VGV4dCArICc8L2E+Jyk7XHJcbiAgICAgIHNsaWRlci5jb250cm9scy5wcmV2ID0gJCgnPGEgY2xhc3M9XCJieC1wcmV2XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3MucHJldlRleHQgKyAnPC9hPicpO1xyXG4gICAgICAvLyBiaW5kIGNsaWNrIGFjdGlvbnMgdG8gdGhlIGNvbnRyb2xzXHJcbiAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LmJpbmQoJ2NsaWNrIHRvdWNoZW5kJywgY2xpY2tOZXh0QmluZCk7XHJcbiAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmJpbmQoJ2NsaWNrIHRvdWNoZW5kJywgY2xpY2tQcmV2QmluZCk7XHJcbiAgICAgIC8vIGlmIG5leHRTZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKSB7XHJcbiAgICAgICAgJChzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLm5leHQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIHByZXZTZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKSB7XHJcbiAgICAgICAgJChzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnByZXYpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIG5vIGN1c3RvbSBzZWxlY3RvcnMgd2VyZSBzdXBwbGllZFxyXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5uZXh0U2VsZWN0b3IgJiYgIXNsaWRlci5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpIHtcclxuICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET01cclxuICAgICAgICBzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHMtZGlyZWN0aW9uXCIgLz4nKTtcclxuICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2wgZWxlbWVudHMgdG8gdGhlIGRpcmVjdGlvbkVsXHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcclxuICAgICAgICAvLyBzbGlkZXIudmlld3BvcnQuYXBwZW5kKHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbCk7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtZGlyZWN0aW9uJykuYXBwZW5kKHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmRzIHN0YXJ0IC8gc3RvcCBhdXRvIGNvbnRyb2xzIHRvIHRoZSBjb250cm9scyBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIHZhciBhcHBlbmRDb250cm9sc0F1dG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLnN0YXJ0ID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RhcnRcIiBocmVmPVwiXCI+JyArIHNsaWRlci5zZXR0aW5ncy5zdGFydFRleHQgKyAnPC9hPjwvZGl2PicpO1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMuc3RvcCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0b3BcIiBocmVmPVwiXCI+JyArIHNsaWRlci5zZXR0aW5ncy5zdG9wVGV4dCArICc8L2E+PC9kaXY+Jyk7XHJcbiAgICAgIC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxyXG4gICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG9cIiAvPicpO1xyXG4gICAgICAvLyBiaW5kIGNsaWNrIGFjdGlvbnMgdG8gdGhlIGNvbnRyb2xzXHJcbiAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdGFydCcsIGNsaWNrU3RhcnRCaW5kKTtcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5vbignY2xpY2snLCAnLmJ4LXN0b3AnLCBjbGlja1N0b3BCaW5kKTtcclxuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSwgaW5zZXJ0IG9ubHkgdGhlIFwic3RhcnRcIiBjb250cm9sXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzQ29tYmluZSkge1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdGFydCk7XHJcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGluc2VydCBib3RoIGNvbnRyb2xzXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0YXJ0KS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnN0b3ApO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBjb250cm9sc1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc1NlbGVjdG9yKSB7XHJcbiAgICAgICAgJChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzU2VsZWN0b3IpLmh0bWwoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCk7XHJcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIG5vdCBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtY29udHJvbHMtYXV0bycpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcclxuICAgICAgfVxyXG4gICAgICAvLyB1cGRhdGUgdGhlIGF1dG8gY29udHJvbHNcclxuICAgICAgdXBkYXRlQXV0b0NvbnRyb2xzKHNsaWRlci5zZXR0aW5ncy5hdXRvU3RhcnQgPyAnc3RvcCcgOiAnc3RhcnQnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmRzIGltYWdlIGNhcHRpb25zIHRvIHRoZSBET01cclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGVuZENhcHRpb25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGN5Y2xlIHRocm91Z2ggZWFjaCBjaGlsZFxyXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgIC8vIGdldCB0aGUgaW1hZ2UgdGl0bGUgYXR0cmlidXRlXHJcbiAgICAgICAgdmFyIHRpdGxlID0gJCh0aGlzKS5maW5kKCdpbWc6Zmlyc3QnKS5hdHRyKCd0aXRsZScpO1xyXG4gICAgICAgIC8vIGFwcGVuZCB0aGUgY2FwdGlvblxyXG4gICAgICAgIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkICYmICgnJyArIHRpdGxlKS5sZW5ndGgpIHtcclxuICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYngtY2FwdGlvblwiPjxzcGFuPicgKyB0aXRsZSArICc8L3NwYW4+PC9kaXY+Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGljayBuZXh0IGJpbmRpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBjbGlja05leHRCaW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3Muc3RvcEF1dG9PbkNsaWNrKSB7IGVsLnN0b3BBdXRvKCk7IH1cclxuICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsaWNrIHByZXYgYmluZGluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIGNsaWNrUHJldkJpbmQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5lbC5oYXNDbGFzcygnZGlzYWJsZWQnKSkgeyByZXR1cm47IH1cclxuICAgICAgLy8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5zdG9wQXV0b09uQ2xpY2spIHsgZWwuc3RvcEF1dG8oKTsgfVxyXG4gICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xpY2sgc3RhcnQgYmluZGluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIGNsaWNrU3RhcnRCaW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBlbC5zdGFydEF1dG8oKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsaWNrIHN0b3AgYmluZGluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIGNsaWNrU3RvcEJpbmQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGVsLnN0b3BBdXRvKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGljayBwYWdlciBiaW5kaW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxyXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICB2YXIgY2xpY2tQYWdlckJpbmQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciBwYWdlckxpbmssIHBhZ2VySW5kZXg7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5lbC5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gICYmIHNsaWRlci5zZXR0aW5ncy5zdG9wQXV0b09uQ2xpY2spIHsgZWwuc3RvcEF1dG8oKTsgfVxyXG4gICAgICBwYWdlckxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICAgIGlmIChwYWdlckxpbmsuYXR0cignZGF0YS1zbGlkZS1pbmRleCcpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBwYWdlckluZGV4ID0gcGFyc2VJbnQocGFnZXJMaW5rLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKSk7XHJcbiAgICAgICAgLy8gaWYgY2xpY2tlZCBwYWdlciBsaW5rIGlzIG5vdCBhY3RpdmUsIGNvbnRpbnVlIHdpdGggdGhlIGdvVG9TbGlkZSBjYWxsXHJcbiAgICAgICAgaWYgKHBhZ2VySW5kZXggIT09IHNsaWRlci5hY3RpdmUuaW5kZXgpIHsgZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgpOyB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBwYWdlciBsaW5rcyB3aXRoIGFuIGFjdGl2ZSBjbGFzc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzbGlkZUluZGV4IChpbnQpXHJcbiAgICAgKiAgLSBpbmRleCBvZiBzbGlkZSB0byBtYWtlIGFjdGl2ZVxyXG4gICAgICovXHJcbiAgICB2YXIgdXBkYXRlUGFnZXJBY3RpdmUgPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XHJcbiAgICAgIC8vIGlmIFwic2hvcnRcIiBwYWdlciB0eXBlXHJcbiAgICAgIHZhciBsZW4gPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyAvLyBuYiBvZiBjaGlsZHJlblxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyVHlwZSA9PT0gJ3Nob3J0Jykge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMSkge1xyXG4gICAgICAgICAgbGVuID0gTWF0aC5jZWlsKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2xpZGVyLnBhZ2VyRWwuaHRtbCgoc2xpZGVJbmRleCArIDEpICsgc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2hvcnRTZXBhcmF0b3IgKyBsZW4pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICAvLyByZW1vdmUgYWxsIHBhZ2VyIGFjdGl2ZSBjbGFzc2VzXHJcbiAgICAgIHNsaWRlci5wYWdlckVsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIC8vIGFwcGx5IHRoZSBhY3RpdmUgY2xhc3MgZm9yIGFsbCBwYWdlcnNcclxuICAgICAgc2xpZGVyLnBhZ2VyRWwuZWFjaChmdW5jdGlvbihpLCBlbCkgeyAkKGVsKS5maW5kKCdhJykuZXEoc2xpZGVJbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOyB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtcyBuZWVkZWQgYWN0aW9ucyBhZnRlciBhIHNsaWRlIHRyYW5zaXRpb25cclxuICAgICAqL1xyXG4gICAgdmFyIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGlmIGluZmluaXRlIGxvb3AgaXMgdHJ1ZVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xyXG4gICAgICAgIHZhciBwb3NpdGlvbiA9ICcnO1xyXG4gICAgICAgIC8vIGZpcnN0IHNsaWRlXHJcbiAgICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHBvc2l0aW9uXHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgwKS5wb3NpdGlvbigpO1xyXG4gICAgICAgIC8vIGNhcm91c2VsLCBsYXN0IHNsaWRlXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBnZXRQYWdlclF0eSgpIC0gMSAmJiBzbGlkZXIuY2Fyb3VzZWwpIHtcclxuICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKChnZXRQYWdlclF0eSgpIC0gMSkgKiBnZXRNb3ZlQnkoKSkucG9zaXRpb24oKTtcclxuICAgICAgICAvLyBsYXN0IHNsaWRlXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChwb3NpdGlvbikge1xyXG4gICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHsgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24ubGVmdCwgJ3Jlc2V0JywgMCk7IH1cclxuICAgICAgICAgIGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7IH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gZGVjbGFyZSB0aGF0IHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlXHJcbiAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XHJcbiAgICAgIC8vIG9uU2xpZGVBZnRlciBjYWxsYmFja1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZUFmdGVyLmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBhdXRvIGNvbnRyb2xzIHN0YXRlIChlaXRoZXIgYWN0aXZlLCBvciBjb21iaW5lZCBzd2l0Y2gpXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN0YXRlIChzdHJpbmcpIFwic3RhcnRcIiwgXCJzdG9wXCJcclxuICAgICAqICAtIHRoZSBuZXcgc3RhdGUgb2YgdGhlIGF1dG8gc2hvd1xyXG4gICAgICovXHJcbiAgICB2YXIgdXBkYXRlQXV0b0NvbnRyb2xzID0gZnVuY3Rpb24oc3RhdGUpIHtcclxuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyB0cnVlLCByZXBsYWNlIHRoZSBjdXJyZW50IGNvbnRyb2wgd2l0aCB0aGUgbmV3IHN0YXRlXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzQ29tYmluZSkge1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuaHRtbChzbGlkZXIuY29udHJvbHNbc3RhdGVdKTtcclxuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgYXBwbHkgdGhlIFwiYWN0aXZlXCIgY2xhc3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbnRyb2xcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmZpbmQoJ2EnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5maW5kKCdhOm5vdCguYngtJyArIHN0YXRlICsgJyknKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gY29udHJvbHMgKGNoZWNrcyBpZiBlaXRoZXIgc2hvdWxkIGJlIGhpZGRlbilcclxuICAgICAqL1xyXG4gICAgdmFyIHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmIChnZXRQYWdlclF0eSgpID09PSAxKSB7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLnByZXYuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgIH0gZWxzZSBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLnNldHRpbmdzLmhpZGVDb250cm9sT25FbmQpIHtcclxuICAgICAgICAvLyBpZiBmaXJzdCBzbGlkZVxyXG4gICAgICAgIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIC8vIGlmIGxhc3Qgc2xpZGVcclxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IGdldFBhZ2VyUXR5KCkgLSAxKSB7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIC8vIGlmIGFueSBzbGlkZSBpbiB0aGUgbWlkZGxlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGF1dG8gcHJvY2Vzc1xyXG4gICAgICovXHJcbiAgICB2YXIgaW5pdEF1dG8gPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gaWYgYXV0b0RlbGF5IHdhcyBzdXBwbGllZCwgbGF1bmNoIHRoZSBhdXRvIHNob3cgdXNpbmcgYSBzZXRUaW1lb3V0KCkgY2FsbFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSA+IDApIHtcclxuICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoZWwuc3RhcnRBdXRvLCBzbGlkZXIuc2V0dGluZ3MuYXV0b0RlbGF5KTtcclxuICAgICAgLy8gaWYgYXV0b0RlbGF5IHdhcyBub3Qgc3VwcGxpZWQsIHN0YXJ0IHRoZSBhdXRvIHNob3cgbm9ybWFsbHlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbC5zdGFydEF1dG8oKTtcclxuXHJcbiAgICAgICAgLy9hZGQgZm9jdXMgYW5kIGJsdXIgZXZlbnRzIHRvIGVuc3VyZSBpdHMgcnVubmluZyBpZiB0aW1lb3V0IGdldHMgcGF1c2VkXHJcbiAgICAgICAgJCh3aW5kb3cpLmZvY3VzKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZWwuc3RhcnRBdXRvKCk7XHJcbiAgICAgICAgfSkuYmx1cihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsLnN0b3BBdXRvKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgYXV0b0hvdmVyIGlzIHJlcXVlc3RlZFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Ib3Zlcikge1xyXG4gICAgICAgIC8vIG9uIGVsIGhvdmVyXHJcbiAgICAgICAgZWwuaG92ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBpZiB0aGUgYXV0byBzaG93IGlzIGN1cnJlbnRseSBwbGF5aW5nIChoYXMgYW4gYWN0aXZlIGludGVydmFsKVxyXG4gICAgICAgICAgaWYgKHNsaWRlci5pbnRlcnZhbCkge1xyXG4gICAgICAgICAgICAvLyBzdG9wIHRoZSBhdXRvIHNob3cgYW5kIHBhc3MgdHJ1ZSBhcmd1bWVudCB3aGljaCB3aWxsIHByZXZlbnQgY29udHJvbCB1cGRhdGVcclxuICAgICAgICAgICAgZWwuc3RvcEF1dG8odHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBhdXRvUGF1c2VkIHZhbHVlIHdoaWNoIHdpbGwgYmUgdXNlZCBieSB0aGUgcmVsYXRpdmUgXCJtb3VzZW91dFwiIGV2ZW50XHJcbiAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIC8vIGlmIHRoZSBhdXRvUGF1c2VkIHZhbHVlIHdhcyBjcmVhdGVkIGJlIHRoZSBwcmlvciBcIm1vdXNlb3ZlclwiIGV2ZW50XHJcbiAgICAgICAgICBpZiAoc2xpZGVyLmF1dG9QYXVzZWQpIHtcclxuICAgICAgICAgICAgLy8gc3RhcnQgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFyZ3VtZW50IHdoaWNoIHdpbGwgcHJldmVudCBjb250cm9sIHVwZGF0ZVxyXG4gICAgICAgICAgICBlbC5zdGFydEF1dG8odHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBhdXRvUGF1c2VkIHZhbHVlXHJcbiAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gbnVsbDtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSB0aWNrZXIgcHJvY2Vzc1xyXG4gICAgICovXHJcbiAgICB2YXIgaW5pdFRpY2tlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgc3RhcnRQb3NpdGlvbiA9IDAsXHJcbiAgICAgIHBvc2l0aW9uLCB0cmFuc2Zvcm0sIHZhbHVlLCBpZHgsIHJhdGlvLCBwcm9wZXJ0eSwgbmV3U3BlZWQsIHRvdGFsRGltZW5zO1xyXG4gICAgICAvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwibmV4dFwiLCBhcHBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlclxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgIGVsLmFwcGVuZChzbGlkZXIuY2hpbGRyZW4uY2xvbmUoKS5hZGRDbGFzcygnYngtY2xvbmUnKSk7XHJcbiAgICAgIC8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgXCJwcmV2XCIsIHByZXBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlciwgYW5kIHNldCB0aGUgbGVmdCBwb3NpdGlvblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsLnByZXBlbmQoc2xpZGVyLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJykpO1xyXG4gICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKTtcclxuICAgICAgICBzdGFydFBvc2l0aW9uID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IC1wb3NpdGlvbi5sZWZ0IDogLXBvc2l0aW9uLnRvcDtcclxuICAgICAgfVxyXG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHN0YXJ0UG9zaXRpb24sICdyZXNldCcsIDApO1xyXG4gICAgICAvLyBkbyBub3QgYWxsb3cgY29udHJvbHMgaW4gdGlja2VyIG1vZGVcclxuICAgICAgc2xpZGVyLnNldHRpbmdzLnBhZ2VyID0gZmFsc2U7XHJcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5jb250cm9scyA9IGZhbHNlO1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzID0gZmFsc2U7XHJcbiAgICAgIC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50aWNrZXJIb3Zlcikge1xyXG4gICAgICAgIGlmIChzbGlkZXIudXNpbmdDU1MpIHtcclxuICAgICAgICAgIGlkeCA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyA0IDogNTtcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5ob3ZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zZm9ybScpO1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodHJhbnNmb3JtLnNwbGl0KCcsJylbaWR4XSk7XHJcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDApO1xyXG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRvdGFsRGltZW5zID0gMDtcclxuICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICB0b3RhbERpbWVucyArPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJCh0aGlzKS5vdXRlcldpZHRoKHRydWUpIDogJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8gKHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBuZXcgc3BlZWQgdG8gZmluaXNoIHRoZSBwYXVzZWQgYW5pbWF0aW9uKVxyXG4gICAgICAgICAgICByYXRpbyA9IHNsaWRlci5zZXR0aW5ncy5zcGVlZCAvIHRvdGFsRGltZW5zO1xyXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJvcGVydHkgdG8gdXNlXHJcbiAgICAgICAgICAgIHByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnO1xyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBzcGVlZFxyXG4gICAgICAgICAgICBuZXdTcGVlZCA9IHJhdGlvICogKHRvdGFsRGltZW5zIC0gKE1hdGguYWJzKHBhcnNlSW50KHZhbHVlKSkpKTtcclxuICAgICAgICAgICAgdGlja2VyTG9vcChuZXdTcGVlZCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gb24gZWwgaG92ZXJcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5ob3ZlcihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZWwuc3RvcCgpO1xyXG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgdG90YWwgd2lkdGggb2YgY2hpbGRyZW4gKHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbylcclxuICAgICAgICAgICAgdG90YWxEaW1lbnMgPSAwO1xyXG4gICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgICAgIHRvdGFsRGltZW5zICs9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAkKHRoaXMpLm91dGVyV2lkdGgodHJ1ZSkgOiAkKHRoaXMpLm91dGVySGVpZ2h0KHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbyAodXNlZCB0byBkZXRlcm1pbmUgdGhlIG5ldyBzcGVlZCB0byBmaW5pc2ggdGhlIHBhdXNlZCBhbmltYXRpb24pXHJcbiAgICAgICAgICAgIHJhdGlvID0gc2xpZGVyLnNldHRpbmdzLnNwZWVkIC8gdG90YWxEaW1lbnM7XHJcbiAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm9wZXJ0eSB0byB1c2VcclxuICAgICAgICAgICAgcHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ3RvcCc7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbmV3IHNwZWVkXHJcbiAgICAgICAgICAgIG5ld1NwZWVkID0gcmF0aW8gKiAodG90YWxEaW1lbnMgLSAoTWF0aC5hYnMocGFyc2VJbnQoZWwuY3NzKHByb3BlcnR5KSkpKSk7XHJcbiAgICAgICAgICAgIHRpY2tlckxvb3AobmV3U3BlZWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIHN0YXJ0IHRoZSB0aWNrZXIgbG9vcFxyXG4gICAgICB0aWNrZXJMb29wKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGVcclxuICAgICAqL1xyXG4gICAgdmFyIHRpY2tlckxvb3AgPSBmdW5jdGlvbihyZXN1bWVTcGVlZCkge1xyXG4gICAgICB2YXIgc3BlZWQgPSByZXN1bWVTcGVlZCA/IHJlc3VtZVNwZWVkIDogc2xpZGVyLnNldHRpbmdzLnNwZWVkLFxyXG4gICAgICBwb3NpdGlvbiA9IHtsZWZ0OiAwLCB0b3A6IDB9LFxyXG4gICAgICByZXNldCA9IHtsZWZ0OiAwLCB0b3A6IDB9LFxyXG4gICAgICBhbmltYXRlUHJvcGVydHksIHJlc2V0VmFsdWUsIHBhcmFtcztcclxuXHJcbiAgICAgIC8vIGlmIFwibmV4dFwiIGFuaW1hdGUgbGVmdCBwb3NpdGlvbiB0byBsYXN0IGNoaWxkLCB0aGVuIHJlc2V0IGxlZnQgdG8gMFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgIHBvc2l0aW9uID0gZWwuZmluZCgnLmJ4LWNsb25lJykuZmlyc3QoKS5wb3NpdGlvbigpO1xyXG4gICAgICAvLyBpZiBcInByZXZcIiBhbmltYXRlIGxlZnQgcG9zaXRpb24gdG8gMCwgdGhlbiByZXNldCBsZWZ0IHRvIGZpcnN0IG5vbi1jbG9uZSBjaGlsZFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc2V0ID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKTtcclxuICAgICAgfVxyXG4gICAgICBhbmltYXRlUHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xyXG4gICAgICByZXNldFZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IC1yZXNldC5sZWZ0IDogLXJlc2V0LnRvcDtcclxuICAgICAgcGFyYW1zID0ge3Jlc2V0VmFsdWU6IHJlc2V0VmFsdWV9O1xyXG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KGFuaW1hdGVQcm9wZXJ0eSwgJ3RpY2tlcicsIHNwZWVkLCBwYXJhbXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoZWNrIGlmIGVsIGlzIG9uIHNjcmVlblxyXG4gICAgICovXHJcbiAgICB2YXIgaXNPblNjcmVlbiA9IGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgIHZhciB3aW4gPSAkKHdpbmRvdyksXHJcbiAgICAgIHZpZXdwb3J0ID0ge1xyXG4gICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgIGxlZnQ6IHdpbi5zY3JvbGxMZWZ0KClcclxuICAgICAgfSxcclxuICAgICAgYm91bmRzID0gZWwub2Zmc2V0KCk7XHJcblxyXG4gICAgICB2aWV3cG9ydC5yaWdodCA9IHZpZXdwb3J0LmxlZnQgKyB3aW4ud2lkdGgoKTtcclxuICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xyXG4gICAgICBib3VuZHMucmlnaHQgPSBib3VuZHMubGVmdCArIGVsLm91dGVyV2lkdGgoKTtcclxuICAgICAgYm91bmRzLmJvdHRvbSA9IGJvdW5kcy50b3AgKyBlbC5vdXRlckhlaWdodCgpO1xyXG5cclxuICAgICAgcmV0dXJuICghKHZpZXdwb3J0LnJpZ2h0IDwgYm91bmRzLmxlZnQgfHwgdmlld3BvcnQubGVmdCA+IGJvdW5kcy5yaWdodCB8fCB2aWV3cG9ydC5ib3R0b20gPCBib3VuZHMudG9wIHx8IHZpZXdwb3J0LnRvcCA+IGJvdW5kcy5ib3R0b20pKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBrZXlib2FyZCBldmVudHNcclxuICAgICAqL1xyXG4gICAgdmFyIGtleVByZXNzID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgYWN0aXZlRWxlbWVudFRhZyA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICB0YWdGaWx0ZXJzID0gJ2lucHV0fHRleHRhcmVhJyxcclxuICAgICAgcCA9IG5ldyBSZWdFeHAoYWN0aXZlRWxlbWVudFRhZyxbJ2knXSksXHJcbiAgICAgIHJlc3VsdCA9IHAuZXhlYyh0YWdGaWx0ZXJzKTtcclxuXHJcbiAgICAgIGlmIChyZXN1bHQgPT0gbnVsbCAmJiBpc09uU2NyZWVuKGVsKSkge1xyXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDM5KSB7XHJcbiAgICAgICAgICBjbGlja05leHRCaW5kKGUpO1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzNykge1xyXG4gICAgICAgICAgY2xpY2tQcmV2QmluZChlKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0b3VjaCBldmVudHNcclxuICAgICAqL1xyXG4gICAgdmFyIGluaXRUb3VjaCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBpbml0aWFsaXplIG9iamVjdCB0byBjb250YWluIGFsbCB0b3VjaCB2YWx1ZXNcclxuICAgICAgc2xpZGVyLnRvdWNoID0ge1xyXG4gICAgICAgIHN0YXJ0OiB7eDogMCwgeTogMH0sXHJcbiAgICAgICAgZW5kOiB7eDogMCwgeTogMH1cclxuICAgICAgfTtcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmJpbmQoJ3RvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93bicsIG9uVG91Y2hTdGFydCk7XHJcblxyXG4gICAgICAvL2ZvciBicm93c2VycyB0aGF0IGhhdmUgaW1wbGVtZW50ZWQgcG9pbnRlciBldmVudHMgYW5kIGZpcmUgYSBjbGljayBhZnRlclxyXG4gICAgICAvL2V2ZXJ5IHBvaW50ZXJ1cCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgcG9pbnRlcnVwIGlzIG9uIHNhbWUgc2NyZWVuIGxvY2F0aW9uIGFzIHBvaW50ZXJkb3duIG9yIG5vdFxyXG4gICAgICBzbGlkZXIudmlld3BvcnQub24oJ2NsaWNrJywgJy5ieHNsaWRlciBhJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuaGFzQ2xhc3MoJ2NsaWNrLWRpc2FibGVkJykpIHtcclxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5yZW1vdmVDbGFzcygnY2xpY2stZGlzYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2hzdGFydFwiXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxyXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICB2YXIgb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAvL2Rpc2FibGUgc2xpZGVyIGNvbnRyb2xzIHdoaWxlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCBzbGlkZXMgdG8gYXZvaWQgc2xpZGVyIGZyZWV6ZSB0aGF0IGhhcHBlbnMgb24gdG91Y2ggZGV2aWNlcyB3aGVuIGEgc2xpZGUgc3dpcGUgaGFwcGVucyBpbW1lZGlhdGVseSBhZnRlciBpbnRlcmFjdGluZyB3aXRoIHNsaWRlciBjb250cm9sc1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcblxyXG4gICAgICBpZiAoc2xpZGVyLndvcmtpbmcpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIHJlY29yZCB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2hlbiB0b3VjaCBzdGFydHNcclxuICAgICAgICBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MgPSBlbC5wb3NpdGlvbigpO1xyXG4gICAgICAgIHZhciBvcmlnID0gZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICAgIHRvdWNoUG9pbnRzID0gKHR5cGVvZiBvcmlnLmNoYW5nZWRUb3VjaGVzICE9PSAndW5kZWZpbmVkJykgPyBvcmlnLmNoYW5nZWRUb3VjaGVzIDogW29yaWddO1xyXG4gICAgICAgIC8vIHJlY29yZCB0aGUgc3RhcnRpbmcgdG91Y2ggeCwgeSBjb29yZGluYXRlc1xyXG4gICAgICAgIHNsaWRlci50b3VjaC5zdGFydC54ID0gdG91Y2hQb2ludHNbMF0ucGFnZVg7XHJcbiAgICAgICAgc2xpZGVyLnRvdWNoLnN0YXJ0LnkgPSB0b3VjaFBvaW50c1swXS5wYWdlWTtcclxuXHJcbiAgICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5nZXQoMCkuc2V0UG9pbnRlckNhcHR1cmUpIHtcclxuICAgICAgICAgIHNsaWRlci5wb2ludGVySWQgPSBvcmlnLnBvaW50ZXJJZDtcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkuc2V0UG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGJpbmQgYSBcInRvdWNobW92ZVwiIGV2ZW50IHRvIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcclxuICAgICAgICAvLyBiaW5kIGEgXCJ0b3VjaGVuZFwiIGV2ZW50IHRvIHRoZSB2aWV3cG9ydFxyXG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaGVuZCBNU1BvaW50ZXJVcCBwb2ludGVydXAnLCBvblRvdWNoRW5kKTtcclxuICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgnTVNQb2ludGVyQ2FuY2VsIHBvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FuY2VsIFBvaW50ZXIgZm9yIFdpbmRvd3MgUGhvbmVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBvblBvaW50ZXJDYW5jZWwgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIC8qIG9uUG9pbnRlckNhbmNlbCBoYW5kbGVyIGlzIG5lZWRlZCB0byBkZWFsIHdpdGggc2l0dWF0aW9ucyB3aGVuIGEgdG91Y2hlbmRcclxuICAgICAgZG9lc24ndCBmaXJlIGFmdGVyIGEgdG91Y2hzdGFydCAodGhpcyBoYXBwZW5zIG9uIHdpbmRvd3MgcGhvbmVzIG9ubHkpICovXHJcbiAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLmxlZnQsICdyZXNldCcsIDApO1xyXG5cclxuICAgICAgLy9yZW1vdmUgaGFuZGxlcnNcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICBzbGlkZXIudmlld3BvcnQudW5iaW5kKCdNU1BvaW50ZXJDYW5jZWwgcG9pbnRlcmNhbmNlbCcsIG9uUG9pbnRlckNhbmNlbCk7XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ3RvdWNobW92ZSBNU1BvaW50ZXJNb3ZlIHBvaW50ZXJtb3ZlJywgb25Ub3VjaE1vdmUpO1xyXG4gICAgICBzbGlkZXIudmlld3BvcnQudW5iaW5kKCd0b3VjaGVuZCBNU1BvaW50ZXJVcCBwb2ludGVydXAnLCBvblRvdWNoRW5kKTtcclxuICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKSB7XHJcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNobW92ZVwiXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxyXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICB2YXIgb25Ub3VjaE1vdmUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciBvcmlnID0gZS5vcmlnaW5hbEV2ZW50LFxyXG4gICAgICB0b3VjaFBvaW50cyA9ICh0eXBlb2Ygb3JpZy5jaGFuZ2VkVG91Y2hlcyAhPT0gJ3VuZGVmaW5lZCcpID8gb3JpZy5jaGFuZ2VkVG91Y2hlcyA6IFtvcmlnXSxcclxuICAgICAgLy8gaWYgc2Nyb2xsaW5nIG9uIHkgYXhpcywgZG8gbm90IHByZXZlbnQgZGVmYXVsdFxyXG4gICAgICB4TW92ZW1lbnQgPSBNYXRoLmFicyh0b3VjaFBvaW50c1swXS5wYWdlWCAtIHNsaWRlci50b3VjaC5zdGFydC54KSxcclxuICAgICAgeU1vdmVtZW50ID0gTWF0aC5hYnModG91Y2hQb2ludHNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueSksXHJcbiAgICAgIHZhbHVlID0gMCxcclxuICAgICAgY2hhbmdlID0gMDtcclxuXHJcbiAgICAgIC8vIHggYXhpcyBzd2lwZVxyXG4gICAgICBpZiAoKHhNb3ZlbWVudCAqIDMpID4geU1vdmVtZW50ICYmIHNsaWRlci5zZXR0aW5ncy5wcmV2ZW50RGVmYXVsdFN3aXBlWCkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgLy8geSBheGlzIHN3aXBlXHJcbiAgICAgIH0gZWxzZSBpZiAoKHlNb3ZlbWVudCAqIDMpID4geE1vdmVtZW50ICYmIHNsaWRlci5zZXR0aW5ncy5wcmV2ZW50RGVmYXVsdFN3aXBlWSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgIT09ICdmYWRlJyAmJiBzbGlkZXIuc2V0dGluZ3Mub25lVG9PbmVUb3VjaCkge1xyXG4gICAgICAgIC8vIGlmIGhvcml6b250YWwsIGRyYWcgYWxvbmcgeCBheGlzXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgIGNoYW5nZSA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lng7XHJcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0ICsgY2hhbmdlO1xyXG4gICAgICAgIC8vIGlmIHZlcnRpY2FsLCBkcmFnIGFsb25nIHkgYXhpc1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjaGFuZ2UgPSB0b3VjaFBvaW50c1swXS5wYWdlWSAtIHNsaWRlci50b3VjaC5zdGFydC55O1xyXG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wICsgY2hhbmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAwKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2hlbmRcIlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIG9uVG91Y2hFbmQgPSBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ3RvdWNobW92ZSBNU1BvaW50ZXJNb3ZlIHBvaW50ZXJtb3ZlJywgb25Ub3VjaE1vdmUpO1xyXG4gICAgICAvL2VuYWJsZSBzbGlkZXIgY29udHJvbHMgYXMgc29vbiBhcyB1c2VyIHN0b3BzIGludGVyYWNpbmcgd2l0aCBzbGlkZXNcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB2YXIgb3JpZyAgICA9IGUub3JpZ2luYWxFdmVudCxcclxuICAgICAgdG91Y2hQb2ludHMgPSAodHlwZW9mIG9yaWcuY2hhbmdlZFRvdWNoZXMgIT09ICd1bmRlZmluZWQnKSA/IG9yaWcuY2hhbmdlZFRvdWNoZXMgOiBbb3JpZ10sXHJcbiAgICAgIHZhbHVlICAgICAgID0gMCxcclxuICAgICAgZGlzdGFuY2UgICAgPSAwO1xyXG4gICAgICAvLyByZWNvcmQgZW5kIHgsIHkgcG9zaXRpb25zXHJcbiAgICAgIHNsaWRlci50b3VjaC5lbmQueCA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYO1xyXG4gICAgICBzbGlkZXIudG91Y2guZW5kLnkgPSB0b3VjaFBvaW50c1swXS5wYWdlWTtcclxuICAgICAgLy8gaWYgZmFkZSBtb2RlLCBjaGVjayBpZiBhYnNvbHV0ZSB4IGRpc3RhbmNlIGNsZWFycyB0aGUgdGhyZXNob2xkXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2ZhZGUnKSB7XHJcbiAgICAgICAgZGlzdGFuY2UgPSBNYXRoLmFicyhzbGlkZXIudG91Y2guc3RhcnQueCAtIHNsaWRlci50b3VjaC5lbmQueCk7XHJcbiAgICAgICAgaWYgKGRpc3RhbmNlID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgaWYgKHNsaWRlci50b3VjaC5zdGFydC54ID4gc2xpZGVyLnRvdWNoLmVuZC54KSB7XHJcbiAgICAgICAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsLnN0b3BBdXRvKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBub3QgZmFkZSBtb2RlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gY2FsY3VsYXRlIGRpc3RhbmNlIGFuZCBlbCdzIGFuaW1hdGUgcHJvcGVydHlcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgZGlzdGFuY2UgPSBzbGlkZXIudG91Y2guZW5kLnggLSBzbGlkZXIudG91Y2guc3RhcnQueDtcclxuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLmxlZnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC55IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7XHJcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy50b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIG5vdCBpbmZpbml0ZSBsb29wIGFuZCBmaXJzdCAvIGxhc3Qgc2xpZGUsIGRvIG5vdCBhdHRlbXB0IGEgc2xpZGUgdHJhbnNpdGlvblxyXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiAoKHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDAgJiYgZGlzdGFuY2UgPiAwKSB8fCAoc2xpZGVyLmFjdGl2ZS5sYXN0ICYmIGRpc3RhbmNlIDwgMCkpKSB7XHJcbiAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAyMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBjaGVjayBpZiBkaXN0YW5jZSBjbGVhcnMgdGhyZXNob2xkXHJcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlzdGFuY2UpID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCkge1xyXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAwKSB7XHJcbiAgICAgICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbC5zdG9wQXV0bygpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZWwuYW5pbWF0ZShwcm9wZXJ0eSwgMjAwKTtcclxuICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMjAwKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XHJcbiAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuZ2V0KDApLnJlbGVhc2VQb2ludGVyQ2FwdHVyZSkge1xyXG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHNsaWRlci5wb2ludGVySWQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2luZG93IHJlc2l6ZSBldmVudCBjYWxsYmFja1xyXG4gICAgICovXHJcbiAgICB2YXIgcmVzaXplV2luZG93ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAvLyBkb24ndCBkbyBhbnl0aGluZyBpZiBzbGlkZXIgaXNuJ3QgaW5pdGlhbGl6ZWQuXHJcbiAgICAgIGlmICghc2xpZGVyLmluaXRpYWxpemVkKSB7IHJldHVybjsgfVxyXG4gICAgICAvLyBEZWxheSBpZiBzbGlkZXIgd29ya2luZy5cclxuICAgICAgaWYgKHNsaWRlci53b3JraW5nKSB7XHJcbiAgICAgICAgd2luZG93LnNldFRpbWVvdXQocmVzaXplV2luZG93LCAxMCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSBuZXcgd2luZG93IGRpbWVucyAoYWdhaW4sIHRoYW5rIHlvdSBJRSlcclxuICAgICAgICB2YXIgd2luZG93V2lkdGhOZXcgPSAkKHdpbmRvdykud2lkdGgoKSxcclxuICAgICAgICB3aW5kb3dIZWlnaHROZXcgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgaXQgaXMgYSB0cnVlIHdpbmRvdyByZXNpemVcclxuICAgICAgICAvLyAqd2UgbXVzdCBjaGVjayB0aGlzIGJlY2F1c2Ugb3VyIGRpbm9zYXVyIGZyaWVuZCBJRSBmaXJlcyBhIHdpbmRvdyByZXNpemUgZXZlbnQgd2hlbiBjZXJ0YWluIERPTSBlbGVtZW50c1xyXG4gICAgICAgIC8vIGFyZSByZXNpemVkLiBDYW4geW91IGp1c3QgZGllIGFscmVhZHk/KlxyXG4gICAgICAgIGlmICh3aW5kb3dXaWR0aCAhPT0gd2luZG93V2lkdGhOZXcgfHwgd2luZG93SGVpZ2h0ICE9PSB3aW5kb3dIZWlnaHROZXcpIHtcclxuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnNcclxuICAgICAgICAgIHdpbmRvd1dpZHRoID0gd2luZG93V2lkdGhOZXc7XHJcbiAgICAgICAgICB3aW5kb3dIZWlnaHQgPSB3aW5kb3dIZWlnaHROZXc7XHJcbiAgICAgICAgICAvLyB1cGRhdGUgYWxsIGR5bmFtaWMgZWxlbWVudHNcclxuICAgICAgICAgIGVsLnJlZHJhd1NsaWRlcigpO1xyXG4gICAgICAgICAgLy8gQ2FsbCB1c2VyIHJlc2l6ZSBoYW5kbGVyXHJcbiAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJSZXNpemUuY2FsbChlbCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhbiBhcmlhLWhpZGRlbj10cnVlIGF0dHJpYnV0ZSB0byBlYWNoIGVsZW1lbnRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3RhcnRWaXNpYmxlSW5kZXggKGludClcclxuICAgICAqICAtIHRoZSBmaXJzdCB2aXNpYmxlIGVsZW1lbnQncyBpbmRleFxyXG4gICAgICovXHJcbiAgICB2YXIgYXBwbHlBcmlhSGlkZGVuQXR0cmlidXRlcyA9IGZ1bmN0aW9uKHN0YXJ0VmlzaWJsZUluZGV4KSB7XHJcbiAgICAgIHZhciBudW1iZXJPZlNsaWRlc1Nob3dpbmcgPSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XHJcbiAgICAgIC8vIG9ubHkgYXBwbHkgYXR0cmlidXRlcyBpZiB0aGUgc2V0dGluZyBpcyBlbmFibGVkIGFuZCBub3QgaW4gdGlja2VyIG1vZGVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhSGlkZGVuICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XHJcbiAgICAgICAgLy8gYWRkIGFyaWEtaGlkZGVuPXRydWUgdG8gYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcclxuICAgICAgICAvLyBnZXQgdGhlIHZpc2libGUgZWxlbWVudHMgYW5kIGNoYW5nZSB0byBhcmlhLWhpZGRlbj1mYWxzZVxyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5zbGljZShzdGFydFZpc2libGVJbmRleCwgc3RhcnRWaXNpYmxlSW5kZXggKyBudW1iZXJPZlNsaWRlc1Nob3dpbmcpLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGluZGV4IGFjY29yZGluZyB0byBwcmVzZW50IHBhZ2UgcmFuZ2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2xpZGVPbmRleCAoaW50KVxyXG4gICAgICogIC0gdGhlIGRlc2lyZWQgc2xpZGUgaW5kZXhcclxuICAgICAqL1xyXG4gICAgdmFyIHNldFNsaWRlSW5kZXggPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XHJcbiAgICAgIGlmIChzbGlkZUluZGV4IDwgMCkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XHJcbiAgICAgICAgICByZXR1cm4gZ2V0UGFnZXJRdHkoKSAtIDE7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgLy93ZSBkb24ndCBnbyB0byB1bmRlZmluZWQgc2xpZGVzXHJcbiAgICAgICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgIC8vIGlmIHNsaWRlSW5kZXggaXMgZ3JlYXRlciB0aGFuIGNoaWxkcmVuIGxlbmd0aCwgc2V0IGFjdGl2ZSBpbmRleCB0byAwICh0aGlzIGhhcHBlbnMgZHVyaW5nIGluZmluaXRlIGxvb3ApXHJcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVJbmRleCA+PSBnZXRQYWdlclF0eSgpKSB7XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApIHtcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvL3dlIGRvbid0IG1vdmUgdG8gdW5kZWZpbmVkIHBhZ2VzXHJcbiAgICAgICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgIC8vIHNldCBhY3RpdmUgaW5kZXggdG8gcmVxdWVzdGVkIHNsaWRlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNsaWRlSW5kZXg7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICogPSBQVUJMSUMgRlVOQ1RJT05TXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQZXJmb3JtcyBzbGlkZSB0cmFuc2l0aW9uIHRvIHRoZSBzcGVjaWZpZWQgc2xpZGVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2xpZGVJbmRleCAoaW50KVxyXG4gICAgICogIC0gdGhlIGRlc3RpbmF0aW9uIHNsaWRlJ3MgaW5kZXggKHplcm8tYmFzZWQpXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRpcmVjdGlvbiAoc3RyaW5nKVxyXG4gICAgICogIC0gSU5URVJOQUwgVVNFIE9OTFkgLSB0aGUgZGlyZWN0aW9uIG9mIHRyYXZlbCAoXCJwcmV2XCIgLyBcIm5leHRcIilcclxuICAgICAqL1xyXG4gICAgZWwuZ29Ub1NsaWRlID0gZnVuY3Rpb24oc2xpZGVJbmRleCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIC8vIG9uU2xpZGVCZWZvcmUsIG9uU2xpZGVOZXh0LCBvblNsaWRlUHJldiBjYWxsYmFja3NcclxuICAgICAgLy8gQWxsb3cgdHJhbnNpdGlvbiBjYW5jZWxpbmcgYmFzZWQgb24gcmV0dXJuZWQgdmFsdWVcclxuICAgICAgdmFyIHBlcmZvcm1UcmFuc2l0aW9uID0gdHJ1ZSxcclxuICAgICAgbW92ZUJ5ID0gMCxcclxuICAgICAgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSxcclxuICAgICAgbGFzdENoaWxkID0gbnVsbCxcclxuICAgICAgbGFzdFNob3dpbmdJbmRleCwgZXEsIHZhbHVlLCByZXF1ZXN0RWw7XHJcbiAgICAgIC8vIHN0b3JlIHRoZSBvbGQgaW5kZXhcclxuICAgICAgc2xpZGVyLm9sZEluZGV4ID0gc2xpZGVyLmFjdGl2ZS5pbmRleDtcclxuICAgICAgLy9zZXQgbmV3IGluZGV4XHJcbiAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSBzZXRTbGlkZUluZGV4KHNsaWRlSW5kZXgpO1xyXG5cclxuICAgICAgLy8gaWYgcGx1Z2luIGlzIGN1cnJlbnRseSBpbiBtb3Rpb24sIGlnbm9yZSByZXF1ZXN0XHJcbiAgICAgIGlmIChzbGlkZXIud29ya2luZyB8fCBzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBzbGlkZXIub2xkSW5kZXgpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIGRlY2xhcmUgdGhhdCBwbHVnaW4gaXMgaW4gbW90aW9uXHJcbiAgICAgIHNsaWRlci53b3JraW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgIHBlcmZvcm1UcmFuc2l0aW9uID0gc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVCZWZvcmUuY2FsbChlbCwgc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xyXG5cclxuICAgICAgLy8gSWYgdHJhbnNpdGlvbnMgY2FuY2VsZWQsIHJlc2V0IGFuZCByZXR1cm5cclxuICAgICAgaWYgKHR5cGVvZiAocGVyZm9ybVRyYW5zaXRpb24pICE9PSAndW5kZWZpbmVkJyAmJiAhcGVyZm9ybVRyYW5zaXRpb24pIHtcclxuICAgICAgICBzbGlkZXIuYWN0aXZlLmluZGV4ID0gc2xpZGVyLm9sZEluZGV4OyAvLyByZXN0b3JlIG9sZCBpbmRleFxyXG4gICAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7IC8vIGlzIG5vdCBpbiBtb3Rpb25cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgIC8vIFByZXZlbnQgY2FuY2VsaW5nIGluIGZ1dHVyZSBmdW5jdGlvbnMgb3IgbGFjayB0aGVyZS1vZiBmcm9tIG5lZ2F0aW5nIHByZXZpb3VzIGNvbW1hbmRzIHRvIGNhbmNlbFxyXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVOZXh0LmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KSkge1xyXG4gICAgICAgICAgcGVyZm9ybVRyYW5zaXRpb24gPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncHJldicpIHtcclxuICAgICAgICAvLyBQcmV2ZW50IGNhbmNlbGluZyBpbiBmdXR1cmUgZnVuY3Rpb25zIG9yIGxhY2sgdGhlcmUtb2YgZnJvbSBuZWdhdGluZyBwcmV2aW91cyBjb21tYW5kcyB0byBjYW5jZWxcclxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5vblNsaWRlUHJldi5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCkpIHtcclxuICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjaGVjayBpZiBsYXN0IHNsaWRlXHJcbiAgICAgIHNsaWRlci5hY3RpdmUubGFzdCA9IHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSAtIDE7XHJcbiAgICAgIC8vIHVwZGF0ZSB0aGUgcGFnZXIgd2l0aCBhY3RpdmUgY2xhc3NcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlciB8fCBzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHsgdXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLmFjdGl2ZS5pbmRleCk7IH1cclxuICAgICAgLy8gLy8gY2hlY2sgZm9yIGRpcmVjdGlvbiBjb250cm9sIHVwZGF0ZVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB7IHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzKCk7IH1cclxuICAgICAgLy8gaWYgc2xpZGVyIGlzIHNldCB0byBtb2RlOiBcImZhZGVcIlxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xyXG4gICAgICAgIC8vIGlmIGFkYXB0aXZlSGVpZ2h0IGlzIHRydWUgYW5kIG5leHQgaGVpZ2h0IGlzIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgaGVpZ2h0LCBhbmltYXRlIHRvIHRoZSBuZXcgaGVpZ2h0XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT09IGdldFZpZXdwb3J0SGVpZ2h0KCkpIHtcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGZhZGUgb3V0IHRoZSB2aXNpYmxlIGNoaWxkIGFuZCByZXNldCBpdHMgei1pbmRleCB2YWx1ZVxyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5maWx0ZXIoJzp2aXNpYmxlJykuZmFkZU91dChzbGlkZXIuc2V0dGluZ3Muc3BlZWQpLmNzcyh7ekluZGV4OiAwfSk7XHJcbiAgICAgICAgLy8gZmFkZSBpbiB0aGUgbmV3bHkgcmVxdWVzdGVkIHNsaWRlXHJcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLmNzcygnekluZGV4Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4ICsgMSkuZmFkZUluKHNsaWRlci5zZXR0aW5ncy5zcGVlZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmNzcygnekluZGV4Jywgc2xpZGVyLnNldHRpbmdzLnNsaWRlWkluZGV4KTtcclxuICAgICAgICAgIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIC8vIHNsaWRlciBtb2RlIGlzIG5vdCBcImZhZGVcIlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGlmIGFkYXB0aXZlSGVpZ2h0IGlzIHRydWUgYW5kIG5leHQgaGVpZ2h0IGlzIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgaGVpZ2h0LCBhbmltYXRlIHRvIHRoZSBuZXcgaGVpZ2h0XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCAmJiBzbGlkZXIudmlld3BvcnQuaGVpZ2h0KCkgIT09IGdldFZpZXdwb3J0SGVpZ2h0KCkpIHtcclxuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIGNhcm91c2VsIGFuZCBub3QgaW5maW5pdGUgbG9vcFxyXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuY2Fyb3VzZWwgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0KSB7XHJcbiAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb25cclxuICAgICAgICAgICAgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTtcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBzbGlkZVxyXG4gICAgICAgICAgICBtb3ZlQnkgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBnZXQgbGFzdCBzaG93aW5nIGluZGV4IHBvc2l0aW9uXHJcbiAgICAgICAgICAgIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcclxuICAgICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEobGFzdFNob3dpbmdJbmRleCkucG9zaXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIC8vIGhvcml6b250YWwgY2Fyb3VzZWwsIGdvaW5nIHByZXZpb3VzIHdoaWxlIG9uIGZpcnN0IHNsaWRlIChpbmZpbml0ZUxvb3AgbW9kZSlcclxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5jYXJvdXNlbCAmJiBzbGlkZXIuYWN0aXZlLmxhc3QgJiYgZGlyZWN0aW9uID09PSAncHJldicpIHtcclxuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCBwb3NpdGlvblxyXG4gICAgICAgICAgZXEgPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA9PT0gMSA/IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSBnZXRNb3ZlQnkoKSA6ICgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpIC0gKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTtcclxuICAgICAgICAgIGxhc3RDaGlsZCA9IGVsLmNoaWxkcmVuKCcuYngtY2xvbmUnKS5lcShlcSk7XHJcbiAgICAgICAgICBwb3NpdGlvbiA9IGxhc3RDaGlsZC5wb3NpdGlvbigpO1xyXG4gICAgICAgIC8vIGlmIGluZmluaXRlIGxvb3AgYW5kIFwiTmV4dFwiIGlzIGNsaWNrZWQgb24gdGhlIGxhc3Qgc2xpZGVcclxuICAgICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ25leHQnICYmIHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjbG9uZSBwb3NpdGlvblxyXG4gICAgICAgICAgcG9zaXRpb24gPSBlbC5maW5kKCc+IC5ieC1jbG9uZScpLmVxKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICBzbGlkZXIuYWN0aXZlLmxhc3QgPSBmYWxzZTtcclxuICAgICAgICAvLyBub3JtYWwgbm9uLXplcm8gcmVxdWVzdHNcclxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgLy9wYXJzZUludCBpcyBhcHBsaWVkIHRvIGFsbG93IGZsb2F0cyBmb3Igc2xpZGVzL3BhZ2VcclxuICAgICAgICAgIHJlcXVlc3RFbCA9IHNsaWRlSW5kZXggKiBwYXJzZUludChnZXRNb3ZlQnkoKSk7XHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShyZXF1ZXN0RWwpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKiBJZiB0aGUgcG9zaXRpb24gZG9lc24ndCBleGlzdFxyXG4gICAgICAgICAqIChlLmcuIGlmIHlvdSBkZXN0cm95IHRoZSBzbGlkZXIgb24gYSBuZXh0IGNsaWNrKSxcclxuICAgICAgICAgKiBpdCBkb2Vzbid0IHRocm93IGFuIGVycm9yLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlmICh0eXBlb2YgKHBvc2l0aW9uKSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IC0ocG9zaXRpb24ubGVmdCAtIG1vdmVCeSkgOiAtcG9zaXRpb24udG9wO1xyXG4gICAgICAgICAgLy8gcGx1Z2luIHZhbHVlcyB0byBiZSBhbmltYXRlZFxyXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3NsaWRlJywgc2xpZGVyLnNldHRpbmdzLnNwZWVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhSGlkZGVuKSB7IGFwcGx5QXJpYUhpZGRlbkF0dHJpYnV0ZXMoc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpKTsgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zaXRpb25zIHRvIHRoZSBuZXh0IHNsaWRlIGluIHRoZSBzaG93XHJcbiAgICAgKi9cclxuICAgIGVsLmdvVG9OZXh0U2xpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gaWYgaW5maW5pdGVMb29wIGlzIGZhbHNlIGFuZCBsYXN0IHBhZ2UgaXMgc2hvd2luZywgZGlzcmVnYXJkIGNhbGxcclxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5hY3RpdmUubGFzdCkgeyByZXR1cm47IH1cclxuICAgICAgdmFyIHBhZ2VySW5kZXggPSBwYXJzZUludChzbGlkZXIuYWN0aXZlLmluZGV4KSArIDE7XHJcbiAgICAgIGVsLmdvVG9TbGlkZShwYWdlckluZGV4LCAnbmV4dCcpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRyYW5zaXRpb25zIHRvIHRoZSBwcmV2IHNsaWRlIGluIHRoZSBzaG93XHJcbiAgICAgKi9cclxuICAgIGVsLmdvVG9QcmV2U2xpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gaWYgaW5maW5pdGVMb29wIGlzIGZhbHNlIGFuZCBsYXN0IHBhZ2UgaXMgc2hvd2luZywgZGlzcmVnYXJkIGNhbGxcclxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHsgcmV0dXJuOyB9XHJcbiAgICAgIHZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLmFjdGl2ZS5pbmRleCkgLSAxO1xyXG4gICAgICBlbC5nb1RvU2xpZGUocGFnZXJJbmRleCwgJ3ByZXYnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydHMgdGhlIGF1dG8gc2hvd1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcmV2ZW50Q29udHJvbFVwZGF0ZSAoYm9vbGVhbilcclxuICAgICAqICAtIGlmIHRydWUsIGF1dG8gY29udHJvbHMgc3RhdGUgd2lsbCBub3QgYmUgdXBkYXRlZFxyXG4gICAgICovXHJcbiAgICBlbC5zdGFydEF1dG8gPSBmdW5jdGlvbihwcmV2ZW50Q29udHJvbFVwZGF0ZSkge1xyXG4gICAgICAvLyBpZiBhbiBpbnRlcnZhbCBhbHJlYWR5IGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcclxuICAgICAgaWYgKHNsaWRlci5pbnRlcnZhbCkgeyByZXR1cm47IH1cclxuICAgICAgLy8gY3JlYXRlIGFuIGludGVydmFsXHJcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0RpcmVjdGlvbiA9PT0gJ25leHQnKSB7XHJcbiAgICAgICAgICBlbC5nb1RvTmV4dFNsaWRlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sIHNsaWRlci5zZXR0aW5ncy5wYXVzZSk7XHJcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMgJiYgcHJldmVudENvbnRyb2xVcGRhdGUgIT09IHRydWUpIHsgdXBkYXRlQXV0b0NvbnRyb2xzKCdzdG9wJyk7IH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgYXV0byBzaG93XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByZXZlbnRDb250cm9sVXBkYXRlIChib29sZWFuKVxyXG4gICAgICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXHJcbiAgICAgKi9cclxuICAgIGVsLnN0b3BBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpIHtcclxuICAgICAgLy8gaWYgbm8gaW50ZXJ2YWwgZXhpc3RzLCBkaXNyZWdhcmQgY2FsbFxyXG4gICAgICBpZiAoIXNsaWRlci5pbnRlcnZhbCkgeyByZXR1cm47IH1cclxuICAgICAgLy8gY2xlYXIgdGhlIGludGVydmFsXHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcclxuICAgICAgc2xpZGVyLmludGVydmFsID0gbnVsbDtcclxuICAgICAgLy8gaWYgYXV0byBjb250cm9scyBhcmUgZGlzcGxheWVkIGFuZCBwcmV2ZW50Q29udHJvbFVwZGF0ZSBpcyBub3QgdHJ1ZVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyAmJiBwcmV2ZW50Q29udHJvbFVwZGF0ZSAhPT0gdHJ1ZSkgeyB1cGRhdGVBdXRvQ29udHJvbHMoJ3N0YXJ0Jyk7IH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgaW5kZXggKHplcm8tYmFzZWQpXHJcbiAgICAgKi9cclxuICAgIGVsLmdldEN1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGN1cnJlbnQgc2xpZGUgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBlbC5nZXRDdXJyZW50U2xpZGVFbGVtZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHNsaWRlIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBpbmRleCAoaW50KVxyXG4gICAgICogIC0gVGhlIGluZGV4ICh6ZXJvLWJhc2VkKSBvZiB0aGUgZWxlbWVudCB5b3Ugd2FudCByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgZWwuZ2V0U2xpZGVFbGVtZW50ID0gZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5lcShpbmRleCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBudW1iZXIgb2Ygc2xpZGVzIGluIHNob3dcclxuICAgICAqL1xyXG4gICAgZWwuZ2V0U2xpZGVDb3VudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm4gc2xpZGVyLndvcmtpbmcgdmFyaWFibGVcclxuICAgICAqL1xyXG4gICAgZWwuaXNXb3JraW5nID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiBzbGlkZXIud29ya2luZztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgYWxsIGR5bmFtaWMgc2xpZGVyIGVsZW1lbnRzXHJcbiAgICAgKi9cclxuICAgIGVsLnJlZHJhd1NsaWRlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyByZXNpemUgYWxsIGNoaWxkcmVuIGluIHJhdGlvIHRvIG5ldyBzY3JlZW4gc2l6ZVxyXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uYWRkKGVsLmZpbmQoJy5ieC1jbG9uZScpKS5vdXRlcldpZHRoKGdldFNsaWRlV2lkdGgoKSk7XHJcbiAgICAgIC8vIGFkanVzdCB0aGUgaGVpZ2h0XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC5jc3MoJ2hlaWdodCcsIGdldFZpZXdwb3J0SGVpZ2h0KCkpO1xyXG4gICAgICAvLyB1cGRhdGUgdGhlIHNsaWRlIHBvc2l0aW9uXHJcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLnRpY2tlcikgeyBzZXRTbGlkZVBvc2l0aW9uKCk7IH1cclxuICAgICAgLy8gaWYgYWN0aXZlLmxhc3Qgd2FzIHRydWUgYmVmb3JlIHRoZSBzY3JlZW4gcmVzaXplLCB3ZSB3YW50XHJcbiAgICAgIC8vIHRvIGtlZXAgaXQgbGFzdCBubyBtYXR0ZXIgd2hhdCBzY3JlZW4gc2l6ZSB3ZSBlbmQgb25cclxuICAgICAgaWYgKHNsaWRlci5hY3RpdmUubGFzdCkgeyBzbGlkZXIuYWN0aXZlLmluZGV4ID0gZ2V0UGFnZXJRdHkoKSAtIDE7IH1cclxuICAgICAgLy8gaWYgdGhlIGFjdGl2ZSBpbmRleCAocGFnZSkgbm8gbG9uZ2VyIGV4aXN0cyBkdWUgdG8gdGhlIHJlc2l6ZSwgc2ltcGx5IHNldCB0aGUgaW5kZXggYXMgbGFzdFxyXG4gICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA+PSBnZXRQYWdlclF0eSgpKSB7IHNsaWRlci5hY3RpdmUubGFzdCA9IHRydWU7IH1cclxuICAgICAgLy8gaWYgYSBwYWdlciBpcyBiZWluZyBkaXNwbGF5ZWQgYW5kIGEgY3VzdG9tIHBhZ2VyIGlzIG5vdCBiZWluZyB1c2VkLCB1cGRhdGUgaXRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlciAmJiAhc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7XHJcbiAgICAgICAgcG9wdWxhdGVQYWdlcigpO1xyXG4gICAgICAgIHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUhpZGRlbikgeyBhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSk7IH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZXN0cm95IHRoZSBjdXJyZW50IGluc3RhbmNlIG9mIHRoZSBzbGlkZXIgKHJldmVydCBldmVyeXRoaW5nIGJhY2sgdG8gb3JpZ2luYWwgc3RhdGUpXHJcbiAgICAgKi9cclxuICAgIGVsLmRlc3Ryb3lTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc2xpZGVyIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkXHJcbiAgICAgIGlmICghc2xpZGVyLmluaXRpYWxpemVkKSB7IHJldHVybjsgfVxyXG4gICAgICBzbGlkZXIuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgJCgnLmJ4LWNsb25lJywgdGhpcykucmVtb3ZlKCk7XHJcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICQodGhpcykuYXR0cignc3R5bGUnLCAkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aGlzLmF0dHIoJ3N0eWxlJywgJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xyXG4gICAgICB9XHJcbiAgICAgICQodGhpcykudW53cmFwKCkudW53cmFwKCk7XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwpIHsgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZSgpOyB9XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMubmV4dCkgeyBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmUoKTsgfVxyXG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLnByZXYpIHsgc2xpZGVyLmNvbnRyb2xzLnByZXYucmVtb3ZlKCk7IH1cclxuICAgICAgaWYgKHNsaWRlci5wYWdlckVsICYmIHNsaWRlci5zZXR0aW5ncy5jb250cm9scyAmJiAhc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7IHNsaWRlci5wYWdlckVsLnJlbW92ZSgpOyB9XHJcbiAgICAgICQoJy5ieC1jYXB0aW9uJywgdGhpcykucmVtb3ZlKCk7XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuYXV0b0VsKSB7IHNsaWRlci5jb250cm9scy5hdXRvRWwucmVtb3ZlKCk7IH1cclxuICAgICAgY2xlYXJJbnRlcnZhbChzbGlkZXIuaW50ZXJ2YWwpO1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnJlc3BvbnNpdmUpIHsgJCh3aW5kb3cpLnVuYmluZCgncmVzaXplJywgcmVzaXplV2luZG93KTsgfVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCkgeyAkKGRvY3VtZW50KS51bmJpbmQoJ2tleWRvd24nLCBrZXlQcmVzcyk7IH1cclxuICAgICAgLy9yZW1vdmUgc2VsZiByZWZlcmVuY2UgaW4gZGF0YVxyXG4gICAgICAkKHRoaXMpLnJlbW92ZURhdGEoJ2J4U2xpZGVyJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVsb2FkIHRoZSBzbGlkZXIgKHJldmVydCBhbGwgRE9NIGNoYW5nZXMsIGFuZCByZS1pbml0aWFsaXplKVxyXG4gICAgICovXHJcbiAgICBlbC5yZWxvYWRTbGlkZXIgPSBmdW5jdGlvbihzZXR0aW5ncykge1xyXG4gICAgICBpZiAoc2V0dGluZ3MgIT09IHVuZGVmaW5lZCkgeyBvcHRpb25zID0gc2V0dGluZ3M7IH1cclxuICAgICAgZWwuZGVzdHJveVNsaWRlcigpO1xyXG4gICAgICBpbml0KCk7XHJcbiAgICAgIC8vc3RvcmUgcmVmZXJlbmNlIHRvIHNlbGYgaW4gb3JkZXIgdG8gYWNjZXNzIHB1YmxpYyBmdW5jdGlvbnMgbGF0ZXJcclxuICAgICAgJChlbCkuZGF0YSgnYnhTbGlkZXInLCB0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgaW5pdCgpO1xyXG5cclxuICAgICQoZWwpLmRhdGEoJ2J4U2xpZGVyJywgdGhpcyk7XHJcblxyXG4gICAgLy8gcmV0dXJucyB0aGUgY3VycmVudCBqUXVlcnkgb2JqZWN0XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcbmZ1bmN0aW9uIGhhc1RvdWNoKCkge1xyXG4gICAgcmV0dXJuICdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudFxyXG4gICAgICAgICAgIHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDBcclxuICAgICAgICAgICB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XHJcbn1cclxuXHJcbmlmIChoYXNUb3VjaCgpKSB7IC8vIHJlbW92ZSBhbGwgOmhvdmVyIHN0eWxlc2hlZXRzXHJcbiAgICB0cnkgeyAvLyBwcmV2ZW50IGV4Y2VwdGlvbiBvbiBicm93c2VycyBub3Qgc3VwcG9ydGluZyBET00gc3R5bGVTaGVldHMgcHJvcGVybHlcclxuICAgICAgICBmb3IgKHZhciBzaSBpbiBkb2N1bWVudC5zdHlsZVNoZWV0cykge1xyXG4gICAgICAgICAgICB2YXIgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW3NpXTtcclxuICAgICAgICAgICAgaWYgKCFzdHlsZVNoZWV0LnJ1bGVzKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIHJpID0gc3R5bGVTaGVldC5ydWxlcy5sZW5ndGggLSAxOyByaSA+PSAwOyByaS0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0eWxlU2hlZXQucnVsZXNbcmldLnNlbGVjdG9yVGV4dCkgY29udGludWU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlU2hlZXQucnVsZXNbcmldLnNlbGVjdG9yVGV4dC5tYXRjaCgnOmhvdmVyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LmRlbGV0ZVJ1bGUocmkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXgpIHt9XHJcbn1cclxuXHJcbiQoZnVuY3Rpb24oKSB7XHJcblxyXG5cdHZhciAkc2lkZWJhciA9ICQoJy5zaWRlYmFyJyk7XHJcblx0dmFyICRuYXZiYXIgPSAkKCcubmF2YmFyX19saW5rcycpO1xyXG4gIHZhciAkbmF2YmFyQ29udGFpbmVyID0gJCgnLm5hdmJhcicpXHJcblx0dmFyICRidXJnZXIgPSAkKCcjYnVyZ2VyJyk7XHJcblx0dmFyICRsaW5rSXRlbSA9ICQoJy5saW5rc19faXRlbScpO1xyXG4gIHZhciAkc2lkZWJhcmxheW91dCA9ICQoJy5zaWRlYmFybGF5b3V0Jyk7XHJcblxyXG5cclxuXHQkc2lkZWJhci5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCRuYXZiYXIudG9nZ2xlQ2xhc3MoJy0tdmlzaWJsZScpO1xyXG5cdFx0JHNpZGViYXIudG9nZ2xlQ2xhc3MoJy0tb24nKTtcclxuXHRcdCRidXJnZXIudG9nZ2xlQ2xhc3MoJ2Nsb3NlJykudG9nZ2xlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gIH0pO1xyXG4gICRuYXZiYXJDb250YWluZXIuc2libGluZ3MoKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICRuYXZiYXIucmVtb3ZlQ2xhc3MoJy0tdmlzaWJsZScpO1xyXG4gICAgJHNpZGViYXIucmVtb3ZlQ2xhc3MoJy0tb24nKTtcclxuICAgICRidXJnZXIuYWRkQ2xhc3MoJ2Nsb3NlJykucmVtb3ZlQ2xhc3MoJ29wZW5lZCcpO1xyXG4gIH0pO1xyXG5cclxuXHJcblxyXG5cdC8vIHBvcC11cFxyXG5cclxuXHR2YXIgJHdoaXRlUGFwcGVyID0gJCgnI3Nob3ctcG9wLXVwJyk7XHJcbiAgdmFyICR3aGl0ZVBhcHBlckJ0biA9ICQoJy53cGJ0bi1mb290ZXInKTtcclxuXHR2YXIgJG92ZXJsYXkgPSAkKCcuY292ZXInKTtcclxuICB2YXIgJGNsb3NlQnRuID0gJCgnLmNsb3NlLWJ1dHRvbicpO1xyXG5cdHZhciAkcG9wVXBXaGl0ZXBhcHBlciA9ICQoJy53aGl0ZXBhcHBlcicpO1xyXG4gIHZhciAkZmVlZGJhY2sgPSAkKCcjc2hvdy1mZWVkYmFjaycpO1xyXG4gIHZhciAkcG9wVXBGZWVkYmFjayA9ICQoJy5mZWVkYmFjay13cmFwJyk7XHJcbiAgdmFyICRjbG9zZVNwYWNlID0gJCgnLnNwYWNlLWNsb3NlJyk7XHJcbiAgdmFyICRxcldlQ2hhdCA9ICQoJyNxci13ZWNoYXQnKTtcclxuICB2YXIgJGxpbmtXZUNoYXQgPSAkKCcjbGluay13ZWNoYXQnKTtcclxuICB2YXIgJGZlZWRiYWNrTGlua3MgPSAkKCcuZmVlZGJhY2staWNvJyk7XHJcblxyXG4gICRxcldlQ2hhdC5oaWRlKCkuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkcXJXZUNoYXQuZmFkZVRvZ2dsZSg2MDApO1xyXG4gICAgJGZlZWRiYWNrTGlua3MuZGVsYXkoNjAwKS5mYWRlVG9nZ2xlKDQwMCk7XHJcbiAgfSk7XHJcbiAgJGxpbmtXZUNoYXQuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJHFyV2VDaGF0LmRlbGF5KDQwMCkuZmFkZVRvZ2dsZSg2MDApO1xyXG4gICAgJGZlZWRiYWNrTGlua3MuZmFkZVRvZ2dsZSg0MDApO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgJGZlZWRiYWNrLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICRwb3BVcEZlZWRiYWNrLmZhZGVUb2dnbGUoJzQwMCcpO1xyXG4gICAgJGZlZWRiYWNrLnRvZ2dsZUNsYXNzKCd3aGl0ZScpO1xyXG4gICAgJGNsb3NlU3BhY2UudG9nZ2xlKDQwMCk7XHJcbiAgfSk7XHJcblxyXG5cclxuICAkY2xvc2VTcGFjZS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICRwb3BVcEZlZWRiYWNrLmZhZGVPdXQoNDAwKTtcclxuICAgICRmZWVkYmFjay5yZW1vdmVDbGFzcygnd2hpdGUnKTtcclxuICAgICRjbG9zZVNwYWNlLmhpZGUoKTtcclxuICB9KTtcclxuXHJcblxyXG5cclxuICAkd2hpdGVQYXBwZXIuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkb3ZlcmxheS5mYWRlSW4oNDAwKTtcclxuICAgICRwb3BVcFdoaXRlcGFwcGVyLmZhZGVJbig0MDApO1xyXG4gIH0pO1xyXG5cclxuICAkd2hpdGVQYXBwZXJCdG4uY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkb3ZlcmxheS5mYWRlSW4oNDAwKTtcclxuICAgICRwb3BVcFdoaXRlcGFwcGVyLmZhZGVJbig0MDApO1xyXG4gIH0pO1xyXG5cclxuXHJcblx0JGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0JG92ZXJsYXkuZmFkZU91dCg0MDApO1xyXG5cdFx0JHBvcFVwV2hpdGVwYXBwZXIuZmFkZU91dCg0MDApO1xyXG5cdH0pO1xyXG5cdCRvdmVybGF5LmNsaWNrKGZ1bmN0aW9uKCkge1xyXG5cdFx0JG92ZXJsYXkuZmFkZU91dCg0MDApO1xyXG5cdFx0JHBvcFVwV2hpdGVwYXBwZXIuZmFkZU91dCg0MDApO1xyXG5cdH0pO1xyXG5cclxuXHJcblx0XHRcclxuXHQvLyBSb2FkbWFwXHJcblxyXG5cclxuXHJcblx0dmFyICRoZXhhZ29uZSA9ICQoJy5oZXhvZ29uJyk7XHJcblx0dmFyICRsaW5lQ29ubmVjdCA9ICQoJy5saW5lJyk7XHJcblx0dmFyICR0ZXh0UG9pbnRzID0gJCgnZy50ZXh0Jyk7XHJcblxyXG5cdHZhciAkcm9hZG1hcCA9ICQoJy5yb2FkbWFwJyk7XHJcblxyXG5cdCRsaW5lQ29ubmVjdC5oaWRlKCk7XHJcblx0JHRleHRQb2ludHMuaGlkZSgpO1xyXG5cdCRoZXhhZ29uZS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCRyb2FkbWFwLmFkZENsYXNzKCdzdGVwMScpO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdCRyb2FkbWFwLmFkZENsYXNzKCdzdGVwMicpO1xyXG5cdFx0fSwgMTIwMCk7XHJcblx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0JGxpbmVDb25uZWN0LmZhZGVJbignMTAwMCcpO1xyXG5cdFx0XHQkdGV4dFBvaW50cy5kZWxheSgxMDAwKS5mYWRlSW4oJzQwMCcpO1xyXG5cdFx0fSwyMDAwKVxyXG5cdH0pO1xyXG5cclxuIC8vIExhbmd1YWdlIHN3aXRjaFxyXG5cclxuICB2YXIgJGxhbmdJdGVtID0gJCgnYS5sYW5nJylcclxuICB2YXIgJGVuZyA9ICQoJyNsYW5nLXVzJyk7XHJcbiAgdmFyICRjbiA9ICQoJyNsYW5nLWNuJyk7XHJcbiAgdmFyICRpbmQgPSAkKCcjbGFuZy1pbicpO1xyXG5cclxuICB2YXIgJGxhbmdCdG4gPSAkKCcubGFuZ3N3aXRjaC13cmFwJyk7XHJcbiAgdmFyICRsYW5nU3dpdGNoID0gJCgnLmxhbmdzd2l0Y2gnKTtcclxuICB2YXIgJGxhbmdTd2l0Y2hDYXJ1c2VsID0gJCgnLmxhbmdzd2l0Y2gtY2FydXNlbCcpO1xyXG5cclxuICAkbGFuZ0J0bi5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICRsYW5nU3dpdGNoLnRvZ2dsZSg0MDApO1xyXG4gICAgJCgnLmxpbmtzX19pdGVtJykudG9nZ2xlQ2xhc3MoJ2hpZGVkJyk7XHJcbiAgfSk7XHJcblxyXG4gICRsYW5nU3dpdGNoQ2FydXNlbC5ieFNsaWRlcih7XHJcbiAgICBhdXRvOiB0cnVlLFxyXG4gICAgY29udHJvbHM6IGZhbHNlLFxyXG4gICAgcGF1c2U6IDIwMDAsXHJcbiAgICBwYWdlcjogZmFsc2UsXHJcbiAgICB0b3VjaEVuYWJsZWQ6IGZhbHNlXHJcbiAgfSlcclxuXHJcblxyXG5cclxuIC8vIHZpZGVvIHBvcC11cFxyXG5cclxuXHJcbiAgdmFyICRwb3BVcFZpZGVvQ29udGFpbmVyID0gJChcIi5wb3AtdXAtdmlkZW9cIik7XHJcbiAgdmFyICRwb3BVcFZpZGVvQnRuID0gJCgnI3BsYXktdmlkZW8tZW5nLWJ0bicpO1xyXG4gIHZhciAkcG9wVXBWaWRlb0NuQnRuID0gJCgnI3BsYXktdmlkZW8tY24tYnRuJyk7XHJcblxyXG5cclxuICAkcG9wVXBWaWRlb0J0bi5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgJHBvcFVwVmlkZW9Db250YWluZXIuYXBwZW5kKCc8aWZyYW1lIGlkPVwidmlkZW9cIiBzcmM9XCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9wMVlpREtsU2U4az9yZWw9MCZhdXRvcGxheT0xXCIgZnJhbWVib3JkZXI9XCIwXCIgd2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4+PC9pZnJhbWU+Jyk7XHJcbiAgICAgICRwb3BVcFZpZGVvQ29udGFpbmVyLmZhZGVJbig3MDApO1xyXG4gIH0pO1xyXG5cclxuICAkcG9wVXBWaWRlb0NuQnRuLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5hcHBlbmQoJzx2aWRlbyBpZD1cInZpZGVvXCIgY29udHJvbHMgYXV0b3BsYXk+PHNvdXJjZSBzcmM9XCJodHRwOi8vb25wbGFjZS5pby9pbWcvdmlkZW8vb25wbGFjZS1jaGluYS1zdWJ0aXRsZS5tcDRcIiB0eXBlPVwidmlkZW8vbXA0XCIvPjwvdmlkZW8+Jyk7XHJcbiAgICAgICRwb3BVcFZpZGVvQ29udGFpbmVyLmZhZGVJbig3MDApO1xyXG4gIH0pXHJcblxyXG4gICQoJy5jbG9zZS1idXR0b24tdmlkZW8nKS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgJHZpZGVvID0gJCgnI3ZpZGVvJyk7XHJcbiAgICB2YXIgJHZpZGVvU2NyZWVuID0gJCgnI3ZpZGVvLXBvcC11cCcpO1xyXG4gICAgXHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5oaWRlKDcwMCk7XHJcbiAgICAkdmlkZW9TY3JlZW4ucmVtb3ZlKCk7XHJcbiAgICAkdmlkZW8ucmVtb3ZlKCk7XHJcblxyXG4gIH0pO1xyXG5cclxuICAkKCcucGFydG5lcnMtY2Fyb3VzZWwnKS5ieFNsaWRlcih7XHJcbiAgICBhdXRvOiB0cnVlLFxyXG4gICAgY29udHJvbHM6IGZhbHNlLFxyXG4gICAgcGF1c2U6IDMwMDAsXHJcbiAgICBwYWdlcjogZmFsc2VcclxuICB9KVxyXG5cclxuICAvLyBtYWluIHRlYW0gcGFnZSBcclxuXHJcbiAgdmFyIHBpY3R1cmVzID0geyAgXHJcbiAgICBFbXB0eTogJCgnI3BpY3R1cmUtZW1wdHknKSxcclxuICAgIEVkd2FyZDogJCgnI3BpY3R1cmUtRWR3YXJkJyksXHJcbiAgICBBbmRyZWk6ICQoJyNwaWN0dXJlLUFuZHJlaScpLFxyXG4gICAgRG1pdHJpeTogJCgnI3BpY3R1cmUtRG1pdHJpeScpLFxyXG4gICAgSWx5YTogJCgnI3BpY3R1cmUtSWx5YScpLFxyXG4gICAgTWlrZTogJCgnI3BpY3R1cmUtTWlrZScpLFxyXG4gICAgT2xlZzogJCgnI3BpY3R1cmUtT2xlZycpLFxyXG4gICAgTWljaGFlbDogJCgnI3BpY3R1cmUtTWljaGFlbCcpLFxyXG4gICAgRXVnZW5lOiAkKCcjcGljdHVyZS1FdWdlbmUnKSxcclxuICAgIFJ1c2xhbjogJCgnI3BpY3R1cmUtUnVzbGFuJyksXHJcbiAgICBWbGFkaW1pcjogJCgnI3BpY3R1cmUtVmxhZGltaXInKVxyXG4gIH1cclxuXHJcbiAgdmFyIGRlc2NyaXB0aW9uID0ge1xyXG4gICAgdGVhbTogJCgnI3RlYW0tZGVzY3JpcHRpb24nKSxcclxuICAgIEVkd2FyZDogJCgnI0Vkd2FyZC1kZXNjcmlwdGlvbicpLFxyXG4gICAgQW5kcmVpOiAkKCcjQW5kcmVpLWRlc2NyaXB0aW9uJyksXHJcbiAgICBEbWl0cml5OiAkKCcjRG1pdHJpeS1kZXNjcmlwdGlvbicpLFxyXG4gICAgSWx5YTogJCgnI0lseWEtZGVzY3JpcHRpb24nKSxcclxuICAgIE1pa2U6ICQoJyNNaWtlLWRlc2NyaXB0aW9uJyksXHJcbiAgICBPbGVnOiAkKCcjT2xlZy1kZXNjcmlwdGlvbicpLFxyXG4gICAgTWljaGFlbDogJCgnI01pY2hhZWwtZGVzY3JpcHRpb24nKSxcclxuICAgIEV1Z2VuZTogJCgnI0V1Z2VuZS1kZXNjcmlwdGlvbicpLFxyXG4gICAgUnVzbGFuOiAkKCcjUnVzbGFuLWRlc2NyaXB0aW9uJyksXHJcbiAgICBWbGFkaW1pcjogJCgnI1ZsYWRpbWlyLWRlc2NyaXB0aW9uJylcclxuICB9XHJcblxyXG4gIHZhciBiYWNrZ3JvdW5kcyA9IHtcclxuICAgIHRvdGFsOiAkKCcuYmFja2dyb3VuZHMtaXRlbScpLFxyXG4gICAgRWR3YXJkOiAkKCcjRWR3YXJkLWJhY2tncm91bmQnKSxcclxuICAgIEFuZHJlaTogJCgnI0FuZHJlaS1iYWNrZ3JvdW5kJyksXHJcbiAgICBNaWtlOiAkKCcjTWlrZS1iYWNrZ3JvdW5kJyksXHJcbiAgICBEbWl0cml5OiAkKCcjRG1pdHJpeS1iYWNrZ3JvdW5kJyksXHJcbiAgICBJbHlhOiAkKCcjSWx5YS1iYWNrZ3JvdW5kJyksXHJcbiAgICBPbGVnOiAkKCcjT2xlZy1iYWNrZ3JvdW5kJyksXHJcbiAgICBNaWNoYWVsOiAkKCcjTWljaGFlbC1iYWNrZ3JvdW5kJyksXHJcbiAgICBFdWdlbmU6ICQoJyNFdWdlbmUtYmFja2dyb3VuZCcpLFxyXG4gICAgUnVzbGFuOiAkKCcjUnVzbGFuLWJhY2tncm91bmQnKSxcclxuICAgIFZsYWRpbWlyOiAkKCcjVmxhZGltaXItYmFja2dyb3VuZCcpXHJcbiAgfVxyXG5cclxuICB2YXIgaGV4b2xpbmtzID0gJCgnLm1lbWJlci1waWN0dXJlJyk7XHJcbiAgdmFyIGJsdWVoZXhlcyA9ICQoJy5ibHVlX3BvbHlnb25zJyk7XHJcbiAgdmFyIHRlYW1TZWN0aW9uID0gJCgnLnRlYW0nKTtcclxuXHJcbiAgZGVzY3JpcHRpb24udGVhbS5zaG93KCk7XHJcblxyXG4gIGhleG9saW5rcy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICBibHVlaGV4ZXMuZmFkZU91dCg4MDApO1xyXG4gICAgdGVhbVNlY3Rpb24uYWRkQ2xhc3MoJ3doaXRlJyk7XHJcblxyXG4gIH0pO1xyXG5cclxuICBwaWN0dXJlcy5FbXB0eS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy50b3RhbC5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi50ZWFtLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApXHJcbiAgICBibHVlaGV4ZXMuZmFkZUluKDgwMCk7XHJcbiAgICB0ZWFtU2VjdGlvbi5yZW1vdmVDbGFzcygnd2hpdGUnKVxyXG4gIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNoYW5nZUJnKGEpIHtcclxuICAgICAgYmFja2dyb3VuZHMuYS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgICAgZGVzY3JpcHRpb24uYS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIH1cclxuXHJcbiAgcGljdHVyZXMuQW5kcmVpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGJhY2tncm91bmRzLkFuZHJlaS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLkFuZHJlaS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5FZHdhcmQuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuRWR3YXJkLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uRWR3YXJkLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIHBpY3R1cmVzLkRtaXRyaXkuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuRG1pdHJpeS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLkRtaXRyaXkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuSWx5YS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5JbHlhLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uSWx5YS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5NaWtlLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGJhY2tncm91bmRzLk1pa2UuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5NaWtlLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIHBpY3R1cmVzLk9sZWcuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuT2xlZy5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLk9sZWcuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuTWljaGFlbC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5NaWNoYWVsLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uTWljaGFlbC5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5FdWdlbmUuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuRXVnZW5lLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uRXVnZW5lLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIHBpY3R1cmVzLlJ1c2xhbi5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5SdXNsYW4uZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5SdXNsYW4uZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuVmxhZGltaXIuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuVmxhZGltaXIuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5WbGFkaW1pci5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBcclxuXHJcbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgYmFja2dyb3VuZHMudG90YWwuY3NzKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDBweCwgLScgKyBzdC8zICsncHgpJ30pO1xyXG4gIH0pO1xyXG4gICAgICBcclxufSk7Il19
