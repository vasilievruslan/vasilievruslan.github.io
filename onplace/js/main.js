function hasTouch(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}if(function(e){var t={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};e.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(n)}),this;var s={},o=this,a=e(window).width(),r=e(window).height();if(!e(o).data("bxSlider")){var l=function(){e(o).data("bxSlider")||(s.settings=e.extend({},t,n),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"===s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!==s.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<t.length;i++)if(void 0!==e.style[t[i]])return s.cssPrefix=t[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"===s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),d())},d=function(){var t=s.children.eq(s.settings.startSlide);o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.settings.ariaLive&&!s.settings.ticker&&s.viewport.attr("aria-live","polite"),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"===s.settings.mode?1e3*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:p()}),s.children.css({"float":"horizontal"===s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",h()),"horizontal"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"===s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&$(),s.active.last=s.settings.startSlide===v()-1,s.settings.video&&o.fitVids(),("all"===s.settings.preloadImages||s.settings.ticker)&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.controls&&k(),s.settings.auto&&s.settings.autoControls&&C(),s.settings.pager&&w(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(t,g)},c=function(t,i){var n=t.find('img:not([src=""]), iframe').length,s=0;return 0===n?void i():void t.find('img:not([src=""]), iframe').each(function(){e(this).one("load error",function(){++s===n&&i()}).each(function(){this.complete&&e(this).trigger("load")})})},g=function(){if(s.settings.infiniteLoop&&"fade"!==s.settings.mode&&!s.settings.ticker){var t="vertical"===s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,t).clone(!0).addClass("bx-clone"),n=s.children.slice(-t).clone(!0).addClass("bx-clone");s.settings.ariaHidden&&(i.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),o.append(i).prepend(n)}s.loader.remove(),x(),"vertical"===s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(u()),o.redrawSlider(),s.settings.onSliderLoad.call(o,s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",_),s.settings.auto&&s.settings.autoStart&&(v()>1||s.settings.autoSlideForOnePage)&&A(),s.settings.ticker&&q(),s.settings.pager&&P(s.settings.startSlide),s.settings.controls&&z(),s.settings.touchEnabled&&!s.settings.ticker&&L(),s.settings.keyboardEnabled&&!s.settings.ticker&&e(document).keydown(W)},u=function(){var t=0,n=e();if("vertical"===s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1===s.settings.moveSlides?s.active.index:s.active.index*m();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"===s.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"===s.viewport.css("box-sizing")?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"===s.viewport.css("box-sizing")&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},p=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"===s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},h=function(){var e=s.settings.slideWidth,t=s.viewport.width();if(0===s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"===s.settings.mode)e=t;else if(s.settings.maxSlides>1&&"horizontal"===s.settings.mode){if(t>s.maxThreshold)return e;t<s.minThreshold?e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides:s.settings.shrinkItems&&(e=Math.floor((t+s.settings.slideMargin)/Math.ceil((t+s.settings.slideMargin)/(e+s.settings.slideMargin))-s.settings.slideMargin))}return e},f=function(){var e=1,t=null;return"horizontal"===s.settings.mode&&s.settings.slideWidth>0?s.viewport.width()<s.minThreshold?e=s.settings.minSlides:s.viewport.width()>s.maxThreshold?e=s.settings.maxSlides:(t=s.children.first().width()+s.settings.slideMargin,e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)):"vertical"===s.settings.mode&&(e=s.settings.minSlides),e},v=function(){var e=0,t=0,i=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/m());else for(;t<s.children.length;)++e,t=i+f(),i+=s.settings.moveSlides<=f()?s.settings.moveSlides:f();else e=Math.ceil(s.children.length/f());return e},m=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=f()?s.settings.moveSlides:f()},x=function(){var e,t,i;s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop?"horizontal"===s.settings.mode?(t=s.children.last(),e=t.position(),b(-(e.left-(s.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===s.settings.mode&&(i=s.children.length-s.settings.minSlides,e=s.children.eq(i).position(),b(-e.top,"reset",0)):(e=s.children.eq(s.active.index*m()).position(),s.active.index===v()-1&&(s.active.last=!0),void 0!==e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0)))},b=function(t,i,n,a){var r,l;s.usingCSS?(l="vertical"===s.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),O())}):O()):"reset"===i?o.css(s.animProp,l):"ticker"===i&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(a.resetValue,"reset",0),V())}):(b(a.resetValue,"reset",0),V()))):(r={},r[s.animProp]=t,"slide"===i?o.animate(r,n,s.settings.easing,function(){O()}):"reset"===i?o.css(s.animProp,t):"ticker"===i&&o.animate(r,n,"linear",function(){b(a.resetValue,"reset",0),V()}))},S=function(){for(var t="",i="",n=v(),o=0;o<n;o++)i="",s.settings.buildPager&&e.isFunction(s.settings.buildPager)||s.settings.pagerCustom?(i=s.settings.buildPager(o),s.pagerEl.addClass("bx-custom-pager")):(i=o+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+o+'" class="bx-pager-link">'+i+"</a></div>";s.pagerEl.html(t)},w=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),S()),s.pagerEl.on("click touchend","a",M)},k=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click touchend",y),s.controls.prev.bind("click touchend",E),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},C=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",I),s.controls.autoEl.on("click",".bx-stop",T),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),D(s.settings.autoStart?"stop":"start")},$=function(){s.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!==i&&(""+i).length&&e(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},y=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToNextSlide())},E=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToPrevSlide())},I=function(e){o.startAuto(),e.preventDefault()},T=function(e){o.stopAuto(),e.preventDefault()},M=function(t){var i,n;t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),i=e(t.currentTarget),void 0!==i.attr("data-slide-index")&&(n=parseInt(i.attr("data-slide-index")),n!==s.active.index&&o.goToSlide(n)))},P=function(t){var i=s.children.length;return"short"===s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},O=function(){if(s.settings.infiniteLoop){var e="";0===s.active.index?e=s.children.eq(0).position():s.active.index===v()-1&&s.carousel?e=s.children.eq((v()-1)*m()).position():s.active.index===s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)},D=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},z=function(){1===v()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0===s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index===v()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},A=function(){if(s.settings.autoDelay>0){setTimeout(o.startAuto,s.settings.autoDelay)}else o.startAuto(),e(window).focus(function(){o.startAuto()}).blur(function(){o.stopAuto()});s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},q=function(){var t,i,n,a,r,l,d,c,g=0;"next"===s.settings.autoDirection?o.append(s.children.clone().addClass("bx-clone")):(o.prepend(s.children.clone().addClass("bx-clone")),t=s.children.first().position(),g="horizontal"===s.settings.mode?-t.left:-t.top),b(g,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&(s.usingCSS?(a="horizontal"===s.settings.mode?4:5,s.viewport.hover(function(){i=o.css("-"+s.cssPrefix+"-transform"),n=parseFloat(i.split(",")[a]),b(n,"reset",0)},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),r=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=r*(c-Math.abs(parseInt(n))),V(d)})):s.viewport.hover(function(){o.stop()},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),r=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=r*(c-Math.abs(parseInt(o.css(l)))),V(d)})),V()},V=function(e){var t,i,n,a=e?e:s.settings.speed,r={left:0,top:0},l={left:0,top:0};"next"===s.settings.autoDirection?r=o.find(".bx-clone").first().position():l=s.children.first().position(),t="horizontal"===s.settings.mode?-r.left:-r.top,i="horizontal"===s.settings.mode?-l.left:-l.top,n={resetValue:i},b(t,"ticker",a,n)},H=function(t){var i=e(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=t.offset();return n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+t.outerWidth(),s.bottom=s.top+t.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)},W=function(e){var t=document.activeElement.tagName.toLowerCase(),i="input|textarea",n=new RegExp(t,["i"]),s=n.exec(i);if(null==s&&H(o)){if(39===e.keyCode)return y(e),!1;if(37===e.keyCode)return E(e),!1}},L=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart MSPointerDown pointerdown",R),s.viewport.on("click",".bxslider a",function(e){s.viewport.hasClass("click-disabled")&&(e.preventDefault(),s.viewport.removeClass("click-disabled"))})},R=function(e){if(s.controls.el.addClass("disabled"),s.working)e.preventDefault(),s.controls.el.removeClass("disabled");else{s.touch.originalPos=o.position();var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t];s.touch.start.x=i[0].pageX,s.touch.start.y=i[0].pageY,s.viewport.get(0).setPointerCapture&&(s.pointerId=t.pointerId,s.viewport.get(0).setPointerCapture(s.pointerId)),s.viewport.bind("touchmove MSPointerMove pointermove",N),s.viewport.bind("touchend MSPointerUp pointerup",Y),s.viewport.bind("MSPointerCancel pointercancel",F)}},F=function(e){b(s.touch.originalPos.left,"reset",0),s.controls.el.removeClass("disabled"),s.viewport.unbind("MSPointerCancel pointercancel",F),s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},N=function(e){var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=Math.abs(i[0].pageX-s.touch.start.x),o=Math.abs(i[0].pageY-s.touch.start.y),a=0,r=0;3*n>o&&s.settings.preventDefaultSwipeX?e.preventDefault():3*o>n&&s.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!==s.settings.mode&&s.settings.oneToOneTouch&&("horizontal"===s.settings.mode?(r=i[0].pageX-s.touch.start.x,a=s.touch.originalPos.left+r):(r=i[0].pageY-s.touch.start.y,a=s.touch.originalPos.top+r),b(a,"reset",0))},Y=function(e){s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.controls.el.removeClass("disabled");var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=0,a=0;s.touch.end.x=i[0].pageX,s.touch.end.y=i[0].pageY,"fade"===s.settings.mode?(a=Math.abs(s.touch.start.x-s.touch.end.x),a>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())):("horizontal"===s.settings.mode?(a=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(a=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0===s.active.index&&a>0||s.active.last&&a<0)?b(n,"reset",200):Math.abs(a)>=s.settings.swipeThreshold?(a<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(n,"reset",200)),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},_=function(t){if(s.initialized)if(s.working)window.setTimeout(_,10);else{var i=e(window).width(),n=e(window).height();a===i&&r===n||(a=i,r=n,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}},X=function(e){var t=f();s.settings.ariaHidden&&!s.settings.ticker&&(s.children.attr("aria-hidden","true"),s.children.slice(e,e+t).attr("aria-hidden","false"))},Z=function(e){return e<0?s.settings.infiniteLoop?v()-1:s.active.index:e>=v()?s.settings.infiniteLoop?0:s.active.index:e};return o.goToSlide=function(t,i){var n,a,r,l,d=!0,c=0,g={left:0,top:0},p=null;if(s.oldIndex=s.active.index,s.active.index=Z(t),!s.working&&s.active.index!==s.oldIndex){if(s.working=!0,d=s.settings.onSlideBefore.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index),"undefined"!=typeof d&&!d)return s.active.index=s.oldIndex,void(s.working=!1);"next"===i?s.settings.onSlideNext.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1):"prev"===i&&(s.settings.onSlidePrev.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1)),s.active.last=s.active.index>=v()-1,(s.settings.pager||s.settings.pagerCustom)&&P(s.active.index),s.settings.controls&&z(),"fade"===s.settings.mode?(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),O()})):(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),!s.settings.infiniteLoop&&s.carousel&&s.active.last?"horizontal"===s.settings.mode?(p=s.children.eq(s.children.length-1),g=p.position(),c=s.viewport.width()-p.outerWidth()):(n=s.children.length-s.settings.minSlides,g=s.children.eq(n).position()):s.carousel&&s.active.last&&"prev"===i?(a=1===s.settings.moveSlides?s.settings.maxSlides-m():(v()-1)*m()-(s.children.length-s.settings.maxSlides),p=o.children(".bx-clone").eq(a),g=p.position()):"next"===i&&0===s.active.index?(g=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1):t>=0&&(l=t*parseInt(m()),g=s.children.eq(l).position()),"undefined"!=typeof g?(r="horizontal"===s.settings.mode?-(g.left-c):-g.top,b(r,"slide",s.settings.speed)):s.working=!1),s.settings.ariaHidden&&X(s.active.index*m())}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!==s.active.index){var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"===s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&e!==!0&&D("stop"))},o.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&e!==!0&&D("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideElement=function(e){return s.children.eq(e)},o.getSlideCount=function(){return s.children.length},o.isWorking=function(){return s.working},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).outerWidth(h()),s.viewport.css("height",u()),s.settings.ticker||x(),s.active.last&&(s.active.index=v()-1),s.active.index>=v()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(S(),P(s.active.index)),s.settings.ariaHidden&&X(s.active.index*m())},o.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){void 0!==e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!==e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&!s.settings.pagerCustom&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",_),s.settings.keyboardEnabled&&e(document).unbind("keydown",W),e(this).removeData("bxSlider"))},o.reloadSlider=function(t){void 0!==t&&(n=t),o.destroySlider(),l(),e(o).data("bxSlider",this)},l(),e(o).data("bxSlider",this),this}}}(jQuery),hasTouch())try{$(window).scroll(function(){$(this).scrollTop();backgrounds.total.css({transform:"translate(0px, 0px)"})});for(var si in document.styleSheets){var styleSheet=document.styleSheets[si];if(styleSheet.rules)for(var ri=styleSheet.rules.length-1;ri>=0;ri--)styleSheet.rules[ri].selectorText&&styleSheet.rules[ri].selectorText.match(":hover")&&styleSheet.deleteRule(ri)}}catch(ex){}$(function(){$("window").scroll(function(){$("html").animate({scrollTop:$(document).height()},1e3),console.log(scrollTop())}),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=$(this.hash);t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length&&(e.preventDefault(),$("html, body").animate({scrollTop:t.offset().top},1e3,function(){var e=$(t);return e.focus(),!e.is(":focus")&&(e.attr("tabindex","-1"),void e.focus())}))}});var e=$(".sidebar"),t=$(".navbar__links"),i=$(".navbar"),n=$("#burger");$(".links__item"),$(".sidebarlayout");e.click(function(){t.toggleClass("--visible"),e.toggleClass("--on"),n.toggleClass("close").toggleClass("opened")}),i.siblings().click(function(){t.removeClass("--visible"),e.removeClass("--on"),n.addClass("close").removeClass("opened")});var s=$("#show-pop-up"),o=$(".wpbtn-footer"),a=$(".cover"),r=$(".close-button"),l=$(".whitepapper"),d=$("#show-feedback"),c=$(".feedback-wrap"),g=$(".space-close"),u=$("#qr-wechat"),p=$("#link-wechat"),h=$(".feedback-ico");u.hide().click(function(){u.fadeToggle(600),h.delay(600).fadeToggle(400)}),p.click(function(e){e.preventDefault(),u.delay(400).fadeToggle(600),h.fadeToggle(400)}),d.click(function(e){e.preventDefault(),c.fadeToggle("400"),d.toggleClass("white"),g.toggle(400)}),g.click(function(){c.fadeOut(400),d.removeClass("white"),g.hide()}),s.click(function(e){e.preventDefault(),a.fadeIn(400),l.fadeIn(400)}),o.click(function(e){e.preventDefault(),a.fadeIn(400),l.fadeIn(400)}),r.click(function(){a.fadeOut(400),l.fadeOut(400)}),a.click(function(){a.fadeOut(400),l.fadeOut(400)});var f=($("a.lang"),$("#lang-us"),$("#lang-cn"),$("#lang-in"),$(".langswitch-wrap")),v=$(".langswitch"),m=$(".langswitch-carusel");f.click(function(){v.toggle(400),$(".links__item").toggleClass("hided")}),m.bxSlider({auto:!0,controls:!1,pause:2e3,pager:!1,touchEnabled:!1});var x=$(".pop-up-video"),b=$("#play-video-eng-btn"),S=$("#play-video-cn-btn");b.click(function(){x.append('<iframe id="video" src="https://www.youtube.com/embed/p1YiDKlSe8k?rel=0&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),x.fadeIn(700)}),S.click(function(){x.append('<video id="video" controls autoplay><source src="http://onplace.io/img/video/onplace-china-subtitle.mp4" type="video/mp4"/></video>'),x.fadeIn(700)}),$(".close-button-video").click(function(e){var t=$("#video"),i=$("#video-pop-up");e.preventDefault(),x.hide(700),i.remove(),t.remove()}),$(".partners-carousel").bxSlider({auto:!0,controls:!1,pause:3e3,pager:!1});var w={Empty:$("#picture-empty"),Edward:$("#picture-Edward"),Andrei:$("#picture-Andrei"),Dmitriy:$("#picture-Dmitriy"),Ilya:$("#picture-Ilya"),Mike:$("#picture-Mike"),Oleg:$("#picture-Oleg"),Michael:$("#picture-Michael"),Eugene:$("#picture-Eugene"),Ruslan:$("#picture-Ruslan"),Vladimir:$("#picture-Vladimir"),Valentina:$("#picture-Valentina")},k={team:$("#team-description"),Edward:$("#Edward-description"),Andrei:$("#Andrei-description"),Dmitriy:$("#Dmitriy-description"),Ilya:$("#Ilya-description"),Mike:$("#Mike-description"),Oleg:$("#Oleg-description"),Michael:$("#Michael-description"),Eugene:$("#Eugene-description"),Ruslan:$("#Ruslan-description"),Vladimir:$("#Vladimir-description"),Valentina:$("#Valentina-description")},C={total:$(".backgrounds-item"),Edward:$("#Edward-background"),Andrei:$("#Andrei-background"),Mike:$("#Mike-background"),Dmitriy:$("#Dmitriy-background"),Ilya:$("#Ilya-background"),Oleg:$("#Oleg-background"),Michael:$("#Michael-background"),Eugene:$("#Eugene-background"),Ruslan:$("#Ruslan-background"),Vladimir:$("#Vladimir-background"),Valentina:$("#Valentina-background")},y=$(".member-picture"),E=$(".blue_polygons"),I=$(".team");k.team.show(),y.click(function(){E.fadeOut(800),I.addClass("white")}),w.Empty.click(function(e){e.preventDefault(),C.total.fadeOut(800),k.team.fadeIn(800).siblings().fadeOut(800),E.fadeIn(800),I.removeClass("white")}),w.Andrei.click(function(e){e.preventDefault(),C.Andrei.fadeIn(800).siblings().fadeOut(800),k.Andrei.fadeIn(800).siblings().fadeOut(800)}),w.Edward.click(function(e){e.preventDefault(),C.Edward.fadeIn(800).siblings().fadeOut(800),k.Edward.fadeIn(800).siblings().fadeOut(800)}),w.Dmitriy.click(function(e){e.preventDefault(),C.Dmitriy.fadeIn(800).siblings().fadeOut(800),k.Dmitriy.fadeIn(800).siblings().fadeOut(800)}),w.Ilya.click(function(e){e.preventDefault(),C.Ilya.fadeIn(800).siblings().fadeOut(800),k.Ilya.fadeIn(800).siblings().fadeOut(800)}),w.Mike.click(function(e){e.preventDefault(),C.Mike.fadeIn(800).siblings().fadeOut(800),k.Mike.fadeIn(800).siblings().fadeOut(800)}),w.Oleg.click(function(e){e.preventDefault(),C.Oleg.fadeIn(800).siblings().fadeOut(800),k.Oleg.fadeIn(800).siblings().fadeOut(800)}),w.Michael.click(function(e){e.preventDefault(),C.Michael.fadeIn(800).siblings().fadeOut(800),k.Michael.fadeIn(800).siblings().fadeOut(800)}),w.Eugene.click(function(e){e.preventDefault(),C.Eugene.fadeIn(800).siblings().fadeOut(800),k.Eugene.fadeIn(800).siblings().fadeOut(800)}),w.Ruslan.click(function(e){e.preventDefault(),C.Ruslan.fadeIn(800).siblings().fadeOut(800),k.Ruslan.fadeIn(800).siblings().fadeOut(800)}),w.Vladimir.click(function(e){e.preventDefault(),C.Vladimir.fadeIn(800).siblings().fadeOut(800),k.Vladimir.fadeIn(800).siblings().fadeOut(800)}),w.Valentina.click(function(e){e.preventDefault(),C.Valentina.fadeIn(800).siblings().fadeOut(800),k.Valentina.fadeIn(800).siblings().fadeOut(800)}),$(window).scroll(function(){var e=$(this).scrollTop();C.total.css({transform:"translate(0px, -"+e/3+"px)"})}),$(".card-back-wrap").hide(),$(".advisor-item").click(function(){$(this).children(".flip-card").children(".card-back-wrap").slideToggle(400)}),$(".attantion-alert").click(function(){$(".attantion-alert").fadeOut(400)}),$("#close-alert").click(function(e){e.preventDefault(),$(".attantion-alert").fadeOut(400)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiaGFzVG91Y2giLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwibXNNYXhUb3VjaFBvaW50cyIsIiQiLCJkZWZhdWx0cyIsIm1vZGUiLCJzbGlkZVNlbGVjdG9yIiwiaW5maW5pdGVMb29wIiwiaGlkZUNvbnRyb2xPbkVuZCIsInNwZWVkIiwiZWFzaW5nIiwic2xpZGVNYXJnaW4iLCJzdGFydFNsaWRlIiwicmFuZG9tU3RhcnQiLCJjYXB0aW9ucyIsInRpY2tlciIsInRpY2tlckhvdmVyIiwiYWRhcHRpdmVIZWlnaHQiLCJhZGFwdGl2ZUhlaWdodFNwZWVkIiwidmlkZW8iLCJ1c2VDU1MiLCJwcmVsb2FkSW1hZ2VzIiwicmVzcG9uc2l2ZSIsInNsaWRlWkluZGV4Iiwid3JhcHBlckNsYXNzIiwidG91Y2hFbmFibGVkIiwic3dpcGVUaHJlc2hvbGQiLCJvbmVUb09uZVRvdWNoIiwicHJldmVudERlZmF1bHRTd2lwZVgiLCJwcmV2ZW50RGVmYXVsdFN3aXBlWSIsImFyaWFMaXZlIiwiYXJpYUhpZGRlbiIsImtleWJvYXJkRW5hYmxlZCIsInBhZ2VyIiwicGFnZXJUeXBlIiwicGFnZXJTaG9ydFNlcGFyYXRvciIsInBhZ2VyU2VsZWN0b3IiLCJidWlsZFBhZ2VyIiwicGFnZXJDdXN0b20iLCJjb250cm9scyIsIm5leHRUZXh0IiwicHJldlRleHQiLCJuZXh0U2VsZWN0b3IiLCJwcmV2U2VsZWN0b3IiLCJhdXRvQ29udHJvbHMiLCJzdGFydFRleHQiLCJzdG9wVGV4dCIsImF1dG9Db250cm9sc0NvbWJpbmUiLCJhdXRvQ29udHJvbHNTZWxlY3RvciIsImF1dG8iLCJwYXVzZSIsImF1dG9TdGFydCIsImF1dG9EaXJlY3Rpb24iLCJzdG9wQXV0b09uQ2xpY2siLCJhdXRvSG92ZXIiLCJhdXRvRGVsYXkiLCJhdXRvU2xpZGVGb3JPbmVQYWdlIiwibWluU2xpZGVzIiwibWF4U2xpZGVzIiwibW92ZVNsaWRlcyIsInNsaWRlV2lkdGgiLCJzaHJpbmtJdGVtcyIsIm9uU2xpZGVyTG9hZCIsIm9uU2xpZGVCZWZvcmUiLCJvblNsaWRlQWZ0ZXIiLCJvblNsaWRlTmV4dCIsIm9uU2xpZGVQcmV2Iiwib25TbGlkZXJSZXNpemUiLCJmbiIsImJ4U2xpZGVyIiwib3B0aW9ucyIsInRoaXMiLCJsZW5ndGgiLCJlYWNoIiwic2xpZGVyIiwiZWwiLCJ3aW5kb3dXaWR0aCIsIndpbmRvdyIsIndpZHRoIiwid2luZG93SGVpZ2h0IiwiaGVpZ2h0IiwiZGF0YSIsImluaXQiLCJzZXR0aW5ncyIsImV4dGVuZCIsInBhcnNlSW50IiwiY2hpbGRyZW4iLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJhY3RpdmUiLCJpbmRleCIsImNhcm91c2VsIiwibWluVGhyZXNob2xkIiwibWF4VGhyZXNob2xkIiwid29ya2luZyIsImludGVydmFsIiwiYW5pbVByb3AiLCJ1c2luZ0NTUyIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsImkiLCJ1bmRlZmluZWQiLCJzdHlsZSIsImNzc1ByZWZpeCIsInJlcGxhY2UiLCJ0b0xvd2VyQ2FzZSIsImF0dHIiLCJzZXR1cCIsInByZWxvYWRTZWxlY3RvciIsImVxIiwid3JhcCIsInZpZXdwb3J0IiwicGFyZW50IiwibG9hZGVyIiwicHJlcGVuZCIsImNzcyIsInBvc2l0aW9uIiwib3ZlcmZsb3ciLCJtYXhXaWR0aCIsImdldFZpZXdwb3J0TWF4V2lkdGgiLCJmbG9hdCIsImxpc3RTdHlsZSIsImdldFNsaWRlV2lkdGgiLCJ6SW5kZXgiLCJkaXNwbGF5IiwiYXBwZW5kQ2FwdGlvbnMiLCJsYXN0IiwiZ2V0UGFnZXJRdHkiLCJmaXRWaWRzIiwiYXBwZW5kQ29udHJvbHMiLCJhcHBlbmRDb250cm9sc0F1dG8iLCJhcHBlbmRQYWdlciIsImFmdGVyIiwibG9hZEVsZW1lbnRzIiwic3RhcnQiLCJzZWxlY3RvciIsImNhbGxiYWNrIiwidG90YWwiLCJmaW5kIiwiY291bnQiLCJvbmUiLCJjb21wbGV0ZSIsInRyaWdnZXIiLCJzbGljZSIsInNsaWNlQXBwZW5kIiwiY2xvbmUiLCJhZGRDbGFzcyIsInNsaWNlUHJlcGVuZCIsImFwcGVuZCIsInJlbW92ZSIsInNldFNsaWRlUG9zaXRpb24iLCJnZXRWaWV3cG9ydEhlaWdodCIsInJlZHJhd1NsaWRlciIsImNhbGwiLCJpbml0aWFsaXplZCIsImJpbmQiLCJyZXNpemVXaW5kb3ciLCJpbml0QXV0byIsImluaXRUaWNrZXIiLCJ1cGRhdGVQYWdlckFjdGl2ZSIsInVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzIiwiaW5pdFRvdWNoIiwia2V5ZG93biIsImtleVByZXNzIiwiY3VycmVudEluZGV4IiwiZ2V0TW92ZUJ5IiwiYWRkIiwib3V0ZXJIZWlnaHQiLCJtYXgiLCJhcHBseSIsIm1hcCIsImdldCIsInBhcnNlRmxvYXQiLCJuZXdFbFdpZHRoIiwid3JhcFdpZHRoIiwiY2VpbCIsImdldE51bWJlclNsaWRlc1Nob3dpbmciLCJzbGlkZXNTaG93aW5nIiwiY2hpbGRXaWR0aCIsImZpcnN0IiwicGFnZXJRdHkiLCJicmVha1BvaW50IiwiY291bnRlciIsImxhc3RDaGlsZCIsImxhc3RTaG93aW5nSW5kZXgiLCJzZXRQb3NpdGlvblByb3BlcnR5IiwibGVmdCIsIm91dGVyV2lkdGgiLCJ0b3AiLCJ2YWx1ZSIsInR5cGUiLCJkdXJhdGlvbiIsInBhcmFtcyIsImFuaW1hdGVPYmoiLCJwcm9wVmFsdWUiLCJlIiwidGFyZ2V0IiwiaXMiLCJ1bmJpbmQiLCJ1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbiIsInJlc2V0VmFsdWUiLCJ0aWNrZXJMb29wIiwiYW5pbWF0ZSIsInBvcHVsYXRlUGFnZXIiLCJwYWdlckh0bWwiLCJsaW5rQ29udGVudCIsImlzRnVuY3Rpb24iLCJwYWdlckVsIiwiaHRtbCIsIm9uIiwiY2xpY2tQYWdlckJpbmQiLCJuZXh0IiwicHJldiIsImNsaWNrTmV4dEJpbmQiLCJjbGlja1ByZXZCaW5kIiwiZGlyZWN0aW9uRWwiLCJzdG9wIiwiYXV0b0VsIiwiY2xpY2tTdGFydEJpbmQiLCJjbGlja1N0b3BCaW5kIiwidXBkYXRlQXV0b0NvbnRyb2xzIiwidGl0bGUiLCJwcmV2ZW50RGVmYXVsdCIsImhhc0NsYXNzIiwic3RvcEF1dG8iLCJnb1RvTmV4dFNsaWRlIiwiZ29Ub1ByZXZTbGlkZSIsInN0YXJ0QXV0byIsInBhZ2VyTGluayIsInBhZ2VySW5kZXgiLCJjdXJyZW50VGFyZ2V0IiwiZ29Ub1NsaWRlIiwic2xpZGVJbmRleCIsImxlbiIsInJlbW92ZUNsYXNzIiwib2xkSW5kZXgiLCJzdGF0ZSIsInNldFRpbWVvdXQiLCJmb2N1cyIsImJsdXIiLCJob3ZlciIsImF1dG9QYXVzZWQiLCJ0cmFuc2Zvcm0iLCJpZHgiLCJyYXRpbyIsInByb3BlcnR5IiwibmV3U3BlZWQiLCJ0b3RhbERpbWVucyIsInN0YXJ0UG9zaXRpb24iLCJzcGxpdCIsImFicyIsInJlc3VtZVNwZWVkIiwiYW5pbWF0ZVByb3BlcnR5IiwicmVzZXQiLCJpc09uU2NyZWVuIiwid2luIiwic2Nyb2xsVG9wIiwic2Nyb2xsTGVmdCIsImJvdW5kcyIsIm9mZnNldCIsInJpZ2h0IiwiYm90dG9tIiwiYWN0aXZlRWxlbWVudFRhZyIsImFjdGl2ZUVsZW1lbnQiLCJ0YWdOYW1lIiwidGFnRmlsdGVycyIsInAiLCJSZWdFeHAiLCJyZXN1bHQiLCJleGVjIiwia2V5Q29kZSIsInRvdWNoIiwieCIsInkiLCJlbmQiLCJvblRvdWNoU3RhcnQiLCJvcmlnaW5hbFBvcyIsIm9yaWciLCJvcmlnaW5hbEV2ZW50IiwidG91Y2hQb2ludHMiLCJjaGFuZ2VkVG91Y2hlcyIsInBhZ2VYIiwicGFnZVkiLCJzZXRQb2ludGVyQ2FwdHVyZSIsInBvaW50ZXJJZCIsIm9uVG91Y2hNb3ZlIiwib25Ub3VjaEVuZCIsIm9uUG9pbnRlckNhbmNlbCIsInJlbGVhc2VQb2ludGVyQ2FwdHVyZSIsInhNb3ZlbWVudCIsInlNb3ZlbWVudCIsImNoYW5nZSIsImRpc3RhbmNlIiwid2luZG93V2lkdGhOZXciLCJ3aW5kb3dIZWlnaHROZXciLCJhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzIiwic3RhcnRWaXNpYmxlSW5kZXgiLCJudW1iZXJPZlNsaWRlc1Nob3dpbmciLCJzZXRTbGlkZUluZGV4IiwiZGlyZWN0aW9uIiwicmVxdWVzdEVsIiwicGVyZm9ybVRyYW5zaXRpb24iLCJtb3ZlQnkiLCJmaWx0ZXIiLCJmYWRlT3V0IiwiZmFkZUluIiwicHJldmVudENvbnRyb2xVcGRhdGUiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJnZXRDdXJyZW50U2xpZGUiLCJnZXRDdXJyZW50U2xpZGVFbGVtZW50IiwiZ2V0U2xpZGVFbGVtZW50IiwiZ2V0U2xpZGVDb3VudCIsImlzV29ya2luZyIsImRlc3Ryb3lTbGlkZXIiLCJyZW1vdmVBdHRyIiwidW53cmFwIiwicmVtb3ZlRGF0YSIsInJlbG9hZFNsaWRlciIsImpRdWVyeSIsInNjcm9sbCIsImJhY2tncm91bmRzIiwic2kiLCJzdHlsZVNoZWV0cyIsInN0eWxlU2hlZXQiLCJydWxlcyIsInJpIiwic2VsZWN0b3JUZXh0IiwibWF0Y2giLCJkZWxldGVSdWxlIiwiZXgiLCJjb25zb2xlIiwibG9nIiwibm90IiwiY2xpY2siLCJldmVudCIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJob3N0bmFtZSIsImhhc2giLCIkdGFyZ2V0IiwiJHNpZGViYXIiLCIkbmF2YmFyIiwiJG5hdmJhckNvbnRhaW5lciIsIiRidXJnZXIiLCJ0b2dnbGVDbGFzcyIsInNpYmxpbmdzIiwiJHdoaXRlUGFwcGVyIiwiJHdoaXRlUGFwcGVyQnRuIiwiJG92ZXJsYXkiLCIkY2xvc2VCdG4iLCIkcG9wVXBXaGl0ZXBhcHBlciIsIiRmZWVkYmFjayIsIiRwb3BVcEZlZWRiYWNrIiwiJGNsb3NlU3BhY2UiLCIkcXJXZUNoYXQiLCIkbGlua1dlQ2hhdCIsIiRmZWVkYmFja0xpbmtzIiwiaGlkZSIsImZhZGVUb2dnbGUiLCJkZWxheSIsInRvZ2dsZSIsIiRsYW5nQnRuIiwiJGxhbmdTd2l0Y2giLCIkbGFuZ1N3aXRjaENhcnVzZWwiLCIkcG9wVXBWaWRlb0NvbnRhaW5lciIsIiRwb3BVcFZpZGVvQnRuIiwiJHBvcFVwVmlkZW9DbkJ0biIsIiR2aWRlbyIsIiR2aWRlb1NjcmVlbiIsInBpY3R1cmVzIiwiRW1wdHkiLCJFZHdhcmQiLCJBbmRyZWkiLCJEbWl0cml5IiwiSWx5YSIsIk1pa2UiLCJPbGVnIiwiTWljaGFlbCIsIkV1Z2VuZSIsIlJ1c2xhbiIsIlZsYWRpbWlyIiwiVmFsZW50aW5hIiwiZGVzY3JpcHRpb24iLCJ0ZWFtIiwiaGV4b2xpbmtzIiwiYmx1ZWhleGVzIiwidGVhbVNlY3Rpb24iLCJzaG93Iiwic3QiLCJzbGlkZVRvZ2dsZSJdLCJtYXBwaW5ncyI6IkFBa2tEQSxRQUFTQSxZQUNMLE1BQU8sZ0JBQWtCQyxVQUFTQyxpQkFDeEJDLFVBQVVDLGVBQWlCLEdBQzNCRCxVQUFVRSxpQkFBbUIsRUFHM0MsR0F4a0RDLFNBQVVDLEdBRVQsR0FBSUMsSUFHRkMsS0FBTSxhQUNOQyxjQUFlLEdBQ2ZDLGNBQWMsRUFDZEMsa0JBQWtCLEVBQ2xCQyxNQUFPLElBQ1BDLE9BQVEsS0FDUkMsWUFBYSxFQUNiQyxXQUFZLEVBQ1pDLGFBQWEsRUFDYkMsVUFBVSxFQUNWQyxRQUFRLEVBQ1JDLGFBQWEsRUFDYkMsZ0JBQWdCLEVBQ2hCQyxvQkFBcUIsSUFDckJDLE9BQU8sRUFDUEMsUUFBUSxFQUNSQyxjQUFlLFVBQ2ZDLFlBQVksRUFDWkMsWUFBYSxHQUNiQyxhQUFjLGFBR2RDLGNBQWMsRUFDZEMsZUFBZ0IsR0FDaEJDLGVBQWUsRUFDZkMsc0JBQXNCLEVBQ3RCQyxzQkFBc0IsRUFHdEJDLFVBQVUsRUFDVkMsWUFBWSxFQUdaQyxpQkFBaUIsRUFHakJDLE9BQU8sRUFDUEMsVUFBVyxPQUNYQyxvQkFBcUIsTUFDckJDLGNBQWUsS0FDZkMsV0FBWSxLQUNaQyxZQUFhLEtBR2JDLFVBQVUsRUFDVkMsU0FBVSxPQUNWQyxTQUFVLE9BQ1ZDLGFBQWMsS0FDZEMsYUFBYyxLQUNkQyxjQUFj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Qy9CQSxFQUFFMkIsaUJBQ0ZtRyxFQUFZNEQsU0FBUzVFLE9BQU8sS0FBS3lDLFdBQVcxQyxRQUFRLEtBQ3BEK0UsRUFBWUYsU0FBUzVFLE9BQU8sS0FBS3lDLFdBQVcxQyxRQUFRLE9BRXREa0UsRUFBU1ksVUFBVWhELE1BQU0sU0FBUzNJLEdBQ2hDQSxFQUFFMkIsaUJBQ0ZtRyxFQUFZNkQsVUFBVTdFLE9BQU8sS0FBS3lDLFdBQVcxQyxRQUFRLEtBQ3JEK0UsRUFBWUQsVUFBVTdFLE9BQU8sS0FBS3lDLFdBQVcxQyxRQUFRLE9BSXZEL1MsRUFBRTBFLFFBQVFxUCxPQUFPLFdBQ2YsR0FBSXFFLEdBQUtwWSxFQUFFb0UsTUFBTTJMLFdBRWpCaUUsR0FBWXhMLE1BQU10QixLQUFNK0gsVUFBVyxtQkFBcUJtSixFQUFHLEVBQUcsVUFHbEVwWSxFQUFFLG1CQUFtQnFXLE9BQ3JCclcsRUFBRSxpQkFBaUI2VSxNQUFNLFdBQ3ZCN1UsRUFBRW9FLE1BQU1lLFNBQVMsY0FBY0EsU0FBUyxtQkFBbUJrVCxZQUFZLE9BR3pFclksRUFBRSxvQkFBb0I2VSxNQUFNLFdBQzFCN1UsRUFBRSxvQkFBb0IrUyxRQUFRLE9BRWhDL1MsRUFBRSxnQkFBZ0I2VSxNQUFNLFNBQVUzSSxHQUNoQ0EsRUFBRTJCLGlCQUNGN04sRUFBRSxvQkFBb0IrUyxRQUFRIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCQpIHtcblxuICB2YXIgZGVmYXVsdHMgPSB7XG5cbiAgICAvLyBHRU5FUkFMXG4gICAgbW9kZTogJ2hvcml6b250YWwnLFxuICAgIHNsaWRlU2VsZWN0b3I6ICcnLFxuICAgIGluZmluaXRlTG9vcDogdHJ1ZSxcbiAgICBoaWRlQ29udHJvbE9uRW5kOiBmYWxzZSxcbiAgICBzcGVlZDogNTAwLFxuICAgIGVhc2luZzogbnVsbCxcbiAgICBzbGlkZU1hcmdpbjogMCxcbiAgICBzdGFydFNsaWRlOiAwLFxuICAgIHJhbmRvbVN0YXJ0OiBmYWxzZSxcbiAgICBjYXB0aW9uczogZmFsc2UsXG4gICAgdGlja2VyOiBmYWxzZSxcbiAgICB0aWNrZXJIb3ZlcjogZmFsc2UsXG4gICAgYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxuICAgIGFkYXB0aXZlSGVpZ2h0U3BlZWQ6IDUwMCxcbiAgICB2aWRlbzogZmFsc2UsXG4gICAgdXNlQ1NTOiB0cnVlLFxuICAgIHByZWxvYWRJbWFnZXM6ICd2aXNpYmxlJyxcbiAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgIHNsaWRlWkluZGV4OiA1MCxcbiAgICB3cmFwcGVyQ2xhc3M6ICdieC13cmFwcGVyJyxcblxuICAgIC8vIFRPVUNIXG4gICAgdG91Y2hFbmFibGVkOiB0cnVlLFxuICAgIHN3aXBlVGhyZXNob2xkOiA1MCxcbiAgICBvbmVUb09uZVRvdWNoOiB0cnVlLFxuICAgIHByZXZlbnREZWZhdWx0U3dpcGVYOiB0cnVlLFxuICAgIHByZXZlbnREZWZhdWx0U3dpcGVZOiBmYWxzZSxcblxuICAgIC8vIEFDQ0VTU0lCSUxJVFlcbiAgICBhcmlhTGl2ZTogdHJ1ZSxcbiAgICBhcmlhSGlkZGVuOiB0cnVlLFxuXG4gICAgLy8gS0VZQk9BUkRcbiAgICBrZXlib2FyZEVuYWJsZWQ6IGZhbHNlLFxuXG4gICAgLy8gUEFHRVJcbiAgICBwYWdlcjogdHJ1ZSxcbiAgICBwYWdlclR5cGU6ICdmdWxsJyxcbiAgICBwYWdlclNob3J0U2VwYXJhdG9yOiAnIC8gJyxcbiAgICBwYWdlclNlbGVjdG9yOiBudWxsLFxuICAgIGJ1aWxkUGFnZXI6IG51bGwsXG4gICAgcGFnZXJDdXN0b206IG51bGwsXG5cbiAgICAvLyBDT05UUk9MU1xuICAgIGNvbnRyb2xzOiB0cnVlLFxuICAgIG5leHRUZXh0OiAnTmV4dCcsXG4gICAgcHJldlRleHQ6ICdQcmV2JyxcbiAgICBuZXh0U2VsZWN0b3I6IG51bGwsXG4gICAgcHJldlNlbGVjdG9yOiBudWxsLFxuICAgIGF1dG9Db250cm9sczogZmFsc2UsXG4gICAgc3RhcnRUZXh0OiAnU3RhcnQnLFxuICAgIHN0b3BUZXh0OiAnU3RvcCcsXG4gICAgYXV0b0NvbnRyb2xzQ29tYmluZTogZmFsc2UsXG4gICAgYXV0b0NvbnRyb2xzU2VsZWN0b3I6IG51bGwsXG5cbiAgICAvLyBBVVRPXG4gICAgYXV0bzogZmFsc2UsXG4gICAgcGF1c2U6IDQwMDAsXG4gICAgYXV0b1N0YXJ0OiB0cnVlLFxuICAgIGF1dG9EaXJlY3Rpb246ICduZXh0JyxcbiAgICBzdG9wQXV0b09uQ2xpY2s6IGZhbHNlLFxuICAgIGF1dG9Ib3ZlcjogZmFsc2UsXG4gICAgYXV0b0RlbGF5OiAwLFxuICAgIGF1dG9TbGlkZUZvck9uZVBhZ2U6IGZhbHNlLFxuXG4gICAgLy8gQ0FST1VTRUxcbiAgICBtaW5TbGlkZXM6IDEsXG4gICAgbWF4U2xpZGVzOiAxLFxuICAgIG1vdmVTbGlkZXM6IDAsXG4gICAgc2xpZGVXaWR0aDogMCxcbiAgICBzaHJpbmtJdGVtczogZmFsc2UsXG5cbiAgICAvLyBDQUxMQkFDS1NcbiAgICBvblNsaWRlckxvYWQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICBvblNsaWRlQmVmb3JlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgb25TbGlkZUFmdGVyOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgb25TbGlkZU5leHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcbiAgICBvblNsaWRlUHJldjogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxuICAgIG9uU2xpZGVyUmVzaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH1cbiAgfTtcblxuICAkLmZuLmJ4U2xpZGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBzdXBwb3J0IG11bHRpcGxlIGVsZW1lbnRzXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHRoaXMpLmJ4U2xpZGVyKG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBjcmVhdGUgYSBuYW1lc3BhY2UgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHRoZSBwbHVnaW5cbiAgICB2YXIgc2xpZGVyID0ge30sXG4gICAgLy8gc2V0IGEgcmVmZXJlbmNlIHRvIG91ciBzbGlkZXIgZWxlbWVudFxuICAgIGVsID0gdGhpcyxcbiAgICAvLyBnZXQgdGhlIG9yaWdpbmFsIHdpbmRvdyBkaW1lbnMgKHRoYW5rcyBhIGxvdCBJRSlcbiAgICB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpLFxuICAgIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuICAgIC8vIFJldHVybiBpZiBzbGlkZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgIGlmICgkKGVsKS5kYXRhKCdieFNsaWRlcicpKSB7IHJldHVybjsgfVxuXG4gICAgLyoqXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgKiA9IFBSSVZBVEUgRlVOQ1RJT05TXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIG5hbWVzcGFjZSBzZXR0aW5ncyB0byBiZSB1c2VkIHRocm91Z2hvdXQgcGx1Z2luXG4gICAgICovXG4gICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIFJldHVybiBpZiBzbGlkZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZFxuICAgICAgaWYgKCQoZWwpLmRhdGEoJ2J4U2xpZGVyJykpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBtZXJnZSB1c2VyLXN1cHBsaWVkIG9wdGlvbnMgd2l0aCB0aGUgZGVmYXVsdHNcbiAgICAgIHNsaWRlci5zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICAvLyBwYXJzZSBzbGlkZVdpZHRoIHNldHRpbmdcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID0gcGFyc2VJbnQoc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpO1xuICAgICAgLy8gc3RvcmUgdGhlIG9yaWdpbmFsIGNoaWxkcmVuXG4gICAgICBzbGlkZXIuY2hpbGRyZW4gPSBlbC5jaGlsZHJlbihzbGlkZXIuc2V0dGluZ3Muc2xpZGVTZWxlY3Rvcik7XG4gICAgICAvLyBjaGVjayBpZiBhY3R1YWwgbnVtYmVyIG9mIHNsaWRlcyBpcyBsZXNzIHRoYW4gbWluU2xpZGVzIC8gbWF4U2xpZGVzXG4gICAgICBpZiAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA8IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMpIHsgc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA9IHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7IH1cbiAgICAgIGlmIChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIDwgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcykgeyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgfVxuICAgICAgLy8gaWYgcmFuZG9tIHN0YXJ0LCBzZXQgdGhlIHN0YXJ0U2xpZGUgc2V0dGluZyB0byByYW5kb20gbnVtYmVyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnJhbmRvbVN0YXJ0KSB7IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCk7IH1cbiAgICAgIC8vIHN0b3JlIGFjdGl2ZSBzbGlkZSBpbmZvcm1hdGlvblxuICAgICAgc2xpZGVyLmFjdGl2ZSA9IHsgaW5kZXg6IHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlIH07XG4gICAgICAvLyBzdG9yZSBpZiB0aGUgc2xpZGVyIGlzIGluIGNhcm91c2VsIG1vZGUgKGRpc3BsYXlpbmcgLyBtb3ZpbmcgbXVsdGlwbGUgc2xpZGVzKVxuICAgICAgc2xpZGVyLmNhcm91c2VsID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA+IDEgfHwgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEgPyB0cnVlIDogZmFsc2U7XG4gICAgICAvLyBpZiBjYXJvdXNlbCwgZm9yY2UgcHJlbG9hZEltYWdlcyA9ICdhbGwnXG4gICAgICBpZiAoc2xpZGVyLmNhcm91c2VsKSB7IHNsaWRlci5zZXR0aW5ncy5wcmVsb2FkSW1hZ2VzID0gJ2FsbCc7IH1cbiAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbWluIC8gbWF4IHdpZHRoIHRocmVzaG9sZHMgYmFzZWQgb24gbWluIC8gbWF4IG51bWJlciBvZiBzbGlkZXNcbiAgICAgIC8vIHVzZWQgdG8gc2V0dXAgYW5kIHVwZGF0ZSBjYXJvdXNlbCBzbGlkZXMgZGltZW5zaW9uc1xuICAgICAgc2xpZGVyLm1pblRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgc2xpZGVyLm1heFRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgLy8gc3RvcmUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHNsaWRlciAoaWYgY3VycmVudGx5IGFuaW1hdGluZywgd29ya2luZyBpcyB0cnVlKVxuICAgICAgc2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcbiAgICAgIC8vIGluaXRpYWxpemUgdGhlIGNvbnRyb2xzIG9iamVjdFxuICAgICAgc2xpZGVyLmNvbnRyb2xzID0ge307XG4gICAgICAvLyBpbml0aWFsaXplIGFuIGF1dG8gaW50ZXJ2YWxcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJvcGVydHkgdG8gdXNlIGZvciB0cmFuc2l0aW9uc1xuICAgICAgc2xpZGVyLmFuaW1Qcm9wID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcgPyAndG9wJyA6ICdsZWZ0JztcbiAgICAgIC8vIGRldGVybWluZSBpZiBoYXJkd2FyZSBhY2NlbGVyYXRpb24gY2FuIGJlIHVzZWRcbiAgICAgIHNsaWRlci51c2luZ0NTUyA9IHNsaWRlci5zZXR0aW5ncy51c2VDU1MgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgIT09ICdmYWRlJyAmJiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBvdXIgdGVzdCBkaXYgZWxlbWVudFxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgIC8vIGNzcyB0cmFuc2l0aW9uIHByb3BlcnRpZXNcbiAgICAgICAgcHJvcHMgPSBbJ1dlYmtpdFBlcnNwZWN0aXZlJywgJ01velBlcnNwZWN0aXZlJywgJ09QZXJzcGVjdGl2ZScsICdtc1BlcnNwZWN0aXZlJ107XG4gICAgICAgIC8vIHRlc3QgZm9yIGVhY2ggcHJvcGVydHlcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChkaXYuc3R5bGVbcHJvcHNbaV1dICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNsaWRlci5jc3NQcmVmaXggPSBwcm9wc1tpXS5yZXBsYWNlKCdQZXJzcGVjdGl2ZScsICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgc2xpZGVyLmFuaW1Qcm9wID0gJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNmb3JtJztcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9KCkpO1xuICAgICAgLy8gaWYgdmVydGljYWwgbW9kZSBhbHdheXMgbWFrZSBtYXhTbGlkZXMgYW5kIG1pblNsaWRlcyBlcXVhbFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzOyB9XG4gICAgICAvLyBzYXZlIG9yaWdpbmFsIHN0eWxlIGRhdGFcbiAgICAgIGVsLmRhdGEoJ29yaWdTdHlsZScsIGVsLmF0dHIoJ3N0eWxlJykpO1xuICAgICAgZWwuY2hpbGRyZW4oc2xpZGVyLnNldHRpbmdzLnNsaWRlU2VsZWN0b3IpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykuZGF0YSgnb3JpZ1N0eWxlJywgJCh0aGlzKS5hdHRyKCdzdHlsZScpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBwZXJmb3JtIGFsbCBET00gLyBDU1MgbW9kaWZpY2F0aW9uc1xuICAgICAgc2V0dXAoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYWxsIERPTSBhbmQgQ1NTIG1vZGlmaWNhdGlvbnNcbiAgICAgKi9cbiAgICB2YXIgc2V0dXAgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwcmVsb2FkU2VsZWN0b3IgPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpOyAvLyBzZXQgdGhlIGRlZmF1bHQgcHJlbG9hZCBzZWxlY3RvciAodmlzaWJsZSlcblxuICAgICAgLy8gd3JhcCBlbCBpbiBhIHdyYXBwZXJcbiAgICAgIGVsLndyYXAoJzxkaXYgY2xhc3M9XCInICsgc2xpZGVyLnNldHRpbmdzLndyYXBwZXJDbGFzcyArICdcIj48ZGl2IGNsYXNzPVwiYngtdmlld3BvcnRcIj48L2Rpdj48L2Rpdj4nKTtcbiAgICAgIC8vIHN0b3JlIGEgbmFtZXNwYWNlIHJlZmVyZW5jZSB0byAuYngtdmlld3BvcnRcbiAgICAgIHNsaWRlci52aWV3cG9ydCA9IGVsLnBhcmVudCgpO1xuXG4gICAgICAvLyBhZGQgYXJpYS1saXZlIGlmIHRoZSBzZXR0aW5nIGlzIGVuYWJsZWQgYW5kIHRpY2tlciBtb2RlIGlzIGRpc2FibGVkXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFMaXZlICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5hdHRyKCdhcmlhLWxpdmUnLCAncG9saXRlJyk7XG4gICAgICB9XG4gICAgICAvLyBhZGQgYSBsb2FkaW5nIGRpdiB0byBkaXNwbGF5IHdoaWxlIGltYWdlcyBhcmUgbG9hZGluZ1xuICAgICAgc2xpZGVyLmxvYWRlciA9ICQoJzxkaXYgY2xhc3M9XCJieC1sb2FkaW5nXCIgLz4nKTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC5wcmVwZW5kKHNsaWRlci5sb2FkZXIpO1xuICAgICAgLy8gc2V0IGVsIHRvIGEgbWFzc2l2ZSB3aWR0aCwgdG8gaG9sZCBhbnkgbmVlZGVkIHNsaWRlc1xuICAgICAgLy8gYWxzbyBzdHJpcCBhbnkgbWFyZ2luIGFuZCBwYWRkaW5nIGZyb20gZWxcbiAgICAgIGVsLmNzcyh7XG4gICAgICAgIHdpZHRoOiBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggKiAxMDAwICsgMjE1KSArICclJyA6ICdhdXRvJyxcbiAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZSdcbiAgICAgIH0pO1xuICAgICAgLy8gaWYgdXNpbmcgQ1NTLCBhZGQgdGhlIGVhc2luZyBwcm9wZXJ0eVxuICAgICAgaWYgKHNsaWRlci51c2luZ0NTUyAmJiBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nKSB7XG4gICAgICAgIGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicsIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpO1xuICAgICAgLy8gaWYgbm90IHVzaW5nIENTUyBhbmQgbm8gZWFzaW5nIHZhbHVlIHdhcyBzdXBwbGllZCwgdXNlIHRoZSBkZWZhdWx0IEpTIGFuaW1hdGlvbiBlYXNpbmcgKHN3aW5nKVxuICAgICAgfSBlbHNlIGlmICghc2xpZGVyLnNldHRpbmdzLmVhc2luZykge1xuICAgICAgICBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nID0gJ3N3aW5nJztcbiAgICAgIH1cbiAgICAgIC8vIG1ha2UgbW9kaWZpY2F0aW9ucyB0byB0aGUgdmlld3BvcnQgKC5ieC12aWV3cG9ydClcbiAgICAgIHNsaWRlci52aWV3cG9ydC5jc3Moe1xuICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXG4gICAgICB9KTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC5wYXJlbnQoKS5jc3Moe1xuICAgICAgICBtYXhXaWR0aDogZ2V0Vmlld3BvcnRNYXhXaWR0aCgpXG4gICAgICB9KTtcbiAgICAgIC8vIGFwcGx5IGNzcyB0byBhbGwgc2xpZGVyIGNoaWxkcmVuXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uY3NzKHtcbiAgICAgICAgZmxvYXQ6IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAnbGVmdCcgOiAnbm9uZScsXG4gICAgICAgIGxpc3RTdHlsZTogJ25vbmUnLFxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xuICAgICAgfSk7XG4gICAgICAvLyBhcHBseSB0aGUgY2FsY3VsYXRlZCB3aWR0aCBhZnRlciB0aGUgZmxvYXQgaXMgYXBwbGllZCB0byBwcmV2ZW50IHNjcm9sbGJhciBpbnRlcmZlcmVuY2VcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3MoJ3dpZHRoJywgZ2V0U2xpZGVXaWR0aCgpKTtcbiAgICAgIC8vIGlmIHNsaWRlTWFyZ2luIGlzIHN1cHBsaWVkLCBhZGQgdGhlIGNzc1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkgeyBzbGlkZXIuY2hpbGRyZW4uY3NzKCdtYXJnaW5SaWdodCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7IH1cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gPiAwKSB7IHNsaWRlci5jaGlsZHJlbi5jc3MoJ21hcmdpbkJvdHRvbScsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7IH1cbiAgICAgIC8vIGlmIFwiZmFkZVwiIG1vZGUsIGFkZCBwb3NpdGlvbmluZyBhbmQgei1pbmRleCBDU1NcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2ZhZGUnKSB7XG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3Moe1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHpJbmRleDogMCxcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHByZXBhcmUgdGhlIHotaW5kZXggb24gdGhlIHNob3dpbmcgZWxlbWVudFxuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpLmNzcyh7ekluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVaSW5kZXgsIGRpc3BsYXk6ICdibG9jayd9KTtcbiAgICAgIH1cbiAgICAgIC8vIGNyZWF0ZSBhbiBlbGVtZW50IHRvIGNvbnRhaW4gYWxsIHNsaWRlciBjb250cm9scyAocGFnZXIsIHN0YXJ0IC8gc3RvcCwgZXRjKVxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzXCIgLz4nKTtcbiAgICAgIC8vIGlmIGNhcHRpb25zIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNhcHRpb25zKSB7IGFwcGVuZENhcHRpb25zKCk7IH1cbiAgICAgIC8vIGNoZWNrIGlmIHN0YXJ0U2xpZGUgaXMgbGFzdCBzbGlkZVxuICAgICAgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUgPT09IGdldFBhZ2VyUXR5KCkgLSAxO1xuICAgICAgLy8gaWYgdmlkZW8gaXMgdHJ1ZSwgc2V0IHVwIHRoZSBmaXRWaWRzIHBsdWdpblxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy52aWRlbykgeyBlbC5maXRWaWRzKCk7IH1cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucHJlbG9hZEltYWdlcyA9PT0gJ2FsbCcgfHwgc2xpZGVyLnNldHRpbmdzLnRpY2tlcikgeyBwcmVsb2FkU2VsZWN0b3IgPSBzbGlkZXIuY2hpbGRyZW47IH1cbiAgICAgIC8vIG9ubHkgY2hlY2sgZm9yIGNvbnRyb2wgYWRkaXRpb24gaWYgbm90IGluIFwidGlja2VyXCIgbW9kZVxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XG4gICAgICAgIC8vIGlmIGNvbnRyb2xzIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMpIHsgYXBwZW5kQ29udHJvbHMoKTsgfVxuICAgICAgICAvLyBpZiBhdXRvIGlzIHRydWUsIGFuZCBhdXRvIGNvbnRyb2xzIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzKSB7IGFwcGVuZENvbnRyb2xzQXV0bygpOyB9XG4gICAgICAgIC8vIGlmIHBhZ2VyIGlzIHJlcXVlc3RlZCwgYWRkIGl0XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHsgYXBwZW5kUGFnZXIoKTsgfVxuICAgICAgICAvLyBpZiBhbnkgY29udHJvbCBvcHRpb24gaXMgcmVxdWVzdGVkLCBhZGQgdGhlIGNvbnRyb2xzIHdyYXBwZXJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzIHx8IHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyBzbGlkZXIudmlld3BvcnQuYWZ0ZXIoc2xpZGVyLmNvbnRyb2xzLmVsKTsgfVxuICAgICAgLy8gaWYgdGlja2VyIG1vZGUsIGRvIG5vdCBhbGxvdyBhIHBhZ2VyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGxvYWRFbGVtZW50cyhwcmVsb2FkU2VsZWN0b3IsIHN0YXJ0KTtcbiAgICB9O1xuXG4gICAgdmFyIGxvYWRFbGVtZW50cyA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRvdGFsID0gc2VsZWN0b3IuZmluZCgnaW1nOm5vdChbc3JjPVwiXCJdKSwgaWZyYW1lJykubGVuZ3RoLFxuICAgICAgY291bnQgPSAwO1xuICAgICAgaWYgKHRvdGFsID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlbGVjdG9yLmZpbmQoJ2ltZzpub3QoW3NyYz1cIlwiXSksIGlmcmFtZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICQodGhpcykub25lKCdsb2FkIGVycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrY291bnQgPT09IHRvdGFsKSB7IGNhbGxiYWNrKCk7IH1cbiAgICAgICAgfSkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAodGhpcy5jb21wbGV0ZSkgeyAkKHRoaXMpLnRyaWdnZXIoJ2xvYWQnKTsgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdGFydCB0aGUgc2xpZGVyXG4gICAgICovXG4gICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBpbmZpbml0ZSBsb29wLCBwcmVwYXJlIGFkZGl0aW9uYWwgc2xpZGVzXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ2ZhZGUnICYmICFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XG4gICAgICAgIHZhciBzbGljZSAgICA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA6IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMsXG4gICAgICAgIHNsaWNlQXBwZW5kICA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgwLCBzbGljZSkuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ2J4LWNsb25lJyksXG4gICAgICAgIHNsaWNlUHJlcGVuZCA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgtc2xpY2UpLmNsb25lKHRydWUpLmFkZENsYXNzKCdieC1jbG9uZScpO1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHtcbiAgICAgICAgICBzbGljZUFwcGVuZC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICAgICAgICAgIHNsaWNlUHJlcGVuZC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsLmFwcGVuZChzbGljZUFwcGVuZCkucHJlcGVuZChzbGljZVByZXBlbmQpO1xuICAgICAgfVxuICAgICAgLy8gcmVtb3ZlIHRoZSBsb2FkaW5nIERPTSBlbGVtZW50XG4gICAgICBzbGlkZXIubG9hZGVyLnJlbW92ZSgpO1xuICAgICAgLy8gc2V0IHRoZSBsZWZ0IC8gdG9wIHBvc2l0aW9uIG9mIFwiZWxcIlxuICAgICAgc2V0U2xpZGVQb3NpdGlvbigpO1xuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGFsd2F5cyB1c2UgYWRhcHRpdmVIZWlnaHQgdG8gcHJldmVudCBvZGQgYmVoYXZpb3JcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgPSB0cnVlOyB9XG4gICAgICAvLyBzZXQgdGhlIHZpZXdwb3J0IGhlaWdodFxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmhlaWdodChnZXRWaWV3cG9ydEhlaWdodCgpKTtcbiAgICAgIC8vIG1ha2Ugc3VyZSBldmVyeXRoaW5nIGlzIHBvc2l0aW9uZWQganVzdCByaWdodCAoc2FtZSBhcyBhIHdpbmRvdyByZXNpemUpXG4gICAgICBlbC5yZWRyYXdTbGlkZXIoKTtcbiAgICAgIC8vIG9uU2xpZGVyTG9hZCBjYWxsYmFja1xuICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVyTG9hZC5jYWxsKGVsLCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgIC8vIHNsaWRlciBoYXMgYmVlbiBmdWxseSBpbml0aWFsaXplZFxuICAgICAgc2xpZGVyLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgIC8vIGJpbmQgdGhlIHJlc2l6ZSBjYWxsIHRvIHRoZSB3aW5kb3dcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucmVzcG9uc2l2ZSkgeyAkKHdpbmRvdykuYmluZCgncmVzaXplJywgcmVzaXplV2luZG93KTsgfVxuICAgICAgLy8gaWYgYXV0byBpcyB0cnVlIGFuZCBoYXMgbW9yZSB0aGFuIDEgcGFnZSwgc3RhcnQgdGhlIHNob3dcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3MuYXV0b1N0YXJ0ICYmIChnZXRQYWdlclF0eSgpID4gMSB8fCBzbGlkZXIuc2V0dGluZ3MuYXV0b1NsaWRlRm9yT25lUGFnZSkpIHsgaW5pdEF1dG8oKTsgfVxuICAgICAgLy8gaWYgdGlja2VyIGlzIHRydWUsIHN0YXJ0IHRoZSB0aWNrZXJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7IGluaXRUaWNrZXIoKTsgfVxuICAgICAgLy8gaWYgcGFnZXIgaXMgcmVxdWVzdGVkLCBtYWtlIHRoZSBhcHByb3ByaWF0ZSBwYWdlciBsaW5rIGFjdGl2ZVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlcikgeyB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSk7IH1cbiAgICAgIC8vIGNoZWNrIGZvciBhbnkgdXBkYXRlcyB0byB0aGUgY29udHJvbHMgKGxpa2UgaGlkZUNvbnRyb2xPbkVuZCB1cGRhdGVzKVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgeyB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpOyB9XG4gICAgICAvLyBpZiB0b3VjaEVuYWJsZWQgaXMgdHJ1ZSwgc2V0dXAgdGhlIHRvdWNoIGV2ZW50c1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgaW5pdFRvdWNoKCk7IH1cbiAgICAgIC8vIGlmIGtleWJvYXJkRW5hYmxlZCBpcyB0cnVlLCBzZXR1cCB0aGUga2V5Ym9hcmQgZXZlbnRzXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmtleWJvYXJkRW5hYmxlZCAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xuICAgICAgICAkKGRvY3VtZW50KS5rZXlkb3duKGtleVByZXNzKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCBoZWlnaHQgb2YgdGhlIHZpZXdwb3J0LCB1c2VkIHRvIGRldGVybWluZSBlaXRoZXIgYWRhcHRpdmVIZWlnaHQgb3IgdGhlIG1heEhlaWdodCB2YWx1ZVxuICAgICAqL1xuICAgIHZhciBnZXRWaWV3cG9ydEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGhlaWdodCA9IDA7XG4gICAgICAvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvblxuICAgICAgdmFyIGNoaWxkcmVuID0gJCgpO1xuICAgICAgLy8gaWYgbW9kZSBpcyBub3QgXCJ2ZXJ0aWNhbFwiIGFuZCBhZGFwdGl2ZUhlaWdodCBpcyBmYWxzZSwgaW5jbHVkZSBhbGwgY2hpbGRyZW5cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ3ZlcnRpY2FsJyAmJiAhc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0KSB7XG4gICAgICAgIGNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaWYgbm90IGNhcm91c2VsLCByZXR1cm4gdGhlIHNpbmdsZSBhY3RpdmUgY2hpbGRcbiAgICAgICAgaWYgKCFzbGlkZXIuY2Fyb3VzZWwpIHtcbiAgICAgICAgICBjaGlsZHJlbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgLy8gaWYgY2Fyb3VzZWwsIHJldHVybiBhIHNsaWNlIG9mIGNoaWxkcmVuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBpbmRpdmlkdWFsIHNsaWRlIGluZGV4XG4gICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID09PSAxID8gc2xpZGVyLmFjdGl2ZS5pbmRleCA6IHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKTtcbiAgICAgICAgICAvLyBhZGQgdGhlIGN1cnJlbnQgc2xpZGUgdG8gdGhlIGNoaWxkcmVuXG4gICAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4KTtcbiAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHRoZSByZW1haW5pbmcgXCJzaG93aW5nXCIgc2xpZGVzXG4gICAgICAgICAgZm9yIChpID0gMTsgaSA8PSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAvLyBpZiBsb29wZWQgYmFjayB0byB0aGUgc3RhcnRcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggKyBpID49IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5hZGQoc2xpZGVyLmNoaWxkcmVuLmVxKGkgLSAxKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4ICsgaSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgc3VtIG9mIHRoZSBoZWlnaHRzIG9mIHRoZSBjaGlsZHJlblxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgIGNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICBoZWlnaHQgKz0gJCh0aGlzKS5vdXRlckhlaWdodCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYWRkIHVzZXItc3VwcGxpZWQgbWFyZ2luc1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luID4gMCkge1xuICAgICAgICAgIGhlaWdodCArPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpO1xuICAgICAgICB9XG4gICAgICAvLyBpZiBub3QgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGNhbGN1bGF0ZSB0aGUgbWF4IGhlaWdodCBvZiB0aGUgY2hpbGRyZW5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhlaWdodCA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIGNoaWxkcmVuLm1hcChmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gJCh0aGlzKS5vdXRlckhlaWdodChmYWxzZSk7XG4gICAgICAgIH0pLmdldCgpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5jc3MoJ2JveC1zaXppbmcnKSA9PT0gJ2JvcmRlci1ib3gnKSB7XG4gICAgICAgIGhlaWdodCArPSBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKSArXG4gICAgICAgICAgICAgIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLXRvcC13aWR0aCcpKSArIHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm9yZGVyLWJvdHRvbS13aWR0aCcpKTtcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm94LXNpemluZycpID09PSAncGFkZGluZy1ib3gnKSB7XG4gICAgICAgIGhlaWdodCArPSBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctdG9wJykpICsgcGFyc2VGbG9hdChzbGlkZXIudmlld3BvcnQuY3NzKCdwYWRkaW5nLWJvdHRvbScpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSB1c2VkIGZvciB0aGUgb3V0ZXIgd3JhcHBlciAvIHZpZXdwb3J0XG4gICAgICovXG4gICAgdmFyIGdldFZpZXdwb3J0TWF4V2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB3aWR0aCA9ICcxMDAlJztcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApIHtcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICB3aWR0aCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpZHRoID0gc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB3aWR0aDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY2FsY3VsYXRlZCB3aWR0aCB0byBiZSBhcHBsaWVkIHRvIGVhY2ggc2xpZGVcbiAgICAgKi9cbiAgICB2YXIgZ2V0U2xpZGVXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5ld0VsV2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCwgLy8gc3RhcnQgd2l0aCBhbnkgdXNlci1zdXBwbGllZCBzbGlkZSB3aWR0aFxuICAgICAgd3JhcFdpZHRoICAgICAgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKTsgICAgLy8gZ2V0IHRoZSBjdXJyZW50IHZpZXdwb3J0IHdpZHRoXG4gICAgICAvLyBpZiBzbGlkZSB3aWR0aCB3YXMgbm90IHN1cHBsaWVkLCBvciBpcyBsYXJnZXIgdGhhbiB0aGUgdmlld3BvcnQgdXNlIHRoZSB2aWV3cG9ydCB3aWR0aFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID09PSAwIHx8XG4gICAgICAgIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IHdyYXBXaWR0aCAmJiAhc2xpZGVyLmNhcm91c2VsKSB8fFxuICAgICAgICBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICBuZXdFbFdpZHRoID0gd3JhcFdpZHRoO1xuICAgICAgLy8gaWYgY2Fyb3VzZWwsIHVzZSB0aGUgdGhyZXNob2xkcyB0byBkZXRlcm1pbmUgdGhlIHdpZHRoXG4gICAgICB9IGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgPiAxICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgaWYgKHdyYXBXaWR0aCA+IHNsaWRlci5tYXhUaHJlc2hvbGQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3RWxXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmICh3cmFwV2lkdGggPCBzbGlkZXIubWluVGhyZXNob2xkKSB7XG4gICAgICAgICAgbmV3RWxXaWR0aCA9ICh3cmFwV2lkdGggLSAoc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luICogKHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgLSAxKSkpIC8gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3Muc2hyaW5rSXRlbXMpIHtcbiAgICAgICAgICBuZXdFbFdpZHRoID0gTWF0aC5mbG9vcigod3JhcFdpZHRoICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKSAvIChNYXRoLmNlaWwoKHdyYXBXaWR0aCArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikgLyAobmV3RWxXaWR0aCArIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbikpKSAtIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdFbFdpZHRoO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2xpZGVzIGN1cnJlbnRseSB2aXNpYmxlIGluIHRoZSB2aWV3cG9ydCAoaW5jbHVkZXMgcGFydGlhbGx5IHZpc2libGUgc2xpZGVzKVxuICAgICAqL1xuICAgIHZhciBnZXROdW1iZXJTbGlkZXNTaG93aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgc2xpZGVzU2hvd2luZyA9IDEsXG4gICAgICBjaGlsZFdpZHRoID0gbnVsbDtcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoID4gMCkge1xuICAgICAgICAvLyBpZiB2aWV3cG9ydCBpcyBzbWFsbGVyIHRoYW4gbWluVGhyZXNob2xkLCByZXR1cm4gbWluU2xpZGVzXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSA8IHNsaWRlci5taW5UaHJlc2hvbGQpIHtcbiAgICAgICAgICBzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgLy8gaWYgdmlld3BvcnQgaXMgbGFyZ2VyIHRoYW4gbWF4VGhyZXNob2xkLCByZXR1cm4gbWF4U2xpZGVzXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgPiBzbGlkZXIubWF4VGhyZXNob2xkKSB7XG4gICAgICAgICAgc2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXM7XG4gICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGJldHdlZW4gbWluIC8gbWF4IHRocmVzaG9sZHMsIGRpdmlkZSB2aWV3cG9ydCB3aWR0aCBieSBmaXJzdCBjaGlsZCB3aWR0aFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoaWxkV2lkdGggPSBzbGlkZXIuY2hpbGRyZW4uZmlyc3QoKS53aWR0aCgpICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luO1xuICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBNYXRoLmZsb29yKChzbGlkZXIudmlld3BvcnQud2lkdGgoKSArXG4gICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gY2hpbGRXaWR0aCk7XG4gICAgICAgIH1cbiAgICAgIC8vIGlmIFwidmVydGljYWxcIiBtb2RlLCBzbGlkZXMgc2hvd2luZyB3aWxsIGFsd2F5cyBiZSBtaW5TbGlkZXNcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgc2xpZGVzU2hvd2luZyA9IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2xpZGVzU2hvd2luZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHBhZ2VzIChvbmUgZnVsbCB2aWV3cG9ydCBvZiBzbGlkZXMgaXMgb25lIFwicGFnZVwiKVxuICAgICAqL1xuICAgIHZhciBnZXRQYWdlclF0eSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBhZ2VyUXR5ID0gMCxcbiAgICAgIGJyZWFrUG9pbnQgPSAwLFxuICAgICAgY291bnRlciA9IDA7XG4gICAgICAvLyBpZiBtb3ZlU2xpZGVzIGlzIHNwZWNpZmllZCBieSB0aGUgdXNlclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID4gMCkge1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xuICAgICAgICAgIHBhZ2VyUXR5ID0gTWF0aC5jZWlsKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLyBnZXRNb3ZlQnkoKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gd2hlbiBicmVha3BvaW50IGdvZXMgYWJvdmUgY2hpbGRyZW4gbGVuZ3RoLCBjb3VudGVyIGlzIHRoZSBudW1iZXIgb2YgcGFnZXNcbiAgICAgICAgICB3aGlsZSAoYnJlYWtQb2ludCA8IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICsrcGFnZXJRdHk7XG4gICAgICAgICAgICBicmVha1BvaW50ID0gY291bnRlciArIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcbiAgICAgICAgICAgIGNvdW50ZXIgKz0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPD0gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpID8gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgOiBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAvLyBpZiBtb3ZlU2xpZGVzIGlzIDAgKGF1dG8pIGRpdmlkZSBjaGlsZHJlbiBsZW5ndGggYnkgc2lkZXMgc2hvd2luZywgdGhlbiByb3VuZCB1cFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFnZXJRdHkgPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFnZXJRdHk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpbmRpdmlkdWFsIHNsaWRlcyBieSB3aGljaCB0byBzaGlmdCB0aGUgc2xpZGVyXG4gICAgICovXG4gICAgdmFyIGdldE1vdmVCeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaWYgbW92ZVNsaWRlcyB3YXMgc2V0IGJ5IHRoZSB1c2VyIGFuZCBtb3ZlU2xpZGVzIGlzIGxlc3MgdGhhbiBudW1iZXIgb2Ygc2xpZGVzIHNob3dpbmdcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA+IDAgJiYgc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPD0gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpKSB7XG4gICAgICAgIHJldHVybiBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcztcbiAgICAgIH1cbiAgICAgIC8vIGlmIG1vdmVTbGlkZXMgaXMgMCAoYXV0bylcbiAgICAgIHJldHVybiBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHNsaWRlcidzIChlbCkgbGVmdCBvciB0b3AgcG9zaXRpb25cbiAgICAgKi9cbiAgICB2YXIgc2V0U2xpZGVQb3NpdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHBvc2l0aW9uLCBsYXN0Q2hpbGQsIGxhc3RTaG93aW5nSW5kZXg7XG4gICAgICAvLyBpZiBsYXN0IHNsaWRlLCBub3QgaW5maW5pdGUgbG9vcCwgYW5kIG51bWJlciBvZiBjaGlsZHJlbiBpcyBsYXJnZXIgdGhhbiBzcGVjaWZpZWQgbWF4U2xpZGVzXG4gICAgICBpZiAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCA+IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmICFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNoaWxkJ3MgcG9zaXRpb25cbiAgICAgICAgICBsYXN0Q2hpbGQgPSBzbGlkZXIuY2hpbGRyZW4ubGFzdCgpO1xuICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG4gICAgICAgICAgLy8gc2V0IHRoZSBsZWZ0IHBvc2l0aW9uXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtKHBvc2l0aW9uLmxlZnQgLSAoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgLSBsYXN0Q2hpbGQub3V0ZXJXaWR0aCgpKSksICdyZXNldCcsIDApO1xuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IHNob3dpbmcgaW5kZXgncyBwb3NpdGlvblxuICAgICAgICAgIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShsYXN0U2hvd2luZ0luZGV4KS5wb3NpdGlvbigpO1xuICAgICAgICAgIC8vIHNldCB0aGUgdG9wIHBvc2l0aW9uXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24udG9wLCAncmVzZXQnLCAwKTtcbiAgICAgICAgfVxuICAgICAgLy8gaWYgbm90IGxhc3Qgc2xpZGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNob3dpbmcgc2xpZGVcbiAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpKS5wb3NpdGlvbigpO1xuICAgICAgICAvLyBjaGVjayBmb3IgbGFzdCBzbGlkZVxuICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gZ2V0UGFnZXJRdHkoKSAtIDEpIHsgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gdHJ1ZTsgfVxuICAgICAgICAvLyBzZXQgdGhlIHJlc3BlY3RpdmUgcG9zaXRpb25cbiAgICAgICAgaWYgKHBvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTsgfVxuICAgICAgICAgIGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7IH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBlbCdzIGFuaW1hdGluZyBwcm9wZXJ0eSBwb3NpdGlvbiAod2hpY2ggaW4gdHVybiB3aWxsIHNvbWV0aW1lcyBhbmltYXRlIGVsKS5cbiAgICAgKiBJZiB1c2luZyBDU1MsIHNldHMgdGhlIHRyYW5zZm9ybSBwcm9wZXJ0eS4gSWYgbm90IHVzaW5nIENTUywgc2V0cyB0aGUgdG9wIC8gbGVmdCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAoaW50KVxuICAgICAqICAtIHRoZSBhbmltYXRpbmcgcHJvcGVydHkncyB2YWx1ZVxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGUgKHN0cmluZykgJ3NsaWRlJywgJ3Jlc2V0JywgJ3RpY2tlcidcbiAgICAgKiAgLSB0aGUgdHlwZSBvZiBpbnN0YW5jZSBmb3Igd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIGJlaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZHVyYXRpb24gKGludClcbiAgICAgKiAgLSB0aGUgYW1vdW50IG9mIHRpbWUgKGluIG1zKSB0aGUgdHJhbnNpdGlvbiBzaG91bGQgb2NjdXB5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFyYW1zIChhcnJheSkgb3B0aW9uYWxcbiAgICAgKiAgLSBhbiBvcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBhbnkgdmFyaWFibGVzIHRoYXQgbmVlZCB0byBiZSBwYXNzZWQgaW5cbiAgICAgKi9cbiAgICB2YXIgc2V0UG9zaXRpb25Qcm9wZXJ0eSA9IGZ1bmN0aW9uKHZhbHVlLCB0eXBlLCBkdXJhdGlvbiwgcGFyYW1zKSB7XG4gICAgICB2YXIgYW5pbWF0ZU9iaiwgcHJvcFZhbHVlO1xuICAgICAgLy8gdXNlIENTUyB0cmFuc2Zvcm1cbiAgICAgIGlmIChzbGlkZXIudXNpbmdDU1MpIHtcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHRoZSB0cmFuc2xhdGUzZCB2YWx1ZVxuICAgICAgICBwcm9wVmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJyA/ICd0cmFuc2xhdGUzZCgwLCAnICsgdmFsdWUgKyAncHgsIDApJyA6ICd0cmFuc2xhdGUzZCgnICsgdmFsdWUgKyAncHgsIDAsIDApJztcbiAgICAgICAgLy8gYWRkIHRoZSBDU1MgdHJhbnNpdGlvbi1kdXJhdGlvblxuICAgICAgICBlbC5jc3MoJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNpdGlvbi1kdXJhdGlvbicsIGR1cmF0aW9uIC8gMTAwMCArICdzJyk7XG4gICAgICAgIGlmICh0eXBlID09PSAnc2xpZGUnKSB7XG4gICAgICAgICAgLy8gc2V0IHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICAvLyBiaW5kIGEgY2FsbGJhY2sgbWV0aG9kIC0gZXhlY3V0ZXMgd2hlbiBDU1MgdHJhbnNpdGlvbiBjb21wbGV0ZXNcbiAgICAgICAgICAgIGVsLmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIC8vbWFrZSBzdXJlIGl0J3MgdGhlIGNvcnJlY3Qgb25lXG4gICAgICAgICAgICAgIGlmICghJChlLnRhcmdldCkuaXMoZWwpKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAvLyB1bmJpbmQgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgIGVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHsgLy9kdXJhdGlvbiA9IDBcbiAgICAgICAgICAgIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXNldCcpIHtcbiAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0aWNrZXInKSB7XG4gICAgICAgICAgLy8gbWFrZSB0aGUgdHJhbnNpdGlvbiB1c2UgJ2xpbmVhcidcbiAgICAgICAgICBlbC5jc3MoJy0nICsgc2xpZGVyLmNzc1ByZWZpeCArICctdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nLCAnbGluZWFyJyk7XG4gICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgcHJvcFZhbHVlKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IDApIHtcbiAgICAgICAgICAgIGVsLmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIC8vbWFrZSBzdXJlIGl0J3MgdGhlIGNvcnJlY3Qgb25lXG4gICAgICAgICAgICAgIGlmICghJChlLnRhcmdldCkuaXMoZWwpKSB7IHJldHVybjsgfVxuICAgICAgICAgICAgICAvLyB1bmJpbmQgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICAgIGVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xuICAgICAgICAgICAgICAvLyByZXNldCB0aGUgcG9zaXRpb25cbiAgICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXMucmVzZXRWYWx1ZSwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBsb29wIGFnYWluXG4gICAgICAgICAgICAgIHRpY2tlckxvb3AoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7IC8vZHVyYXRpb24gPSAwXG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcbiAgICAgICAgICAgIHRpY2tlckxvb3AoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIC8vIHVzZSBKUyBhbmltYXRlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbmltYXRlT2JqID0ge307XG4gICAgICAgIGFuaW1hdGVPYmpbc2xpZGVyLmFuaW1Qcm9wXSA9IHZhbHVlO1xuICAgICAgICBpZiAodHlwZSA9PT0gJ3NsaWRlJykge1xuICAgICAgICAgIGVsLmFuaW1hdGUoYW5pbWF0ZU9iaiwgZHVyYXRpb24sIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVzZXQnKSB7XG4gICAgICAgICAgZWwuY3NzKHNsaWRlci5hbmltUHJvcCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICd0aWNrZXInKSB7XG4gICAgICAgICAgZWwuYW5pbWF0ZShhbmltYXRlT2JqLCBkdXJhdGlvbiwgJ2xpbmVhcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShwYXJhbXMucmVzZXRWYWx1ZSwgJ3Jlc2V0JywgMCk7XG4gICAgICAgICAgICAvLyBydW4gdGhlIHJlY3Vyc2l2ZSBsb29wIGFmdGVyIGFuaW1hdGlvblxuICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBvcHVsYXRlcyB0aGUgcGFnZXIgd2l0aCBwcm9wZXIgYW1vdW50IG9mIHBhZ2VzXG4gICAgICovXG4gICAgdmFyIHBvcHVsYXRlUGFnZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBwYWdlckh0bWwgPSAnJyxcbiAgICAgIGxpbmtDb250ZW50ID0gJycsXG4gICAgICBwYWdlclF0eSA9IGdldFBhZ2VyUXR5KCk7XG4gICAgICAvLyBsb29wIHRocm91Z2ggZWFjaCBwYWdlciBpdGVtXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VyUXR5OyBpKyspIHtcbiAgICAgICAgbGlua0NvbnRlbnQgPSAnJztcbiAgICAgICAgLy8gaWYgYSBidWlsZFBhZ2VyIGZ1bmN0aW9uIGlzIHN1cHBsaWVkLCB1c2UgaXQgdG8gZ2V0IHBhZ2VyIGxpbmsgdmFsdWUsIGVsc2UgdXNlIGluZGV4ICsgMVxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSB8fCBzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHtcbiAgICAgICAgICBsaW5rQ29udGVudCA9IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpO1xuICAgICAgICAgIHNsaWRlci5wYWdlckVsLmFkZENsYXNzKCdieC1jdXN0b20tcGFnZXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaW5rQ29udGVudCA9IGkgKyAxO1xuICAgICAgICAgIHNsaWRlci5wYWdlckVsLmFkZENsYXNzKCdieC1kZWZhdWx0LXBhZ2VyJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmFyIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSA/IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpIDogaSArIDE7XG4gICAgICAgIC8vIGFkZCB0aGUgbWFya3VwIHRvIHRoZSBzdHJpbmdcbiAgICAgICAgcGFnZXJIdG1sICs9ICc8ZGl2IGNsYXNzPVwiYngtcGFnZXItaXRlbVwiPjxhIGhyZWY9XCJcIiBkYXRhLXNsaWRlLWluZGV4PVwiJyArIGkgKyAnXCIgY2xhc3M9XCJieC1wYWdlci1saW5rXCI+JyArIGxpbmtDb250ZW50ICsgJzwvYT48L2Rpdj4nO1xuICAgICAgfVxuICAgICAgLy8gcG9wdWxhdGUgdGhlIHBhZ2VyIGVsZW1lbnQgd2l0aCBwYWdlciBsaW5rc1xuICAgICAgc2xpZGVyLnBhZ2VyRWwuaHRtbChwYWdlckh0bWwpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIHRoZSBwYWdlciB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuICAgICAqL1xuICAgIHZhciBhcHBlbmRQYWdlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHtcbiAgICAgICAgLy8gY3JlYXRlIHRoZSBwYWdlciBET00gZWxlbWVudFxuICAgICAgICBzbGlkZXIucGFnZXJFbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1wYWdlclwiIC8+Jyk7XG4gICAgICAgIC8vIGlmIGEgcGFnZXIgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBwYWdlclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2VsZWN0b3IpIHtcbiAgICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wYWdlclNlbGVjdG9yKS5odG1sKHNsaWRlci5wYWdlckVsKTtcbiAgICAgICAgLy8gaWYgbm8gcGFnZXIgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBhZGQgaXQgYWZ0ZXIgdGhlIHdyYXBwZXJcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1wYWdlcicpLmFwcGVuZChzbGlkZXIucGFnZXJFbCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcG9wdWxhdGUgdGhlIHBhZ2VyXG4gICAgICAgIHBvcHVsYXRlUGFnZXIoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlci5wYWdlckVsID0gJChzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pO1xuICAgICAgfVxuICAgICAgLy8gYXNzaWduIHRoZSBwYWdlciBjbGljayBiaW5kaW5nXG4gICAgICBzbGlkZXIucGFnZXJFbC5vbignY2xpY2sgdG91Y2hlbmQnLCAnYScsIGNsaWNrUGFnZXJCaW5kKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBwcmV2IC8gbmV4dCBjb250cm9scyB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuICAgICAqL1xuICAgIHZhciBhcHBlbmRDb250cm9scyA9IGZ1bmN0aW9uKCkge1xuICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQgPSAkKCc8YSBjbGFzcz1cImJ4LW5leHRcIiBocmVmPVwiXCI+JyArIHNsaWRlci5zZXR0aW5ncy5uZXh0VGV4dCArICc8L2E+Jyk7XG4gICAgICBzbGlkZXIuY29udHJvbHMucHJldiA9ICQoJzxhIGNsYXNzPVwiYngtcHJldlwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnByZXZUZXh0ICsgJzwvYT4nKTtcbiAgICAgIC8vIGJpbmQgY2xpY2sgYWN0aW9ucyB0byB0aGUgY29udHJvbHNcbiAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LmJpbmQoJ2NsaWNrIHRvdWNoZW5kJywgY2xpY2tOZXh0QmluZCk7XG4gICAgICBzbGlkZXIuY29udHJvbHMucHJldi5iaW5kKCdjbGljayB0b3VjaGVuZCcsIGNsaWNrUHJldkJpbmQpO1xuICAgICAgLy8gaWYgbmV4dFNlbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yKSB7XG4gICAgICAgICQoc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvcikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHByZXZTZWxlY3RvciB3YXMgc3VwcGxpZWQsIHBvcHVsYXRlIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcikge1xuICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5wcmV2U2VsZWN0b3IpLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldik7XG4gICAgICB9XG4gICAgICAvLyBpZiBubyBjdXN0b20gc2VsZWN0b3JzIHdlcmUgc3VwcGxpZWRcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvciAmJiAhc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcikge1xuICAgICAgICAvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET01cbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWRpcmVjdGlvblwiIC8+Jyk7XG4gICAgICAgIC8vIGFkZCB0aGUgY29udHJvbCBlbGVtZW50cyB0byB0aGUgZGlyZWN0aW9uRWxcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsLmFwcGVuZChzbGlkZXIuY29udHJvbHMucHJldikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcbiAgICAgICAgLy8gc2xpZGVyLnZpZXdwb3J0LmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpO1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1jb250cm9scy1kaXJlY3Rpb24nKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXBwZW5kcyBzdGFydCAvIHN0b3AgYXV0byBjb250cm9scyB0byB0aGUgY29udHJvbHMgZWxlbWVudFxuICAgICAqL1xuICAgIHZhciBhcHBlbmRDb250cm9sc0F1dG8gPSBmdW5jdGlvbigpIHtcbiAgICAgIHNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0YXJ0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgIHNsaWRlci5jb250cm9scy5zdG9wID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWF1dG8taXRlbVwiPjxhIGNsYXNzPVwiYngtc3RvcFwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnN0b3BUZXh0ICsgJzwvYT48L2Rpdj4nKTtcbiAgICAgIC8vIGFkZCB0aGUgY29udHJvbHMgdG8gdGhlIERPTVxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKTtcbiAgICAgIC8vIGJpbmQgY2xpY2sgYWN0aW9ucyB0byB0aGUgY29udHJvbHNcbiAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdGFydCcsIGNsaWNrU3RhcnRCaW5kKTtcbiAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdG9wJywgY2xpY2tTdG9wQmluZCk7XG4gICAgICAvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lLCBpbnNlcnQgb25seSB0aGUgXCJzdGFydFwiIGNvbnRyb2xcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzQ29tYmluZSkge1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmFwcGVuZChzbGlkZXIuY29udHJvbHMuc3RhcnQpO1xuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgaW5zZXJ0IGJvdGggY29udHJvbHNcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdGFydCkuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdG9wKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBjb250cm9sc1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNTZWxlY3Rvcikge1xuICAgICAgICAkKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNTZWxlY3RvcikuaHRtbChzbGlkZXIuY29udHJvbHMuYXV0b0VsKTtcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgc2VsZWN0b3Igd2FzIG5vdCBzdXBwbGllZCwgYWRkIGl0IGFmdGVyIHRoZSB3cmFwcGVyXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzbGlkZXIuY29udHJvbHMuZWwuYWRkQ2xhc3MoJ2J4LWhhcy1jb250cm9scy1hdXRvJykuYXBwZW5kKHNsaWRlci5jb250cm9scy5hdXRvRWwpO1xuICAgICAgfVxuICAgICAgLy8gdXBkYXRlIHRoZSBhdXRvIGNvbnRyb2xzXG4gICAgICB1cGRhdGVBdXRvQ29udHJvbHMoc2xpZGVyLnNldHRpbmdzLmF1dG9TdGFydCA/ICdzdG9wJyA6ICdzdGFydCcpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBcHBlbmRzIGltYWdlIGNhcHRpb25zIHRvIHRoZSBET01cbiAgICAgKi9cbiAgICB2YXIgYXBwZW5kQ2FwdGlvbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGN5Y2xlIHRocm91Z2ggZWFjaCBjaGlsZFxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgLy8gZ2V0IHRoZSBpbWFnZSB0aXRsZSBhdHRyaWJ1dGVcbiAgICAgICAgdmFyIHRpdGxlID0gJCh0aGlzKS5maW5kKCdpbWc6Zmlyc3QnKS5hdHRyKCd0aXRsZScpO1xuICAgICAgICAvLyBhcHBlbmQgdGhlIGNhcHRpb25cbiAgICAgICAgaWYgKHRpdGxlICE9PSB1bmRlZmluZWQgJiYgKCcnICsgdGl0bGUpLmxlbmd0aCkge1xuICAgICAgICAgICQodGhpcykuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiYngtY2FwdGlvblwiPjxzcGFuPicgKyB0aXRsZSArICc8L3NwYW4+PC9kaXY+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDbGljayBuZXh0IGJpbmRpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIGNsaWNrTmV4dEJpbmQgPSBmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmVsLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7IHJldHVybjsgfVxuICAgICAgLy8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3Muc3RvcEF1dG9PbkNsaWNrKSB7IGVsLnN0b3BBdXRvKCk7IH1cbiAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ2xpY2sgcHJldiBiaW5kaW5nXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHZhciBjbGlja1ByZXZCaW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5lbC5oYXNDbGFzcygnZGlzYWJsZWQnKSkgeyByZXR1cm47IH1cbiAgICAgIC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLnN0b3BBdXRvT25DbGljaykgeyBlbC5zdG9wQXV0bygpOyB9XG4gICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWNrIHN0YXJ0IGJpbmRpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIGNsaWNrU3RhcnRCaW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgZWwuc3RhcnRBdXRvKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWNrIHN0b3AgYmluZGluZ1xuICAgICAqXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB2YXIgY2xpY2tTdG9wQmluZCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGVsLnN0b3BBdXRvKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENsaWNrIHBhZ2VyIGJpbmRpbmdcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIGNsaWNrUGFnZXJCaW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIHBhZ2VyTGluaywgcGFnZXJJbmRleDtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAgJiYgc2xpZGVyLnNldHRpbmdzLnN0b3BBdXRvT25DbGljaykgeyBlbC5zdG9wQXV0bygpOyB9XG4gICAgICBwYWdlckxpbmsgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICBpZiAocGFnZXJMaW5rLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhZ2VySW5kZXggPSBwYXJzZUludChwYWdlckxpbmsuYXR0cignZGF0YS1zbGlkZS1pbmRleCcpKTtcbiAgICAgICAgLy8gaWYgY2xpY2tlZCBwYWdlciBsaW5rIGlzIG5vdCBhY3RpdmUsIGNvbnRpbnVlIHdpdGggdGhlIGdvVG9TbGlkZSBjYWxsXG4gICAgICAgIGlmIChwYWdlckluZGV4ICE9PSBzbGlkZXIuYWN0aXZlLmluZGV4KSB7IGVsLmdvVG9TbGlkZShwYWdlckluZGV4KTsgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBwYWdlciBsaW5rcyB3aXRoIGFuIGFjdGl2ZSBjbGFzc1xuICAgICAqXG4gICAgICogQHBhcmFtIHNsaWRlSW5kZXggKGludClcbiAgICAgKiAgLSBpbmRleCBvZiBzbGlkZSB0byBtYWtlIGFjdGl2ZVxuICAgICAqL1xuICAgIHZhciB1cGRhdGVQYWdlckFjdGl2ZSA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgpIHtcbiAgICAgIC8vIGlmIFwic2hvcnRcIiBwYWdlciB0eXBlXG4gICAgICB2YXIgbGVuID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgLy8gbmIgb2YgY2hpbGRyZW5cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXJUeXBlID09PSAnc2hvcnQnKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID4gMSkge1xuICAgICAgICAgIGxlbiA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVyLnBhZ2VyRWwuaHRtbCgoc2xpZGVJbmRleCArIDEpICsgc2xpZGVyLnNldHRpbmdzLnBhZ2VyU2hvcnRTZXBhcmF0b3IgKyBsZW4pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyByZW1vdmUgYWxsIHBhZ2VyIGFjdGl2ZSBjbGFzc2VzXG4gICAgICBzbGlkZXIucGFnZXJFbC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgLy8gYXBwbHkgdGhlIGFjdGl2ZSBjbGFzcyBmb3IgYWxsIHBhZ2Vyc1xuICAgICAgc2xpZGVyLnBhZ2VyRWwuZWFjaChmdW5jdGlvbihpLCBlbCkgeyAkKGVsKS5maW5kKCdhJykuZXEoc2xpZGVJbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpOyB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgbmVlZGVkIGFjdGlvbnMgYWZ0ZXIgYSBzbGlkZSB0cmFuc2l0aW9uXG4gICAgICovXG4gICAgdmFyIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBpbmZpbml0ZSBsb29wIGlzIHRydWVcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9ICcnO1xuICAgICAgICAvLyBmaXJzdCBzbGlkZVxuICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gMCkge1xuICAgICAgICAgIC8vIHNldCB0aGUgbmV3IHBvc2l0aW9uXG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoMCkucG9zaXRpb24oKTtcbiAgICAgICAgLy8gY2Fyb3VzZWwsIGxhc3Qgc2xpZGVcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBnZXRQYWdlclF0eSgpIC0gMSAmJiBzbGlkZXIuY2Fyb3VzZWwpIHtcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XG4gICAgICAgIC8vIGxhc3Qgc2xpZGVcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKS5wb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb3NpdGlvbikge1xuICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLmxlZnQsICdyZXNldCcsIDApOyB9XG4gICAgICAgICAgZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHsgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24udG9wLCAncmVzZXQnLCAwKTsgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBkZWNsYXJlIHRoYXQgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGVcbiAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XG4gICAgICAvLyBvblNsaWRlQWZ0ZXIgY2FsbGJhY2tcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5vblNsaWRlQWZ0ZXIuY2FsbChlbCwgc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBhdXRvIGNvbnRyb2xzIHN0YXRlIChlaXRoZXIgYWN0aXZlLCBvciBjb21iaW5lZCBzd2l0Y2gpXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGUgKHN0cmluZykgXCJzdGFydFwiLCBcInN0b3BcIlxuICAgICAqICAtIHRoZSBuZXcgc3RhdGUgb2YgdGhlIGF1dG8gc2hvd1xuICAgICAqL1xuICAgIHZhciB1cGRhdGVBdXRvQ29udHJvbHMgPSBmdW5jdGlvbihzdGF0ZSkge1xuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyB0cnVlLCByZXBsYWNlIHRoZSBjdXJyZW50IGNvbnRyb2wgd2l0aCB0aGUgbmV3IHN0YXRlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc0NvbWJpbmUpIHtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5odG1sKHNsaWRlci5jb250cm9sc1tzdGF0ZV0pO1xuICAgICAgLy8gaWYgYXV0b0NvbnRyb2xzQ29tYmluZSBpcyBmYWxzZSwgYXBwbHkgdGhlIFwiYWN0aXZlXCIgY2xhc3MgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbnRyb2xcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuZmluZCgnYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5maW5kKCdhOm5vdCguYngtJyArIHN0YXRlICsgJyknKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiBjb250cm9scyAoY2hlY2tzIGlmIGVpdGhlciBzaG91bGQgYmUgaGlkZGVuKVxuICAgICAqL1xuICAgIHZhciB1cGRhdGVEaXJlY3Rpb25Db250cm9scyA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKGdldFBhZ2VyUXR5KCkgPT09IDEpIHtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLnByZXYuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgfSBlbHNlIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuc2V0dGluZ3MuaGlkZUNvbnRyb2xPbkVuZCkge1xuICAgICAgICAvLyBpZiBmaXJzdCBzbGlkZVxuICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gMCkge1xuICAgICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAvLyBpZiBsYXN0IHNsaWRlXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gZ2V0UGFnZXJRdHkoKSAtIDEpIHtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgLy8gaWYgYW55IHNsaWRlIGluIHRoZSBtaWRkbGVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgYXV0byBwcm9jZXNzXG4gICAgICovXG4gICAgdmFyIGluaXRBdXRvID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBhdXRvRGVsYXkgd2FzIHN1cHBsaWVkLCBsYXVuY2ggdGhlIGF1dG8gc2hvdyB1c2luZyBhIHNldFRpbWVvdXQoKSBjYWxsXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSA+IDApIHtcbiAgICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGVsLnN0YXJ0QXV0bywgc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSk7XG4gICAgICAvLyBpZiBhdXRvRGVsYXkgd2FzIG5vdCBzdXBwbGllZCwgc3RhcnQgdGhlIGF1dG8gc2hvdyBub3JtYWxseVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc3RhcnRBdXRvKCk7XG5cbiAgICAgICAgLy9hZGQgZm9jdXMgYW5kIGJsdXIgZXZlbnRzIHRvIGVuc3VyZSBpdHMgcnVubmluZyBpZiB0aW1lb3V0IGdldHMgcGF1c2VkXG4gICAgICAgICQod2luZG93KS5mb2N1cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbC5zdGFydEF1dG8oKTtcbiAgICAgICAgfSkuYmx1cihmdW5jdGlvbigpIHtcbiAgICAgICAgICBlbC5zdG9wQXV0bygpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0hvdmVyKSB7XG4gICAgICAgIC8vIG9uIGVsIGhvdmVyXG4gICAgICAgIGVsLmhvdmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIGlmIHRoZSBhdXRvIHNob3cgaXMgY3VycmVudGx5IHBsYXlpbmcgKGhhcyBhbiBhY3RpdmUgaW50ZXJ2YWwpXG4gICAgICAgICAgaWYgKHNsaWRlci5pbnRlcnZhbCkge1xuICAgICAgICAgICAgLy8gc3RvcCB0aGUgYXV0byBzaG93IGFuZCBwYXNzIHRydWUgYXJndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlXG4gICAgICAgICAgICBlbC5zdG9wQXV0byh0cnVlKTtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIG5ldyBhdXRvUGF1c2VkIHZhbHVlIHdoaWNoIHdpbGwgYmUgdXNlZCBieSB0aGUgcmVsYXRpdmUgXCJtb3VzZW91dFwiIGV2ZW50XG4gICAgICAgICAgICBzbGlkZXIuYXV0b1BhdXNlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyBpZiB0aGUgYXV0b1BhdXNlZCB2YWx1ZSB3YXMgY3JlYXRlZCBiZSB0aGUgcHJpb3IgXCJtb3VzZW92ZXJcIiBldmVudFxuICAgICAgICAgIGlmIChzbGlkZXIuYXV0b1BhdXNlZCkge1xuICAgICAgICAgICAgLy8gc3RhcnQgdGhlIGF1dG8gc2hvdyBhbmQgcGFzcyB0cnVlIGFyZ3VtZW50IHdoaWNoIHdpbGwgcHJldmVudCBjb250cm9sIHVwZGF0ZVxuICAgICAgICAgICAgZWwuc3RhcnRBdXRvKHRydWUpO1xuICAgICAgICAgICAgLy8gcmVzZXQgdGhlIGF1dG9QYXVzZWQgdmFsdWVcbiAgICAgICAgICAgIHNsaWRlci5hdXRvUGF1c2VkID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgdGlja2VyIHByb2Nlc3NcbiAgICAgKi9cbiAgICB2YXIgaW5pdFRpY2tlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHN0YXJ0UG9zaXRpb24gPSAwLFxuICAgICAgcG9zaXRpb24sIHRyYW5zZm9ybSwgdmFsdWUsIGlkeCwgcmF0aW8sIHByb3BlcnR5LCBuZXdTcGVlZCwgdG90YWxEaW1lbnM7XG4gICAgICAvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwibmV4dFwiLCBhcHBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgZWwuYXBwZW5kKHNsaWRlci5jaGlsZHJlbi5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpKTtcbiAgICAgIC8vIGlmIGF1dG9EaXJlY3Rpb24gaXMgXCJwcmV2XCIsIHByZXBlbmQgYSBjbG9uZSBvZiB0aGUgZW50aXJlIHNsaWRlciwgYW5kIHNldCB0aGUgbGVmdCBwb3NpdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwucHJlcGVuZChzbGlkZXIuY2hpbGRyZW4uY2xvbmUoKS5hZGRDbGFzcygnYngtY2xvbmUnKSk7XG4gICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmZpcnN0KCkucG9zaXRpb24oKTtcbiAgICAgICAgc3RhcnRQb3NpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcG9zaXRpb24ubGVmdCA6IC1wb3NpdGlvbi50b3A7XG4gICAgICB9XG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHN0YXJ0UG9zaXRpb24sICdyZXNldCcsIDApO1xuICAgICAgLy8gZG8gbm90IGFsbG93IGNvbnRyb2xzIGluIHRpY2tlciBtb2RlXG4gICAgICBzbGlkZXIuc2V0dGluZ3MucGFnZXIgPSBmYWxzZTtcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5jb250cm9scyA9IGZhbHNlO1xuICAgICAgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyA9IGZhbHNlO1xuICAgICAgLy8gaWYgYXV0b0hvdmVyIGlzIHJlcXVlc3RlZFxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50aWNrZXJIb3Zlcikge1xuICAgICAgICBpZiAoc2xpZGVyLnVzaW5nQ1NTKSB7XG4gICAgICAgICAgaWR4ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IDQgOiA1O1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2Zvcm0nKTtcbiAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh0cmFuc2Zvcm0uc3BsaXQoJywnKVtpZHhdKTtcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDApO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdG90YWxEaW1lbnMgPSAwO1xuICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgdG90YWxEaW1lbnMgKz0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8gKHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBuZXcgc3BlZWQgdG8gZmluaXNoIHRoZSBwYXVzZWQgYW5pbWF0aW9uKVxuICAgICAgICAgICAgcmF0aW8gPSBzbGlkZXIuc2V0dGluZ3Muc3BlZWQgLyB0b3RhbERpbWVucztcbiAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm9wZXJ0eSB0byB1c2VcbiAgICAgICAgICAgIHByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBuZXcgc3BlZWRcbiAgICAgICAgICAgIG5ld1NwZWVkID0gcmF0aW8gKiAodG90YWxEaW1lbnMgLSAoTWF0aC5hYnMocGFyc2VJbnQodmFsdWUpKSkpO1xuICAgICAgICAgICAgdGlja2VyTG9vcChuZXdTcGVlZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb24gZWwgaG92ZXJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBlbC5zdG9wKCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHRvdGFsIHdpZHRoIG9mIGNoaWxkcmVuICh1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8pXG4gICAgICAgICAgICB0b3RhbERpbWVucyA9IDA7XG4gICAgICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICB0b3RhbERpbWVucyArPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJCh0aGlzKS5vdXRlcldpZHRoKHRydWUpIDogJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBzcGVlZCByYXRpbyAodXNlZCB0byBkZXRlcm1pbmUgdGhlIG5ldyBzcGVlZCB0byBmaW5pc2ggdGhlIHBhdXNlZCBhbmltYXRpb24pXG4gICAgICAgICAgICByYXRpbyA9IHNsaWRlci5zZXR0aW5ncy5zcGVlZCAvIHRvdGFsRGltZW5zO1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZVxuICAgICAgICAgICAgcHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJ2xlZnQnIDogJ3RvcCc7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBzcGVlZFxuICAgICAgICAgICAgbmV3U3BlZWQgPSByYXRpbyAqICh0b3RhbERpbWVucyAtIChNYXRoLmFicyhwYXJzZUludChlbC5jc3MocHJvcGVydHkpKSkpKTtcbiAgICAgICAgICAgIHRpY2tlckxvb3AobmV3U3BlZWQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBzdGFydCB0aGUgdGlja2VyIGxvb3BcbiAgICAgIHRpY2tlckxvb3AoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUnVucyBhIGNvbnRpbnVvdXMgbG9vcCwgbmV3cyB0aWNrZXItc3R5bGVcbiAgICAgKi9cbiAgICB2YXIgdGlja2VyTG9vcCA9IGZ1bmN0aW9uKHJlc3VtZVNwZWVkKSB7XG4gICAgICB2YXIgc3BlZWQgPSByZXN1bWVTcGVlZCA/IHJlc3VtZVNwZWVkIDogc2xpZGVyLnNldHRpbmdzLnNwZWVkLFxuICAgICAgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSxcbiAgICAgIHJlc2V0ID0ge2xlZnQ6IDAsIHRvcDogMH0sXG4gICAgICBhbmltYXRlUHJvcGVydHksIHJlc2V0VmFsdWUsIHBhcmFtcztcblxuICAgICAgLy8gaWYgXCJuZXh0XCIgYW5pbWF0ZSBsZWZ0IHBvc2l0aW9uIHRvIGxhc3QgY2hpbGQsIHRoZW4gcmVzZXQgbGVmdCB0byAwXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICBwb3NpdGlvbiA9IGVsLmZpbmQoJy5ieC1jbG9uZScpLmZpcnN0KCkucG9zaXRpb24oKTtcbiAgICAgIC8vIGlmIFwicHJldlwiIGFuaW1hdGUgbGVmdCBwb3NpdGlvbiB0byAwLCB0aGVuIHJlc2V0IGxlZnQgdG8gZmlyc3Qgbm9uLWNsb25lIGNoaWxkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XG4gICAgICB9XG4gICAgICBhbmltYXRlUHJvcGVydHkgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gLXBvc2l0aW9uLmxlZnQgOiAtcG9zaXRpb24udG9wO1xuICAgICAgcmVzZXRWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7XG4gICAgICBwYXJhbXMgPSB7cmVzZXRWYWx1ZTogcmVzZXRWYWx1ZX07XG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KGFuaW1hdGVQcm9wZXJ0eSwgJ3RpY2tlcicsIHNwZWVkLCBwYXJhbXMpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBlbCBpcyBvbiBzY3JlZW5cbiAgICAgKi9cbiAgICB2YXIgaXNPblNjcmVlbiA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICB2YXIgd2luID0gJCh3aW5kb3cpLFxuICAgICAgdmlld3BvcnQgPSB7XG4gICAgICAgIHRvcDogd2luLnNjcm9sbFRvcCgpLFxuICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXG4gICAgICB9LFxuICAgICAgYm91bmRzID0gZWwub2Zmc2V0KCk7XG5cbiAgICAgIHZpZXdwb3J0LnJpZ2h0ID0gdmlld3BvcnQubGVmdCArIHdpbi53aWR0aCgpO1xuICAgICAgdmlld3BvcnQuYm90dG9tID0gdmlld3BvcnQudG9wICsgd2luLmhlaWdodCgpO1xuICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyBlbC5vdXRlcldpZHRoKCk7XG4gICAgICBib3VuZHMuYm90dG9tID0gYm91bmRzLnRvcCArIGVsLm91dGVySGVpZ2h0KCk7XG5cbiAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGtleWJvYXJkIGV2ZW50c1xuICAgICAqL1xuICAgIHZhciBrZXlQcmVzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHZhciBhY3RpdmVFbGVtZW50VGFnID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICB0YWdGaWx0ZXJzID0gJ2lucHV0fHRleHRhcmVhJyxcbiAgICAgIHAgPSBuZXcgUmVnRXhwKGFjdGl2ZUVsZW1lbnRUYWcsWydpJ10pLFxuICAgICAgcmVzdWx0ID0gcC5leGVjKHRhZ0ZpbHRlcnMpO1xuXG4gICAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgaXNPblNjcmVlbihlbCkpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICBjbGlja05leHRCaW5kKGUpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XG4gICAgICAgICAgY2xpY2tQcmV2QmluZChlKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdG91Y2ggZXZlbnRzXG4gICAgICovXG4gICAgdmFyIGluaXRUb3VjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gaW5pdGlhbGl6ZSBvYmplY3QgdG8gY29udGFpbiBhbGwgdG91Y2ggdmFsdWVzXG4gICAgICBzbGlkZXIudG91Y2ggPSB7XG4gICAgICAgIHN0YXJ0OiB7eDogMCwgeTogMH0sXG4gICAgICAgIGVuZDoge3g6IDAsIHk6IDB9XG4gICAgICB9O1xuICAgICAgc2xpZGVyLnZpZXdwb3J0LmJpbmQoJ3RvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93bicsIG9uVG91Y2hTdGFydCk7XG5cbiAgICAgIC8vZm9yIGJyb3dzZXJzIHRoYXQgaGF2ZSBpbXBsZW1lbnRlZCBwb2ludGVyIGV2ZW50cyBhbmQgZmlyZSBhIGNsaWNrIGFmdGVyXG4gICAgICAvL2V2ZXJ5IHBvaW50ZXJ1cCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgcG9pbnRlcnVwIGlzIG9uIHNhbWUgc2NyZWVuIGxvY2F0aW9uIGFzIHBvaW50ZXJkb3duIG9yIG5vdFxuICAgICAgc2xpZGVyLnZpZXdwb3J0Lm9uKCdjbGljaycsICcuYnhzbGlkZXIgYScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5oYXNDbGFzcygnY2xpY2stZGlzYWJsZWQnKSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQucmVtb3ZlQ2xhc3MoJ2NsaWNrLWRpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNoc3RhcnRcIlxuICAgICAqXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB2YXIgb25Ub3VjaFN0YXJ0ID0gZnVuY3Rpb24oZSkge1xuICAgICAgLy9kaXNhYmxlIHNsaWRlciBjb250cm9scyB3aGlsZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggc2xpZGVzIHRvIGF2b2lkIHNsaWRlciBmcmVlemUgdGhhdCBoYXBwZW5zIG9uIHRvdWNoIGRldmljZXMgd2hlbiBhIHNsaWRlIHN3aXBlIGhhcHBlbnMgaW1tZWRpYXRlbHkgYWZ0ZXIgaW50ZXJhY3Rpbmcgd2l0aCBzbGlkZXIgY29udHJvbHNcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgaWYgKHNsaWRlci53b3JraW5nKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVjb3JkIHRoZSBvcmlnaW5hbCBwb3NpdGlvbiB3aGVuIHRvdWNoIHN0YXJ0c1xuICAgICAgICBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MgPSBlbC5wb3NpdGlvbigpO1xuICAgICAgICB2YXIgb3JpZyA9IGUub3JpZ2luYWxFdmVudCxcbiAgICAgICAgdG91Y2hQb2ludHMgPSAodHlwZW9mIG9yaWcuY2hhbmdlZFRvdWNoZXMgIT09ICd1bmRlZmluZWQnKSA/IG9yaWcuY2hhbmdlZFRvdWNoZXMgOiBbb3JpZ107XG4gICAgICAgIC8vIHJlY29yZCB0aGUgc3RhcnRpbmcgdG91Y2ggeCwgeSBjb29yZGluYXRlc1xuICAgICAgICBzbGlkZXIudG91Y2guc3RhcnQueCA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYO1xuICAgICAgICBzbGlkZXIudG91Y2guc3RhcnQueSA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VZO1xuXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuZ2V0KDApLnNldFBvaW50ZXJDYXB0dXJlKSB7XG4gICAgICAgICAgc2xpZGVyLnBvaW50ZXJJZCA9IG9yaWcucG9pbnRlcklkO1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkuc2V0UG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYmluZCBhIFwidG91Y2htb3ZlXCIgZXZlbnQgdG8gdGhlIHZpZXdwb3J0XG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcbiAgICAgICAgLy8gYmluZCBhIFwidG91Y2hlbmRcIiBldmVudCB0byB0aGUgdmlld3BvcnRcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmJpbmQoJ3RvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cCcsIG9uVG91Y2hFbmQpO1xuICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgnTVNQb2ludGVyQ2FuY2VsIHBvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWwgUG9pbnRlciBmb3IgV2luZG93cyBQaG9uZVxuICAgICAqXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcbiAgICAgKi9cbiAgICB2YXIgb25Qb2ludGVyQ2FuY2VsID0gZnVuY3Rpb24oZSkge1xuICAgICAgLyogb25Qb2ludGVyQ2FuY2VsIGhhbmRsZXIgaXMgbmVlZGVkIHRvIGRlYWwgd2l0aCBzaXR1YXRpb25zIHdoZW4gYSB0b3VjaGVuZFxuICAgICAgZG9lc24ndCBmaXJlIGFmdGVyIGEgdG91Y2hzdGFydCAodGhpcyBoYXBwZW5zIG9uIHdpbmRvd3MgcGhvbmVzIG9ubHkpICovXG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0LCAncmVzZXQnLCAwKTtcblxuICAgICAgLy9yZW1vdmUgaGFuZGxlcnNcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ01TUG9pbnRlckNhbmNlbCBwb2ludGVyY2FuY2VsJywgb25Qb2ludGVyQ2FuY2VsKTtcbiAgICAgIHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ3RvdWNobW92ZSBNU1BvaW50ZXJNb3ZlIHBvaW50ZXJtb3ZlJywgb25Ub3VjaE1vdmUpO1xuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XG4gICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUpIHtcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIFwidG91Y2htb3ZlXCJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBlIChldmVudClcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdmFyIG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIG9yaWcgPSBlLm9yaWdpbmFsRXZlbnQsXG4gICAgICB0b3VjaFBvaW50cyA9ICh0eXBlb2Ygb3JpZy5jaGFuZ2VkVG91Y2hlcyAhPT0gJ3VuZGVmaW5lZCcpID8gb3JpZy5jaGFuZ2VkVG91Y2hlcyA6IFtvcmlnXSxcbiAgICAgIC8vIGlmIHNjcm9sbGluZyBvbiB5IGF4aXMsIGRvIG5vdCBwcmV2ZW50IGRlZmF1bHRcbiAgICAgIHhNb3ZlbWVudCA9IE1hdGguYWJzKHRvdWNoUG9pbnRzWzBdLnBhZ2VYIC0gc2xpZGVyLnRvdWNoLnN0YXJ0LngpLFxuICAgICAgeU1vdmVtZW50ID0gTWF0aC5hYnModG91Y2hQb2ludHNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueSksXG4gICAgICB2YWx1ZSA9IDAsXG4gICAgICBjaGFuZ2UgPSAwO1xuXG4gICAgICAvLyB4IGF4aXMgc3dpcGVcbiAgICAgIGlmICgoeE1vdmVtZW50ICogMykgPiB5TW92ZW1lbnQgJiYgc2xpZGVyLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVYKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vIHkgYXhpcyBzd2lwZVxuICAgICAgfSBlbHNlIGlmICgoeU1vdmVtZW50ICogMykgPiB4TW92ZW1lbnQgJiYgc2xpZGVyLnNldHRpbmdzLnByZXZlbnREZWZhdWx0U3dpcGVZKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ2ZhZGUnICYmIHNsaWRlci5zZXR0aW5ncy5vbmVUb09uZVRvdWNoKSB7XG4gICAgICAgIC8vIGlmIGhvcml6b250YWwsIGRyYWcgYWxvbmcgeCBheGlzXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgY2hhbmdlID0gdG91Y2hQb2ludHNbMF0ucGFnZVggLSBzbGlkZXIudG91Y2guc3RhcnQueDtcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0ICsgY2hhbmdlO1xuICAgICAgICAvLyBpZiB2ZXJ0aWNhbCwgZHJhZyBhbG9uZyB5IGF4aXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGFuZ2UgPSB0b3VjaFBvaW50c1swXS5wYWdlWSAtIHNsaWRlci50b3VjaC5zdGFydC55O1xuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLnRvcCArIGNoYW5nZTtcbiAgICAgICAgfVxuICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAwKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgXCJ0b3VjaGVuZFwiXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHZhciBvblRvdWNoRW5kID0gZnVuY3Rpb24oZSkge1xuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2htb3ZlIE1TUG9pbnRlck1vdmUgcG9pbnRlcm1vdmUnLCBvblRvdWNoTW92ZSk7XG4gICAgICAvL2VuYWJsZSBzbGlkZXIgY29udHJvbHMgYXMgc29vbiBhcyB1c2VyIHN0b3BzIGludGVyYWNpbmcgd2l0aCBzbGlkZXNcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgIHZhciBvcmlnICAgID0gZS5vcmlnaW5hbEV2ZW50LFxuICAgICAgdG91Y2hQb2ludHMgPSAodHlwZW9mIG9yaWcuY2hhbmdlZFRvdWNoZXMgIT09ICd1bmRlZmluZWQnKSA/IG9yaWcuY2hhbmdlZFRvdWNoZXMgOiBbb3JpZ10sXG4gICAgICB2YWx1ZSAgICAgICA9IDAsXG4gICAgICBkaXN0YW5jZSAgICA9IDA7XG4gICAgICAvLyByZWNvcmQgZW5kIHgsIHkgcG9zaXRpb25zXG4gICAgICBzbGlkZXIudG91Y2guZW5kLnggPSB0b3VjaFBvaW50c1swXS5wYWdlWDtcbiAgICAgIHNsaWRlci50b3VjaC5lbmQueSA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VZO1xuICAgICAgLy8gaWYgZmFkZSBtb2RlLCBjaGVjayBpZiBhYnNvbHV0ZSB4IGRpc3RhbmNlIGNsZWFycyB0aGUgdGhyZXNob2xkXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xuICAgICAgICBkaXN0YW5jZSA9IE1hdGguYWJzKHNsaWRlci50b3VjaC5zdGFydC54IC0gc2xpZGVyLnRvdWNoLmVuZC54KTtcbiAgICAgICAgaWYgKGRpc3RhbmNlID49IHNsaWRlci5zZXR0aW5ncy5zd2lwZVRocmVzaG9sZCkge1xuICAgICAgICAgIGlmIChzbGlkZXIudG91Y2guc3RhcnQueCA+IHNsaWRlci50b3VjaC5lbmQueCkge1xuICAgICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsLnN0b3BBdXRvKCk7XG4gICAgICAgIH1cbiAgICAgIC8vIG5vdCBmYWRlIG1vZGVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBkaXN0YW5jZSBhbmQgZWwncyBhbmltYXRlIHByb3BlcnR5XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XG4gICAgICAgICAgZGlzdGFuY2UgPSBzbGlkZXIudG91Y2guZW5kLnggLSBzbGlkZXIudG91Y2guc3RhcnQueDtcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC55IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lnk7XG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wO1xuICAgICAgICB9XG4gICAgICAgIC8vIGlmIG5vdCBpbmZpbml0ZSBsb29wIGFuZCBmaXJzdCAvIGxhc3Qgc2xpZGUsIGRvIG5vdCBhdHRlbXB0IGEgc2xpZGUgdHJhbnNpdGlvblxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgKChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwICYmIGRpc3RhbmNlID4gMCkgfHwgKHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXN0YW5jZSA8IDApKSkge1xuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgZGlzdGFuY2UgY2xlYXJzIHRocmVzaG9sZFxuICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0YW5jZSkgPj0gc2xpZGVyLnNldHRpbmdzLnN3aXBlVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCAwKSB7XG4gICAgICAgICAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsLmdvVG9QcmV2U2xpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsLnN0b3BBdXRvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVsLmFuaW1hdGUocHJvcGVydHksIDIwMCk7XG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAyMDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XG4gICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUpIHtcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUoc2xpZGVyLnBvaW50ZXJJZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFdpbmRvdyByZXNpemUgZXZlbnQgY2FsbGJhY2tcbiAgICAgKi9cbiAgICB2YXIgcmVzaXplV2luZG93ID0gZnVuY3Rpb24oZSkge1xuICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc2xpZGVyIGlzbid0IGluaXRpYWxpemVkLlxuICAgICAgaWYgKCFzbGlkZXIuaW5pdGlhbGl6ZWQpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBEZWxheSBpZiBzbGlkZXIgd29ya2luZy5cbiAgICAgIGlmIChzbGlkZXIud29ya2luZykge1xuICAgICAgICB3aW5kb3cuc2V0VGltZW91dChyZXNpemVXaW5kb3csIDEwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGdldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnMgKGFnYWluLCB0aGFuayB5b3UgSUUpXG4gICAgICAgIHZhciB3aW5kb3dXaWR0aE5ldyA9ICQod2luZG93KS53aWR0aCgpLFxuICAgICAgICB3aW5kb3dIZWlnaHROZXcgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IGl0IGlzIGEgdHJ1ZSB3aW5kb3cgcmVzaXplXG4gICAgICAgIC8vICp3ZSBtdXN0IGNoZWNrIHRoaXMgYmVjYXVzZSBvdXIgZGlub3NhdXIgZnJpZW5kIElFIGZpcmVzIGEgd2luZG93IHJlc2l6ZSBldmVudCB3aGVuIGNlcnRhaW4gRE9NIGVsZW1lbnRzXG4gICAgICAgIC8vIGFyZSByZXNpemVkLiBDYW4geW91IGp1c3QgZGllIGFscmVhZHk/KlxuICAgICAgICBpZiAod2luZG93V2lkdGggIT09IHdpbmRvd1dpZHRoTmV3IHx8IHdpbmRvd0hlaWdodCAhPT0gd2luZG93SGVpZ2h0TmV3KSB7XG4gICAgICAgICAgLy8gc2V0IHRoZSBuZXcgd2luZG93IGRpbWVuc1xuICAgICAgICAgIHdpbmRvd1dpZHRoID0gd2luZG93V2lkdGhOZXc7XG4gICAgICAgICAgd2luZG93SGVpZ2h0ID0gd2luZG93SGVpZ2h0TmV3O1xuICAgICAgICAgIC8vIHVwZGF0ZSBhbGwgZHluYW1pYyBlbGVtZW50c1xuICAgICAgICAgIGVsLnJlZHJhd1NsaWRlcigpO1xuICAgICAgICAgIC8vIENhbGwgdXNlciByZXNpemUgaGFuZGxlclxuICAgICAgICAgIHNsaWRlci5zZXR0aW5ncy5vblNsaWRlclJlc2l6ZS5jYWxsKGVsLCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGFyaWEtaGlkZGVuPXRydWUgYXR0cmlidXRlIHRvIGVhY2ggZWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHN0YXJ0VmlzaWJsZUluZGV4IChpbnQpXG4gICAgICogIC0gdGhlIGZpcnN0IHZpc2libGUgZWxlbWVudCdzIGluZGV4XG4gICAgICovXG4gICAgdmFyIGFwcGx5QXJpYUhpZGRlbkF0dHJpYnV0ZXMgPSBmdW5jdGlvbihzdGFydFZpc2libGVJbmRleCkge1xuICAgICAgdmFyIG51bWJlck9mU2xpZGVzU2hvd2luZyA9IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcbiAgICAgIC8vIG9ubHkgYXBwbHkgYXR0cmlidXRlcyBpZiB0aGUgc2V0dGluZyBpcyBlbmFibGVkIGFuZCBub3QgaW4gdGlja2VyIG1vZGVcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUhpZGRlbiAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xuICAgICAgICAvLyBhZGQgYXJpYS1oaWRkZW49dHJ1ZSB0byBhbGwgZWxlbWVudHNcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgICAgICAgLy8gZ2V0IHRoZSB2aXNpYmxlIGVsZW1lbnRzIGFuZCBjaGFuZ2UgdG8gYXJpYS1oaWRkZW49ZmFsc2VcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLnNsaWNlKHN0YXJ0VmlzaWJsZUluZGV4LCBzdGFydFZpc2libGVJbmRleCArIG51bWJlck9mU2xpZGVzU2hvd2luZykuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBpbmRleCBhY2NvcmRpbmcgdG8gcHJlc2VudCBwYWdlIHJhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2xpZGVPbmRleCAoaW50KVxuICAgICAqICAtIHRoZSBkZXNpcmVkIHNsaWRlIGluZGV4XG4gICAgICovXG4gICAgdmFyIHNldFNsaWRlSW5kZXggPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XG4gICAgICBpZiAoc2xpZGVJbmRleCA8IDApIHtcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApIHtcbiAgICAgICAgICByZXR1cm4gZ2V0UGFnZXJRdHkoKSAtIDE7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAvL3dlIGRvbid0IGdvIHRvIHVuZGVmaW5lZCBzbGlkZXNcbiAgICAgICAgICByZXR1cm4gc2xpZGVyLmFjdGl2ZS5pbmRleDtcbiAgICAgICAgfVxuICAgICAgLy8gaWYgc2xpZGVJbmRleCBpcyBncmVhdGVyIHRoYW4gY2hpbGRyZW4gbGVuZ3RoLCBzZXQgYWN0aXZlIGluZGV4IHRvIDAgKHRoaXMgaGFwcGVucyBkdXJpbmcgaW5maW5pdGUgbG9vcClcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVJbmRleCA+PSBnZXRQYWdlclF0eSgpKSB7XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy93ZSBkb24ndCBtb3ZlIHRvIHVuZGVmaW5lZCBwYWdlc1xuICAgICAgICAgIHJldHVybiBzbGlkZXIuYWN0aXZlLmluZGV4O1xuICAgICAgICB9XG4gICAgICAvLyBzZXQgYWN0aXZlIGluZGV4IHRvIHJlcXVlc3RlZCBzbGlkZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNsaWRlSW5kZXg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogPSBQVUJMSUMgRlVOQ1RJT05TXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgKi9cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIHNsaWRlIHRyYW5zaXRpb24gdG8gdGhlIHNwZWNpZmllZCBzbGlkZVxuICAgICAqXG4gICAgICogQHBhcmFtIHNsaWRlSW5kZXggKGludClcbiAgICAgKiAgLSB0aGUgZGVzdGluYXRpb24gc2xpZGUncyBpbmRleCAoemVyby1iYXNlZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gKHN0cmluZylcbiAgICAgKiAgLSBJTlRFUk5BTCBVU0UgT05MWSAtIHRoZSBkaXJlY3Rpb24gb2YgdHJhdmVsIChcInByZXZcIiAvIFwibmV4dFwiKVxuICAgICAqL1xuICAgIGVsLmdvVG9TbGlkZSA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgsIGRpcmVjdGlvbikge1xuICAgICAgLy8gb25TbGlkZUJlZm9yZSwgb25TbGlkZU5leHQsIG9uU2xpZGVQcmV2IGNhbGxiYWNrc1xuICAgICAgLy8gQWxsb3cgdHJhbnNpdGlvbiBjYW5jZWxpbmcgYmFzZWQgb24gcmV0dXJuZWQgdmFsdWVcbiAgICAgIHZhciBwZXJmb3JtVHJhbnNpdGlvbiA9IHRydWUsXG4gICAgICBtb3ZlQnkgPSAwLFxuICAgICAgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSxcbiAgICAgIGxhc3RDaGlsZCA9IG51bGwsXG4gICAgICBsYXN0U2hvd2luZ0luZGV4LCBlcSwgdmFsdWUsIHJlcXVlc3RFbDtcbiAgICAgIC8vIHN0b3JlIHRoZSBvbGQgaW5kZXhcbiAgICAgIHNsaWRlci5vbGRJbmRleCA9IHNsaWRlci5hY3RpdmUuaW5kZXg7XG4gICAgICAvL3NldCBuZXcgaW5kZXhcbiAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSBzZXRTbGlkZUluZGV4KHNsaWRlSW5kZXgpO1xuXG4gICAgICAvLyBpZiBwbHVnaW4gaXMgY3VycmVudGx5IGluIG1vdGlvbiwgaWdub3JlIHJlcXVlc3RcbiAgICAgIGlmIChzbGlkZXIud29ya2luZyB8fCBzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBzbGlkZXIub2xkSW5kZXgpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBkZWNsYXJlIHRoYXQgcGx1Z2luIGlzIGluIG1vdGlvblxuICAgICAgc2xpZGVyLndvcmtpbmcgPSB0cnVlO1xuXG4gICAgICBwZXJmb3JtVHJhbnNpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5vblNsaWRlQmVmb3JlLmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcblxuICAgICAgLy8gSWYgdHJhbnNpdGlvbnMgY2FuY2VsZWQsIHJlc2V0IGFuZCByZXR1cm5cbiAgICAgIGlmICh0eXBlb2YgKHBlcmZvcm1UcmFuc2l0aW9uKSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXBlcmZvcm1UcmFuc2l0aW9uKSB7XG4gICAgICAgIHNsaWRlci5hY3RpdmUuaW5kZXggPSBzbGlkZXIub2xkSW5kZXg7IC8vIHJlc3RvcmUgb2xkIGluZGV4XG4gICAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7IC8vIGlzIG5vdCBpbiBtb3Rpb25cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgLy8gUHJldmVudCBjYW5jZWxpbmcgaW4gZnV0dXJlIGZ1bmN0aW9ucyBvciBsYWNrIHRoZXJlLW9mIGZyb20gbmVnYXRpbmcgcHJldmlvdXMgY29tbWFuZHMgdG8gY2FuY2VsXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVOZXh0LmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KSkge1xuICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAncHJldicpIHtcbiAgICAgICAgLy8gUHJldmVudCBjYW5jZWxpbmcgaW4gZnV0dXJlIGZ1bmN0aW9ucyBvciBsYWNrIHRoZXJlLW9mIGZyb20gbmVnYXRpbmcgcHJldmlvdXMgY29tbWFuZHMgdG8gY2FuY2VsXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVQcmV2LmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KSkge1xuICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgaWYgbGFzdCBzbGlkZVxuICAgICAgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gc2xpZGVyLmFjdGl2ZS5pbmRleCA+PSBnZXRQYWdlclF0eSgpIC0gMTtcbiAgICAgIC8vIHVwZGF0ZSB0aGUgcGFnZXIgd2l0aCBhY3RpdmUgY2xhc3NcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIgfHwgc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7IHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpOyB9XG4gICAgICAvLyAvLyBjaGVjayBmb3IgZGlyZWN0aW9uIGNvbnRyb2wgdXBkYXRlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB7IHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzKCk7IH1cbiAgICAgIC8vIGlmIHNsaWRlciBpcyBzZXQgdG8gbW9kZTogXCJmYWRlXCJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2ZhZGUnKSB7XG4gICAgICAgIC8vIGlmIGFkYXB0aXZlSGVpZ2h0IGlzIHRydWUgYW5kIG5leHQgaGVpZ2h0IGlzIGRpZmZlcmVudCBmcm9tIGN1cnJlbnQgaGVpZ2h0LCBhbmltYXRlIHRvIHRoZSBuZXcgaGVpZ2h0XG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgJiYgc2xpZGVyLnZpZXdwb3J0LmhlaWdodCgpICE9PSBnZXRWaWV3cG9ydEhlaWdodCgpKSB7XG4gICAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmFuaW1hdGUoe2hlaWdodDogZ2V0Vmlld3BvcnRIZWlnaHQoKX0sIHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodFNwZWVkKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBmYWRlIG91dCB0aGUgdmlzaWJsZSBjaGlsZCBhbmQgcmVzZXQgaXRzIHotaW5kZXggdmFsdWVcbiAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmZpbHRlcignOnZpc2libGUnKS5mYWRlT3V0KHNsaWRlci5zZXR0aW5ncy5zcGVlZCkuY3NzKHt6SW5kZXg6IDB9KTtcbiAgICAgICAgLy8gZmFkZSBpbiB0aGUgbmV3bHkgcmVxdWVzdGVkIHNsaWRlXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KS5jc3MoJ3pJbmRleCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCArIDEpLmZhZGVJbihzbGlkZXIuc2V0dGluZ3Muc3BlZWQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykuY3NzKCd6SW5kZXgnLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVaSW5kZXgpO1xuICAgICAgICAgIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgLy8gc2xpZGVyIG1vZGUgaXMgbm90IFwiZmFkZVwiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0ICYmIHNsaWRlci52aWV3cG9ydC5oZWlnaHQoKSAhPT0gZ2V0Vmlld3BvcnRIZWlnaHQoKSkge1xuICAgICAgICAgIHNsaWRlci52aWV3cG9ydC5hbmltYXRlKHtoZWlnaHQ6IGdldFZpZXdwb3J0SGVpZ2h0KCl9LCBzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHRTcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgY2Fyb3VzZWwgYW5kIG5vdCBpbmZpbml0ZSBsb29wXG4gICAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuY2Fyb3VzZWwgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0KSB7XG4gICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcbiAgICAgICAgICAgIC8vIGdldCB0aGUgbGFzdCBjaGlsZCBwb3NpdGlvblxuICAgICAgICAgICAgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHBvc2l0aW9uIG9mIHRoZSBsYXN0IHNsaWRlXG4gICAgICAgICAgICBtb3ZlQnkgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKSAtIGxhc3RDaGlsZC5vdXRlcldpZHRoKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGdldCBsYXN0IHNob3dpbmcgaW5kZXggcG9zaXRpb25cbiAgICAgICAgICAgIGxhc3RTaG93aW5nSW5kZXggPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcbiAgICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKGxhc3RTaG93aW5nSW5kZXgpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGhvcml6b250YWwgY2Fyb3VzZWwsIGdvaW5nIHByZXZpb3VzIHdoaWxlIG9uIGZpcnN0IHNsaWRlIChpbmZpbml0ZUxvb3AgbW9kZSlcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuY2Fyb3VzZWwgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmIGRpcmVjdGlvbiA9PT0gJ3ByZXYnKSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNoaWxkIHBvc2l0aW9uXG4gICAgICAgICAgZXEgPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA9PT0gMSA/IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSBnZXRNb3ZlQnkoKSA6ICgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpIC0gKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKTtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSBlbC5jaGlsZHJlbignLmJ4LWNsb25lJykuZXEoZXEpO1xuICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XG4gICAgICAgIC8vIGlmIGluZmluaXRlIGxvb3AgYW5kIFwiTmV4dFwiIGlzIGNsaWNrZWQgb24gdGhlIGxhc3Qgc2xpZGVcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICduZXh0JyAmJiBzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwKSB7XG4gICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNsb25lIHBvc2l0aW9uXG4gICAgICAgICAgcG9zaXRpb24gPSBlbC5maW5kKCc+IC5ieC1jbG9uZScpLmVxKHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMpLnBvc2l0aW9uKCk7XG4gICAgICAgICAgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gZmFsc2U7XG4gICAgICAgIC8vIG5vcm1hbCBub24temVybyByZXF1ZXN0c1xuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlSW5kZXggPj0gMCkge1xuICAgICAgICAgIC8vcGFyc2VJbnQgaXMgYXBwbGllZCB0byBhbGxvdyBmbG9hdHMgZm9yIHNsaWRlcy9wYWdlXG4gICAgICAgICAgcmVxdWVzdEVsID0gc2xpZGVJbmRleCAqIHBhcnNlSW50KGdldE1vdmVCeSgpKTtcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShyZXF1ZXN0RWwpLnBvc2l0aW9uKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBJZiB0aGUgcG9zaXRpb24gZG9lc24ndCBleGlzdFxuICAgICAgICAgKiAoZS5nLiBpZiB5b3UgZGVzdHJveSB0aGUgc2xpZGVyIG9uIGEgbmV4dCBjbGljayksXG4gICAgICAgICAqIGl0IGRvZXNuJ3QgdGhyb3cgYW4gZXJyb3IuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodHlwZW9mIChwb3NpdGlvbikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gLShwb3NpdGlvbi5sZWZ0IC0gbW92ZUJ5KSA6IC1wb3NpdGlvbi50b3A7XG4gICAgICAgICAgLy8gcGx1Z2luIHZhbHVlcyB0byBiZSBhbmltYXRlZFxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdzbGlkZScsIHNsaWRlci5zZXR0aW5ncy5zcGVlZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2xpZGVyLndvcmtpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhSGlkZGVuKSB7IGFwcGx5QXJpYUhpZGRlbkF0dHJpYnV0ZXMoc2xpZGVyLmFjdGl2ZS5pbmRleCAqIGdldE1vdmVCeSgpKTsgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2l0aW9ucyB0byB0aGUgbmV4dCBzbGlkZSBpbiB0aGUgc2hvd1xuICAgICAqL1xuICAgIGVsLmdvVG9OZXh0U2xpZGUgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0KSB7IHJldHVybjsgfVxuICAgICAgdmFyIHBhZ2VySW5kZXggPSBwYXJzZUludChzbGlkZXIuYWN0aXZlLmluZGV4KSArIDE7XG4gICAgICBlbC5nb1RvU2xpZGUocGFnZXJJbmRleCwgJ25leHQnKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNpdGlvbnMgdG8gdGhlIHByZXYgc2xpZGUgaW4gdGhlIHNob3dcbiAgICAgKi9cbiAgICBlbC5nb1RvUHJldlNsaWRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyBpZiBpbmZpbml0ZUxvb3AgaXMgZmFsc2UgYW5kIGxhc3QgcGFnZSBpcyBzaG93aW5nLCBkaXNyZWdhcmQgY2FsbFxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5hY3RpdmUuaW5kZXggPT09IDApIHsgcmV0dXJuOyB9XG4gICAgICB2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHNsaWRlci5hY3RpdmUuaW5kZXgpIC0gMTtcbiAgICAgIGVsLmdvVG9TbGlkZShwYWdlckluZGV4LCAncHJldicpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIGF1dG8gc2hvd1xuICAgICAqXG4gICAgICogQHBhcmFtIHByZXZlbnRDb250cm9sVXBkYXRlIChib29sZWFuKVxuICAgICAqICAtIGlmIHRydWUsIGF1dG8gY29udHJvbHMgc3RhdGUgd2lsbCBub3QgYmUgdXBkYXRlZFxuICAgICAqL1xuICAgIGVsLnN0YXJ0QXV0byA9IGZ1bmN0aW9uKHByZXZlbnRDb250cm9sVXBkYXRlKSB7XG4gICAgICAvLyBpZiBhbiBpbnRlcnZhbCBhbHJlYWR5IGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcbiAgICAgIGlmIChzbGlkZXIuaW50ZXJ2YWwpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBjcmVhdGUgYW4gaW50ZXJ2YWxcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xuICAgICAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIHNsaWRlci5zZXR0aW5ncy5wYXVzZSk7XG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYW5kIHByZXZlbnRDb250cm9sVXBkYXRlIGlzIG5vdCB0cnVlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyAmJiBwcmV2ZW50Q29udHJvbFVwZGF0ZSAhPT0gdHJ1ZSkgeyB1cGRhdGVBdXRvQ29udHJvbHMoJ3N0b3AnKTsgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgYXV0byBzaG93XG4gICAgICpcbiAgICAgKiBAcGFyYW0gcHJldmVudENvbnRyb2xVcGRhdGUgKGJvb2xlYW4pXG4gICAgICogIC0gaWYgdHJ1ZSwgYXV0byBjb250cm9scyBzdGF0ZSB3aWxsIG5vdCBiZSB1cGRhdGVkXG4gICAgICovXG4gICAgZWwuc3RvcEF1dG8gPSBmdW5jdGlvbihwcmV2ZW50Q29udHJvbFVwZGF0ZSkge1xuICAgICAgLy8gaWYgbm8gaW50ZXJ2YWwgZXhpc3RzLCBkaXNyZWdhcmQgY2FsbFxuICAgICAgaWYgKCFzbGlkZXIuaW50ZXJ2YWwpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBjbGVhciB0aGUgaW50ZXJ2YWxcbiAgICAgIGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYW5kIHByZXZlbnRDb250cm9sVXBkYXRlIGlzIG5vdCB0cnVlXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyAmJiBwcmV2ZW50Q29udHJvbFVwZGF0ZSAhPT0gdHJ1ZSkgeyB1cGRhdGVBdXRvQ29udHJvbHMoJ3N0YXJ0Jyk7IH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjdXJyZW50IHNsaWRlIGluZGV4ICh6ZXJvLWJhc2VkKVxuICAgICAqL1xuICAgIGVsLmdldEN1cnJlbnRTbGlkZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY3VycmVudCBzbGlkZSBlbGVtZW50XG4gICAgICovXG4gICAgZWwuZ2V0Q3VycmVudFNsaWRlRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNsaWRlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gaW5kZXggKGludClcbiAgICAgKiAgLSBUaGUgaW5kZXggKHplcm8tYmFzZWQpIG9mIHRoZSBlbGVtZW50IHlvdSB3YW50IHJldHVybmVkLlxuICAgICAqL1xuICAgIGVsLmdldFNsaWRlRWxlbWVudCA9IGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICByZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmVxKGluZGV4KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBudW1iZXIgb2Ygc2xpZGVzIGluIHNob3dcbiAgICAgKi9cbiAgICBlbC5nZXRTbGlkZUNvdW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHNsaWRlci53b3JraW5nIHZhcmlhYmxlXG4gICAgICovXG4gICAgZWwuaXNXb3JraW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gc2xpZGVyLndvcmtpbmc7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGwgZHluYW1pYyBzbGlkZXIgZWxlbWVudHNcbiAgICAgKi9cbiAgICBlbC5yZWRyYXdTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIHJlc2l6ZSBhbGwgY2hpbGRyZW4gaW4gcmF0aW8gdG8gbmV3IHNjcmVlbiBzaXplXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uYWRkKGVsLmZpbmQoJy5ieC1jbG9uZScpKS5vdXRlcldpZHRoKGdldFNsaWRlV2lkdGgoKSk7XG4gICAgICAvLyBhZGp1c3QgdGhlIGhlaWdodFxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmNzcygnaGVpZ2h0JywgZ2V0Vmlld3BvcnRIZWlnaHQoKSk7XG4gICAgICAvLyB1cGRhdGUgdGhlIHNsaWRlIHBvc2l0aW9uXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgc2V0U2xpZGVQb3NpdGlvbigpOyB9XG4gICAgICAvLyBpZiBhY3RpdmUubGFzdCB3YXMgdHJ1ZSBiZWZvcmUgdGhlIHNjcmVlbiByZXNpemUsIHdlIHdhbnRcbiAgICAgIC8vIHRvIGtlZXAgaXQgbGFzdCBubyBtYXR0ZXIgd2hhdCBzY3JlZW4gc2l6ZSB3ZSBlbmQgb25cbiAgICAgIGlmIChzbGlkZXIuYWN0aXZlLmxhc3QpIHsgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IGdldFBhZ2VyUXR5KCkgLSAxOyB9XG4gICAgICAvLyBpZiB0aGUgYWN0aXZlIGluZGV4IChwYWdlKSBubyBsb25nZXIgZXhpc3RzIGR1ZSB0byB0aGUgcmVzaXplLCBzaW1wbHkgc2V0IHRoZSBpbmRleCBhcyBsYXN0XG4gICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA+PSBnZXRQYWdlclF0eSgpKSB7IHNsaWRlci5hY3RpdmUubGFzdCA9IHRydWU7IH1cbiAgICAgIC8vIGlmIGEgcGFnZXIgaXMgYmVpbmcgZGlzcGxheWVkIGFuZCBhIGN1c3RvbSBwYWdlciBpcyBub3QgYmVpbmcgdXNlZCwgdXBkYXRlIGl0XG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnBhZ2VyICYmICFzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHtcbiAgICAgICAgcG9wdWxhdGVQYWdlcigpO1xuICAgICAgICB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuYWN0aXZlLmluZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUhpZGRlbikgeyBhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSk7IH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGVzdHJveSB0aGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgc2xpZGVyIChyZXZlcnQgZXZlcnl0aGluZyBiYWNrIHRvIG9yaWdpbmFsIHN0YXRlKVxuICAgICAqL1xuICAgIGVsLmRlc3Ryb3lTbGlkZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZFxuICAgICAgaWYgKCFzbGlkZXIuaW5pdGlhbGl6ZWQpIHsgcmV0dXJuOyB9XG4gICAgICBzbGlkZXIuaW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICAgICQoJy5ieC1jbG9uZScsIHRoaXMpLnJlbW92ZSgpO1xuICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0eWxlJywgJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmICgkKHRoaXMpLmRhdGEoJ29yaWdTdHlsZScpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5hdHRyKCdzdHlsZScsICQodGhpcykuZGF0YSgnb3JpZ1N0eWxlJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCh0aGlzKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgfVxuICAgICAgJCh0aGlzKS51bndyYXAoKS51bndyYXAoKTtcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwpIHsgc2xpZGVyLmNvbnRyb2xzLmVsLnJlbW92ZSgpOyB9XG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLm5leHQpIHsgc2xpZGVyLmNvbnRyb2xzLm5leHQucmVtb3ZlKCk7IH1cbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMucHJldikgeyBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmUoKTsgfVxuICAgICAgaWYgKHNsaWRlci5wYWdlckVsICYmIHNsaWRlci5zZXR0aW5ncy5jb250cm9scyAmJiAhc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7IHNsaWRlci5wYWdlckVsLnJlbW92ZSgpOyB9XG4gICAgICAkKCcuYngtY2FwdGlvbicsIHRoaXMpLnJlbW92ZSgpO1xuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5hdXRvRWwpIHsgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5yZW1vdmUoKTsgfVxuICAgICAgY2xlYXJJbnRlcnZhbChzbGlkZXIuaW50ZXJ2YWwpO1xuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5yZXNwb25zaXZlKSB7ICQod2luZG93KS51bmJpbmQoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdyk7IH1cbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3Mua2V5Ym9hcmRFbmFibGVkKSB7ICQoZG9jdW1lbnQpLnVuYmluZCgna2V5ZG93bicsIGtleVByZXNzKTsgfVxuICAgICAgLy9yZW1vdmUgc2VsZiByZWZlcmVuY2UgaW4gZGF0YVxuICAgICAgJCh0aGlzKS5yZW1vdmVEYXRhKCdieFNsaWRlcicpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWxvYWQgdGhlIHNsaWRlciAocmV2ZXJ0IGFsbCBET00gY2hhbmdlcywgYW5kIHJlLWluaXRpYWxpemUpXG4gICAgICovXG4gICAgZWwucmVsb2FkU2xpZGVyID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcbiAgICAgIGlmIChzZXR0aW5ncyAhPT0gdW5kZWZpbmVkKSB7IG9wdGlvbnMgPSBzZXR0aW5nczsgfVxuICAgICAgZWwuZGVzdHJveVNsaWRlcigpO1xuICAgICAgaW5pdCgpO1xuICAgICAgLy9zdG9yZSByZWZlcmVuY2UgdG8gc2VsZiBpbiBvcmRlciB0byBhY2Nlc3MgcHVibGljIGZ1bmN0aW9ucyBsYXRlclxuICAgICAgJChlbCkuZGF0YSgnYnhTbGlkZXInLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgaW5pdCgpO1xuXG4gICAgJChlbCkuZGF0YSgnYnhTbGlkZXInLCB0aGlzKTtcblxuICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgalF1ZXJ5IG9iamVjdFxuICAgIHJldHVybiB0aGlzO1xuICB9O1xufSkoalF1ZXJ5KTtcblxuLy8ganF1ZXJ5Lm9uZXBhZ2Utc2Nyb2xsLmpzXG5cbmZ1bmN0aW9uIGhhc1RvdWNoKCkge1xuICAgIHJldHVybiAnb250b3VjaHN0YXJ0JyBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnRcbiAgICAgICAgICAgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMFxuICAgICAgICAgICB8fCBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDA7XG59XG5cbmlmIChoYXNUb3VjaCgpKSB7IC8vIHJlbW92ZSBhbGwgOmhvdmVyIHN0eWxlc2hlZXRzXG4gICAgdHJ5IHsgLy8gcHJldmVudCBleGNlcHRpb24gb24gYnJvd3NlcnMgbm90IHN1cHBvcnRpbmcgRE9NIHN0eWxlU2hlZXRzIHByb3Blcmx5XG4gICAgICAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc3QgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xuICAgICAgICBiYWNrZ3JvdW5kcy50b3RhbC5jc3MoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMHB4LCAwcHgpJ30pO1xuICAgICAgfSk7XG4gICAgICAgIGZvciAodmFyIHNpIGluIGRvY3VtZW50LnN0eWxlU2hlZXRzKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW3NpXTtcbiAgICAgICAgICAgIGlmICghc3R5bGVTaGVldC5ydWxlcykgY29udGludWU7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHJpID0gc3R5bGVTaGVldC5ydWxlcy5sZW5ndGggLSAxOyByaSA+PSAwOyByaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzdHlsZVNoZWV0LnJ1bGVzW3JpXS5zZWxlY3RvclRleHQpIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlU2hlZXQucnVsZXNbcmldLnNlbGVjdG9yVGV4dC5tYXRjaCgnOmhvdmVyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVTaGVldC5kZWxldGVSdWxlKHJpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChleCkge31cbn1cbiQoZnVuY3Rpb24oKSB7XG5cbiAgJCgnd2luZG93Jykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiaHRtbFwiKS5hbmltYXRlKHsgc2Nyb2xsVG9wOiAkKGRvY3VtZW50KS5oZWlnaHQoKSB9LCAxMDAwKTtcbiAgICBjb25zb2xlLmxvZyhzY3JvbGxUb3AoKSk7XG4gICAgXG4gIH0pXG4gIFxuICAkKCdhW2hyZWYqPVwiI1wiXScpXG4gICAgLm5vdCgnW2hyZWY9XCIjXCJdJylcbiAgICAubm90KCdbaHJlZj1cIiMwXCJdJylcbiAgICAuY2xpY2soZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgXG4gICAgICAgICYmIFxuICAgICAgICBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lXG4gICAgICApIHtcbiAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyAnXScpO1xuICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wXG4gICAgICAgICAgfSwgMTAwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQodGFyZ2V0KTtcbiAgICAgICAgICAgICR0YXJnZXQuZm9jdXMoKTtcbiAgICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKFwiOmZvY3VzXCIpKSB7IFxuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoJ3RhYmluZGV4JywnLTEnKTtcbiAgICAgICAgICAgICAgJHRhcmdldC5mb2N1cygpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG5cdHZhciAkc2lkZWJhciA9ICQoJy5zaWRlYmFyJyk7XG5cdHZhciAkbmF2YmFyID0gJCgnLm5hdmJhcl9fbGlua3MnKTtcbiAgdmFyICRuYXZiYXJDb250YWluZXIgPSAkKCcubmF2YmFyJylcblx0dmFyICRidXJnZXIgPSAkKCcjYnVyZ2VyJyk7XG5cdHZhciAkbGlua0l0ZW0gPSAkKCcubGlua3NfX2l0ZW0nKTtcbiAgdmFyICRzaWRlYmFybGF5b3V0ID0gJCgnLnNpZGViYXJsYXlvdXQnKTtcblxuXG5cdCRzaWRlYmFyLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdCRuYXZiYXIudG9nZ2xlQ2xhc3MoJy0tdmlzaWJsZScpO1xuXHRcdCRzaWRlYmFyLnRvZ2dsZUNsYXNzKCctLW9uJyk7XG5cdFx0JGJ1cmdlci50b2dnbGVDbGFzcygnY2xvc2UnKS50b2dnbGVDbGFzcygnb3BlbmVkJyk7XG4gIH0pO1xuICAkbmF2YmFyQ29udGFpbmVyLnNpYmxpbmdzKCkuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJG5hdmJhci5yZW1vdmVDbGFzcygnLS12aXNpYmxlJyk7XG4gICAgJHNpZGViYXIucmVtb3ZlQ2xhc3MoJy0tb24nKTtcbiAgICAkYnVyZ2VyLmFkZENsYXNzKCdjbG9zZScpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcbiAgfSk7XG5cblxuXG5cdC8vIHBvcC11cFxuXG5cdHZhciAkd2hpdGVQYXBwZXIgPSAkKCcjc2hvdy1wb3AtdXAnKTtcbiAgdmFyICR3aGl0ZVBhcHBlckJ0biA9ICQoJy53cGJ0bi1mb290ZXInKTtcblx0dmFyICRvdmVybGF5ID0gJCgnLmNvdmVyJyk7XG4gIHZhciAkY2xvc2VCdG4gPSAkKCcuY2xvc2UtYnV0dG9uJyk7XG5cdHZhciAkcG9wVXBXaGl0ZXBhcHBlciA9ICQoJy53aGl0ZXBhcHBlcicpO1xuICB2YXIgJGZlZWRiYWNrID0gJCgnI3Nob3ctZmVlZGJhY2snKTtcbiAgdmFyICRwb3BVcEZlZWRiYWNrID0gJCgnLmZlZWRiYWNrLXdyYXAnKTtcbiAgdmFyICRjbG9zZVNwYWNlID0gJCgnLnNwYWNlLWNsb3NlJyk7XG4gIHZhciAkcXJXZUNoYXQgPSAkKCcjcXItd2VjaGF0Jyk7XG4gIHZhciAkbGlua1dlQ2hhdCA9ICQoJyNsaW5rLXdlY2hhdCcpO1xuICB2YXIgJGZlZWRiYWNrTGlua3MgPSAkKCcuZmVlZGJhY2staWNvJyk7XG5cbiAgJHFyV2VDaGF0LmhpZGUoKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkcXJXZUNoYXQuZmFkZVRvZ2dsZSg2MDApO1xuICAgICRmZWVkYmFja0xpbmtzLmRlbGF5KDYwMCkuZmFkZVRvZ2dsZSg0MDApO1xuICB9KTtcbiAgJGxpbmtXZUNoYXQuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkcXJXZUNoYXQuZGVsYXkoNDAwKS5mYWRlVG9nZ2xlKDYwMCk7XG4gICAgJGZlZWRiYWNrTGlua3MuZmFkZVRvZ2dsZSg0MDApO1xuICB9KTtcblxuXG4gICRmZWVkYmFjay5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICRwb3BVcEZlZWRiYWNrLmZhZGVUb2dnbGUoJzQwMCcpO1xuICAgICRmZWVkYmFjay50b2dnbGVDbGFzcygnd2hpdGUnKTtcbiAgICAkY2xvc2VTcGFjZS50b2dnbGUoNDAwKTtcbiAgfSk7XG5cblxuICAkY2xvc2VTcGFjZS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkcG9wVXBGZWVkYmFjay5mYWRlT3V0KDQwMCk7XG4gICAgJGZlZWRiYWNrLnJlbW92ZUNsYXNzKCd3aGl0ZScpO1xuICAgICRjbG9zZVNwYWNlLmhpZGUoKTtcbiAgfSk7XG5cblxuXG4gICR3aGl0ZVBhcHBlci5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgJG92ZXJsYXkuZmFkZUluKDQwMCk7XG4gICAgJHBvcFVwV2hpdGVwYXBwZXIuZmFkZUluKDQwMCk7XG4gIH0pO1xuXG4gICR3aGl0ZVBhcHBlckJ0bi5jbGljayhmdW5jdGlvbihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgJG92ZXJsYXkuZmFkZUluKDQwMCk7XG4gICAgJHBvcFVwV2hpdGVwYXBwZXIuZmFkZUluKDQwMCk7XG4gIH0pO1xuXG5cblx0JGNsb3NlQnRuLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdCRvdmVybGF5LmZhZGVPdXQoNDAwKTtcblx0XHQkcG9wVXBXaGl0ZXBhcHBlci5mYWRlT3V0KDQwMCk7XG5cdH0pO1xuXHQkb3ZlcmxheS5jbGljayhmdW5jdGlvbigpIHtcblx0XHQkb3ZlcmxheS5mYWRlT3V0KDQwMCk7XG5cdFx0JHBvcFVwV2hpdGVwYXBwZXIuZmFkZU91dCg0MDApO1xuXHR9KTtcblxuXG4gLy8gTGFuZ3VhZ2Ugc3dpdGNoXG5cbiAgdmFyICRsYW5nSXRlbSA9ICQoJ2EubGFuZycpXG4gIHZhciAkZW5nID0gJCgnI2xhbmctdXMnKTtcbiAgdmFyICRjbiA9ICQoJyNsYW5nLWNuJyk7XG4gIHZhciAkaW5kID0gJCgnI2xhbmctaW4nKTtcblxuICB2YXIgJGxhbmdCdG4gPSAkKCcubGFuZ3N3aXRjaC13cmFwJyk7XG4gIHZhciAkbGFuZ1N3aXRjaCA9ICQoJy5sYW5nc3dpdGNoJyk7XG4gIHZhciAkbGFuZ1N3aXRjaENhcnVzZWwgPSAkKCcubGFuZ3N3aXRjaC1jYXJ1c2VsJyk7XG5cbiAgJGxhbmdCdG4uY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgJGxhbmdTd2l0Y2gudG9nZ2xlKDQwMCk7XG4gICAgJCgnLmxpbmtzX19pdGVtJykudG9nZ2xlQ2xhc3MoJ2hpZGVkJyk7XG4gIH0pO1xuXG4gICRsYW5nU3dpdGNoQ2FydXNlbC5ieFNsaWRlcih7XG4gICAgYXV0bzogdHJ1ZSxcbiAgICBjb250cm9sczogZmFsc2UsXG4gICAgcGF1c2U6IDIwMDAsXG4gICAgcGFnZXI6IGZhbHNlLFxuICAgIHRvdWNoRW5hYmxlZDogZmFsc2VcbiAgfSlcblxuXG5cbiAvLyB2aWRlbyBwb3AtdXBcblxuXG4gIHZhciAkcG9wVXBWaWRlb0NvbnRhaW5lciA9ICQoXCIucG9wLXVwLXZpZGVvXCIpO1xuICB2YXIgJHBvcFVwVmlkZW9CdG4gPSAkKCcjcGxheS12aWRlby1lbmctYnRuJyk7XG4gIHZhciAkcG9wVXBWaWRlb0NuQnRuID0gJCgnI3BsYXktdmlkZW8tY24tYnRuJyk7XG5cblxuICAkcG9wVXBWaWRlb0J0bi5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICRwb3BVcFZpZGVvQ29udGFpbmVyLmFwcGVuZCgnPGlmcmFtZSBpZD1cInZpZGVvXCIgc3JjPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvcDFZaURLbFNlOGs/cmVsPTAmYXV0b3BsYXk9MVwiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicpO1xuICAgICAgJHBvcFVwVmlkZW9Db250YWluZXIuZmFkZUluKDcwMCk7XG4gIH0pO1xuXG4gICRwb3BVcFZpZGVvQ25CdG4uY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5hcHBlbmQoJzx2aWRlbyBpZD1cInZpZGVvXCIgY29udHJvbHMgYXV0b3BsYXk+PHNvdXJjZSBzcmM9XCJodHRwOi8vb25wbGFjZS5pby9pbWcvdmlkZW8vb25wbGFjZS1jaGluYS1zdWJ0aXRsZS5tcDRcIiB0eXBlPVwidmlkZW8vbXA0XCIvPjwvdmlkZW8+Jyk7XG4gICAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5mYWRlSW4oNzAwKTtcbiAgfSlcblxuICAkKCcuY2xvc2UtYnV0dG9uLXZpZGVvJykuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgIHZhciAkdmlkZW8gPSAkKCcjdmlkZW8nKTtcbiAgICB2YXIgJHZpZGVvU2NyZWVuID0gJCgnI3ZpZGVvLXBvcC11cCcpO1xuICAgIFxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5oaWRlKDcwMCk7XG4gICAgJHZpZGVvU2NyZWVuLnJlbW92ZSgpO1xuICAgICR2aWRlby5yZW1vdmUoKTtcblxuICB9KTtcblxuICAkKCcucGFydG5lcnMtY2Fyb3VzZWwnKS5ieFNsaWRlcih7XG4gICAgYXV0bzogdHJ1ZSxcbiAgICBjb250cm9sczogZmFsc2UsXG4gICAgcGF1c2U6IDMwMDAsXG4gICAgcGFnZXI6IGZhbHNlXG4gIH0pXG5cbiAgLy8gbWFpbiB0ZWFtIHBhZ2UgXG5cbiAgdmFyIHBpY3R1cmVzID0geyAgXG4gICAgICBFbXB0eTogJCgnI3BpY3R1cmUtZW1wdHknKSxcbiAgICAgIEVkd2FyZDogJCgnI3BpY3R1cmUtRWR3YXJkJyksXG4gICAgICBBbmRyZWk6ICQoJyNwaWN0dXJlLUFuZHJlaScpLFxuICAgICAgRG1pdHJpeTogJCgnI3BpY3R1cmUtRG1pdHJpeScpLFxuICAgICAgSWx5YTogJCgnI3BpY3R1cmUtSWx5YScpLFxuICAgICAgTWlrZTogJCgnI3BpY3R1cmUtTWlrZScpLFxuICAgICAgT2xlZzogJCgnI3BpY3R1cmUtT2xlZycpLFxuICAgICAgTWljaGFlbDogJCgnI3BpY3R1cmUtTWljaGFlbCcpLFxuICAgICAgRXVnZW5lOiAkKCcjcGljdHVyZS1FdWdlbmUnKSxcbiAgICAgIFJ1c2xhbjogJCgnI3BpY3R1cmUtUnVzbGFuJyksXG4gICAgICBWbGFkaW1pcjogJCgnI3BpY3R1cmUtVmxhZGltaXInKSxcbiAgICAgIFZhbGVudGluYTogJCgnI3BpY3R1cmUtVmFsZW50aW5hJylcbiAgICB9XG4gIFxuICAgIHZhciBkZXNjcmlwdGlvbiA9IHtcbiAgICAgIHRlYW06ICQoJyN0ZWFtLWRlc2NyaXB0aW9uJyksXG4gICAgICBFZHdhcmQ6ICQoJyNFZHdhcmQtZGVzY3JpcHRpb24nKSxcbiAgICAgIEFuZHJlaTogJCgnI0FuZHJlaS1kZXNjcmlwdGlvbicpLFxuICAgICAgRG1pdHJpeTogJCgnI0RtaXRyaXktZGVzY3JpcHRpb24nKSxcbiAgICAgIElseWE6ICQoJyNJbHlhLWRlc2NyaXB0aW9uJyksXG4gICAgICBNaWtlOiAkKCcjTWlrZS1kZXNjcmlwdGlvbicpLFxuICAgICAgT2xlZzogJCgnI09sZWctZGVzY3JpcHRpb24nKSxcbiAgICAgIE1pY2hhZWw6ICQoJyNNaWNoYWVsLWRlc2NyaXB0aW9uJyksXG4gICAgICBFdWdlbmU6ICQoJyNFdWdlbmUtZGVzY3JpcHRpb24nKSxcbiAgICAgIFJ1c2xhbjogJCgnI1J1c2xhbi1kZXNjcmlwdGlvbicpLFxuICAgICAgVmxhZGltaXI6ICQoJyNWbGFkaW1pci1kZXNjcmlwdGlvbicpLFxuICAgICAgVmFsZW50aW5hOiAkKCcjVmFsZW50aW5hLWRlc2NyaXB0aW9uJylcbiAgICB9XG4gIFxuICAgIHZhciBiYWNrZ3JvdW5kcyA9IHtcbiAgICAgIHRvdGFsOiAkKCcuYmFja2dyb3VuZHMtaXRlbScpLFxuICAgICAgRWR3YXJkOiAkKCcjRWR3YXJkLWJhY2tncm91bmQnKSxcbiAgICAgIEFuZHJlaTogJCgnI0FuZHJlaS1iYWNrZ3JvdW5kJyksXG4gICAgICBNaWtlOiAkKCcjTWlrZS1iYWNrZ3JvdW5kJyksXG4gICAgICBEbWl0cml5OiAkKCcjRG1pdHJpeS1iYWNrZ3JvdW5kJyksXG4gICAgICBJbHlhOiAkKCcjSWx5YS1iYWNrZ3JvdW5kJyksXG4gICAgICBPbGVnOiAkKCcjT2xlZy1iYWNrZ3JvdW5kJyksXG4gICAgICBNaWNoYWVsOiAkKCcjTWljaGFlbC1iYWNrZ3JvdW5kJyksXG4gICAgICBFdWdlbmU6ICQoJyNFdWdlbmUtYmFja2dyb3VuZCcpLFxuICAgICAgUnVzbGFuOiAkKCcjUnVzbGFuLWJhY2tncm91bmQnKSxcbiAgICAgIFZsYWRpbWlyOiAkKCcjVmxhZGltaXItYmFja2dyb3VuZCcpLFxuICAgICAgVmFsZW50aW5hOiAkKCcjVmFsZW50aW5hLWJhY2tncm91bmQnKVxuICAgIH1cbiAgXG4gICAgdmFyIGhleG9saW5rcyA9ICQoJy5tZW1iZXItcGljdHVyZScpO1xuICAgIHZhciBibHVlaGV4ZXMgPSAkKCcuYmx1ZV9wb2x5Z29ucycpO1xuICAgIHZhciB0ZWFtU2VjdGlvbiA9ICQoJy50ZWFtJyk7XG4gIFxuICAgIGRlc2NyaXB0aW9uLnRlYW0uc2hvdygpO1xuICBcbiAgICBoZXhvbGlua3MuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgYmx1ZWhleGVzLmZhZGVPdXQoODAwKTtcbiAgICAgIHRlYW1TZWN0aW9uLmFkZENsYXNzKCd3aGl0ZScpO1xuICBcbiAgICB9KTtcbiAgXG4gICAgcGljdHVyZXMuRW1wdHkuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYmFja2dyb3VuZHMudG90YWwuZmFkZU91dCg4MDApO1xuICAgICAgZGVzY3JpcHRpb24udGVhbS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKVxuICAgICAgYmx1ZWhleGVzLmZhZGVJbig4MDApO1xuICAgICAgdGVhbVNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ3doaXRlJylcbiAgICB9KTtcbiAgXG4gICAgICBmdW5jdGlvbiBjaGFuZ2VCZyhhKSB7XG4gICAgICAgIGJhY2tncm91bmRzLmEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgICAgIGRlc2NyaXB0aW9uLmEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgICB9XG4gIFxuICAgIHBpY3R1cmVzLkFuZHJlaS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBiYWNrZ3JvdW5kcy5BbmRyZWkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgICBkZXNjcmlwdGlvbi5BbmRyZWkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgfSk7XG4gICAgcGljdHVyZXMuRWR3YXJkLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLkVkd2FyZC5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICAgIGRlc2NyaXB0aW9uLkVkd2FyZC5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICB9KTtcbiAgICBwaWN0dXJlcy5EbWl0cml5LmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLkRtaXRyaXkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgICBkZXNjcmlwdGlvbi5EbWl0cml5LmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgIH0pO1xuICAgIHBpY3R1cmVzLklseWEuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYmFja2dyb3VuZHMuSWx5YS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICAgIGRlc2NyaXB0aW9uLklseWEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgfSk7XG4gICAgcGljdHVyZXMuTWlrZS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBiYWNrZ3JvdW5kcy5NaWtlLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgICAgZGVzY3JpcHRpb24uTWlrZS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICB9KTtcbiAgICBwaWN0dXJlcy5PbGVnLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLk9sZWcuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgICBkZXNjcmlwdGlvbi5PbGVnLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgIH0pO1xuICAgIHBpY3R1cmVzLk1pY2hhZWwuY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYmFja2dyb3VuZHMuTWljaGFlbC5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICAgIGRlc2NyaXB0aW9uLk1pY2hhZWwuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgfSk7XG4gICAgcGljdHVyZXMuRXVnZW5lLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLkV1Z2VuZS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICAgIGRlc2NyaXB0aW9uLkV1Z2VuZS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICB9KTtcbiAgICBwaWN0dXJlcy5SdXNsYW4uY2xpY2soZnVuY3Rpb24oZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgYmFja2dyb3VuZHMuUnVzbGFuLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgICAgZGVzY3JpcHRpb24uUnVzbGFuLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgIH0pO1xuICAgIHBpY3R1cmVzLlZsYWRpbWlyLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLlZsYWRpbWlyLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xuICAgICAgZGVzY3JpcHRpb24uVmxhZGltaXIuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XG4gICAgfSk7XG4gICAgcGljdHVyZXMuVmFsZW50aW5hLmNsaWNrKGZ1bmN0aW9uKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJhY2tncm91bmRzLlZhbGVudGluYS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICAgIGRlc2NyaXB0aW9uLlZhbGVudGluYS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcbiAgICB9KTtcbiAgICBcbiAgXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG4gIFxuICAgICAgYmFja2dyb3VuZHMudG90YWwuY3NzKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDBweCwgLScgKyBzdC8zICsncHgpJ30pO1xuICAgIH0pO1xuXG4gICQoJy5jYXJkLWJhY2std3JhcCcpLmhpZGUoKTtcbiAgJCgnLmFkdmlzb3ItaXRlbScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQodGhpcykuY2hpbGRyZW4oJy5mbGlwLWNhcmQnKS5jaGlsZHJlbignLmNhcmQtYmFjay13cmFwJykuc2xpZGVUb2dnbGUoNDAwKTtcbiAgfSk7XG5cbiAgJCgnLmF0dGFudGlvbi1hbGVydCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQoJy5hdHRhbnRpb24tYWxlcnQnKS5mYWRlT3V0KDQwMCk7XG4gIH0pO1xuICAkKCcjY2xvc2UtYWxlcnQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICQoJy5hdHRhbnRpb24tYWxlcnQnKS5mYWRlT3V0KDQwMCk7XG4gIH0pO1xufSk7Il19
