!function(e){var t={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};e.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(n)}),this;var s={},o=this,r=e(window).width(),a=e(window).height();if(!e(o).data("bxSlider")){var l=function(){e(o).data("bxSlider")||(s.settings=e.extend({},t,n),s.settings.slideWidth=parseInt(s.settings.slideWidth),s.children=o.children(s.settings.slideSelector),s.children.length<s.settings.minSlides&&(s.settings.minSlides=s.children.length),s.children.length<s.settings.maxSlides&&(s.settings.maxSlides=s.children.length),s.settings.randomStart&&(s.settings.startSlide=Math.floor(Math.random()*s.children.length)),s.active={index:s.settings.startSlide},s.carousel=s.settings.minSlides>1||s.settings.maxSlides>1,s.carousel&&(s.settings.preloadImages="all"),s.minThreshold=s.settings.minSlides*s.settings.slideWidth+(s.settings.minSlides-1)*s.settings.slideMargin,s.maxThreshold=s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin,s.working=!1,s.controls={},s.interval=null,s.animProp="vertical"===s.settings.mode?"top":"left",s.usingCSS=s.settings.useCSS&&"fade"!==s.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],i=0;i<t.length;i++)if(void 0!==e.style[t[i]])return s.cssPrefix=t[i].replace("Perspective","").toLowerCase(),s.animProp="-"+s.cssPrefix+"-transform",!0;return!1}(),"vertical"===s.settings.mode&&(s.settings.maxSlides=s.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(s.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),d())},d=function(){var t=s.children.eq(s.settings.startSlide);o.wrap('<div class="'+s.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),s.viewport=o.parent(),s.settings.ariaLive&&!s.settings.ticker&&s.viewport.attr("aria-live","polite"),s.loader=e('<div class="bx-loading" />'),s.viewport.prepend(s.loader),o.css({width:"horizontal"===s.settings.mode?1e3*s.children.length+215+"%":"auto",position:"relative"}),s.usingCSS&&s.settings.easing?o.css("-"+s.cssPrefix+"-transition-timing-function",s.settings.easing):s.settings.easing||(s.settings.easing="swing"),s.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),s.viewport.parent().css({maxWidth:p()}),s.children.css({"float":"horizontal"===s.settings.mode?"left":"none",listStyle:"none",position:"relative"}),s.children.css("width",h()),"horizontal"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginRight",s.settings.slideMargin),"vertical"===s.settings.mode&&s.settings.slideMargin>0&&s.children.css("marginBottom",s.settings.slideMargin),"fade"===s.settings.mode&&(s.children.css({position:"absolute",zIndex:0,display:"none"}),s.children.eq(s.settings.startSlide).css({zIndex:s.settings.slideZIndex,display:"block"})),s.controls.el=e('<div class="bx-controls" />'),s.settings.captions&&y(),s.active.last=s.settings.startSlide===f()-1,s.settings.video&&o.fitVids(),("all"===s.settings.preloadImages||s.settings.ticker)&&(t=s.children),s.settings.ticker?s.settings.pager=!1:(s.settings.controls&&k(),s.settings.auto&&s.settings.autoControls&&C(),s.settings.pager&&w(),(s.settings.controls||s.settings.autoControls||s.settings.pager)&&s.viewport.after(s.controls.el)),c(t,g)},c=function(t,i){var n=t.find('img:not([src=""]), iframe').length,s=0;return 0===n?void i():void t.find('img:not([src=""]), iframe').each(function(){e(this).one("load error",function(){++s===n&&i()}).each(function(){this.complete&&e(this).trigger("load")})})},g=function(){if(s.settings.infiniteLoop&&"fade"!==s.settings.mode&&!s.settings.ticker){var t="vertical"===s.settings.mode?s.settings.minSlides:s.settings.maxSlides,i=s.children.slice(0,t).clone(!0).addClass("bx-clone"),n=s.children.slice(-t).clone(!0).addClass("bx-clone");s.settings.ariaHidden&&(i.attr("aria-hidden",!0),n.attr("aria-hidden",!0)),o.append(i).prepend(n)}s.loader.remove(),x(),"vertical"===s.settings.mode&&(s.settings.adaptiveHeight=!0),s.viewport.height(u()),o.redrawSlider(),s.settings.onSliderLoad.call(o,s.active.index),s.initialized=!0,s.settings.responsive&&e(window).bind("resize",_),s.settings.auto&&s.settings.autoStart&&(f()>1||s.settings.autoSlideForOnePage)&&A(),s.settings.ticker&&q(),s.settings.pager&&P(s.settings.startSlide),s.settings.controls&&z(),s.settings.touchEnabled&&!s.settings.ticker&&V(),s.settings.keyboardEnabled&&!s.settings.ticker&&e(document).keydown(L)},u=function(){var t=0,n=e();if("vertical"===s.settings.mode||s.settings.adaptiveHeight)if(s.carousel){var o=1===s.settings.moveSlides?s.active.index:s.active.index*m();for(n=s.children.eq(o),i=1;i<=s.settings.maxSlides-1;i++)n=o+i>=s.children.length?n.add(s.children.eq(i-1)):n.add(s.children.eq(o+i))}else n=s.children.eq(s.active.index);else n=s.children;return"vertical"===s.settings.mode?(n.each(function(i){t+=e(this).outerHeight()}),s.settings.slideMargin>0&&(t+=s.settings.slideMargin*(s.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"===s.viewport.css("box-sizing")?t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))+parseFloat(s.viewport.css("border-top-width"))+parseFloat(s.viewport.css("border-bottom-width")):"padding-box"===s.viewport.css("box-sizing")&&(t+=parseFloat(s.viewport.css("padding-top"))+parseFloat(s.viewport.css("padding-bottom"))),t},p=function(){var e="100%";return s.settings.slideWidth>0&&(e="horizontal"===s.settings.mode?s.settings.maxSlides*s.settings.slideWidth+(s.settings.maxSlides-1)*s.settings.slideMargin:s.settings.slideWidth),e},h=function(){var e=s.settings.slideWidth,t=s.viewport.width();if(0===s.settings.slideWidth||s.settings.slideWidth>t&&!s.carousel||"vertical"===s.settings.mode)e=t;else if(s.settings.maxSlides>1&&"horizontal"===s.settings.mode){if(t>s.maxThreshold)return e;t<s.minThreshold?e=(t-s.settings.slideMargin*(s.settings.minSlides-1))/s.settings.minSlides:s.settings.shrinkItems&&(e=Math.floor((t+s.settings.slideMargin)/Math.ceil((t+s.settings.slideMargin)/(e+s.settings.slideMargin))-s.settings.slideMargin))}return e},v=function(){var e=1,t=null;return"horizontal"===s.settings.mode&&s.settings.slideWidth>0?s.viewport.width()<s.minThreshold?e=s.settings.minSlides:s.viewport.width()>s.maxThreshold?e=s.settings.maxSlides:(t=s.children.first().width()+s.settings.slideMargin,e=Math.floor((s.viewport.width()+s.settings.slideMargin)/t)):"vertical"===s.settings.mode&&(e=s.settings.minSlides),e},f=function(){var e=0,t=0,i=0;if(s.settings.moveSlides>0)if(s.settings.infiniteLoop)e=Math.ceil(s.children.length/m());else for(;t<s.children.length;)++e,t=i+v(),i+=s.settings.moveSlides<=v()?s.settings.moveSlides:v();else e=Math.ceil(s.children.length/v());return e},m=function(){return s.settings.moveSlides>0&&s.settings.moveSlides<=v()?s.settings.moveSlides:v()},x=function(){var e,t,i;s.children.length>s.settings.maxSlides&&s.active.last&&!s.settings.infiniteLoop?"horizontal"===s.settings.mode?(t=s.children.last(),e=t.position(),b(-(e.left-(s.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===s.settings.mode&&(i=s.children.length-s.settings.minSlides,e=s.children.eq(i).position(),b(-e.top,"reset",0)):(e=s.children.eq(s.active.index*m()).position(),s.active.index===f()-1&&(s.active.last=!0),void 0!==e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0)))},b=function(t,i,n,r){var a,l;s.usingCSS?(l="vertical"===s.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",o.css("-"+s.cssPrefix+"-transition-duration",n/1e3+"s"),"slide"===i?(o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),O())}):O()):"reset"===i?o.css(s.animProp,l):"ticker"===i&&(o.css("-"+s.cssPrefix+"-transition-timing-function","linear"),o.css(s.animProp,l),0!==n?o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(o)&&(o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(r.resetValue,"reset",0),H())}):(b(r.resetValue,"reset",0),H()))):(a={},a[s.animProp]=t,"slide"===i?o.animate(a,n,s.settings.easing,function(){O()}):"reset"===i?o.css(s.animProp,t):"ticker"===i&&o.animate(a,n,"linear",function(){b(r.resetValue,"reset",0),H()}))},S=function(){for(var t="",i="",n=f(),o=0;o<n;o++)i="",s.settings.buildPager&&e.isFunction(s.settings.buildPager)||s.settings.pagerCustom?(i=s.settings.buildPager(o),s.pagerEl.addClass("bx-custom-pager")):(i=o+1,s.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+o+'" class="bx-pager-link">'+i+"</a></div>";s.pagerEl.html(t)},w=function(){s.settings.pagerCustom?s.pagerEl=e(s.settings.pagerCustom):(s.pagerEl=e('<div class="bx-pager" />'),s.settings.pagerSelector?e(s.settings.pagerSelector).html(s.pagerEl):s.controls.el.addClass("bx-has-pager").append(s.pagerEl),S()),s.pagerEl.on("click touchend","a",T)},k=function(){s.controls.next=e('<a class="bx-next" href="">'+s.settings.nextText+"</a>"),s.controls.prev=e('<a class="bx-prev" href="">'+s.settings.prevText+"</a>"),s.controls.next.bind("click touchend",I),s.controls.prev.bind("click touchend",E),s.settings.nextSelector&&e(s.settings.nextSelector).append(s.controls.next),s.settings.prevSelector&&e(s.settings.prevSelector).append(s.controls.prev),s.settings.nextSelector||s.settings.prevSelector||(s.controls.directionEl=e('<div class="bx-controls-direction" />'),s.controls.directionEl.append(s.controls.prev).append(s.controls.next),s.controls.el.addClass("bx-has-controls-direction").append(s.controls.directionEl))},C=function(){s.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+s.settings.startText+"</a></div>"),s.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+s.settings.stopText+"</a></div>"),s.controls.autoEl=e('<div class="bx-controls-auto" />'),s.controls.autoEl.on("click",".bx-start",$),s.controls.autoEl.on("click",".bx-stop",M),s.settings.autoControlsCombine?s.controls.autoEl.append(s.controls.start):s.controls.autoEl.append(s.controls.start).append(s.controls.stop),s.settings.autoControlsSelector?e(s.settings.autoControlsSelector).html(s.controls.autoEl):s.controls.el.addClass("bx-has-controls-auto").append(s.controls.autoEl),D(s.settings.autoStart?"stop":"start")},y=function(){s.children.each(function(t){var i=e(this).find("img:first").attr("title");void 0!==i&&(""+i).length&&e(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},I=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToNextSlide())},E=function(e){e.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),o.goToPrevSlide())},$=function(e){o.startAuto(),e.preventDefault()},M=function(e){o.stopAuto(),e.preventDefault()},T=function(t){var i,n;t.preventDefault(),s.controls.el.hasClass("disabled")||(s.settings.auto&&s.settings.stopAutoOnClick&&o.stopAuto(),i=e(t.currentTarget),void 0!==i.attr("data-slide-index")&&(n=parseInt(i.attr("data-slide-index")),n!==s.active.index&&o.goToSlide(n)))},P=function(t){var i=s.children.length;return"short"===s.settings.pagerType?(s.settings.maxSlides>1&&(i=Math.ceil(s.children.length/s.settings.maxSlides)),void s.pagerEl.html(t+1+s.settings.pagerShortSeparator+i)):(s.pagerEl.find("a").removeClass("active"),void s.pagerEl.each(function(i,n){e(n).find("a").eq(t).addClass("active")}))},O=function(){if(s.settings.infiniteLoop){var e="";0===s.active.index?e=s.children.eq(0).position():s.active.index===f()-1&&s.carousel?e=s.children.eq((f()-1)*m()).position():s.active.index===s.children.length-1&&(e=s.children.eq(s.children.length-1).position()),e&&("horizontal"===s.settings.mode?b(-e.left,"reset",0):"vertical"===s.settings.mode&&b(-e.top,"reset",0))}s.working=!1,s.settings.onSlideAfter.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)},D=function(e){s.settings.autoControlsCombine?s.controls.autoEl.html(s.controls[e]):(s.controls.autoEl.find("a").removeClass("active"),s.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},z=function(){1===f()?(s.controls.prev.addClass("disabled"),s.controls.next.addClass("disabled")):!s.settings.infiniteLoop&&s.settings.hideControlOnEnd&&(0===s.active.index?(s.controls.prev.addClass("disabled"),s.controls.next.removeClass("disabled")):s.active.index===f()-1?(s.controls.next.addClass("disabled"),s.controls.prev.removeClass("disabled")):(s.controls.prev.removeClass("disabled"),s.controls.next.removeClass("disabled")))},A=function(){if(s.settings.autoDelay>0){setTimeout(o.startAuto,s.settings.autoDelay)}else o.startAuto(),e(window).focus(function(){o.startAuto()}).blur(function(){o.stopAuto()});s.settings.autoHover&&o.hover(function(){s.interval&&(o.stopAuto(!0),s.autoPaused=!0)},function(){s.autoPaused&&(o.startAuto(!0),s.autoPaused=null)})},q=function(){var t,i,n,r,a,l,d,c,g=0;"next"===s.settings.autoDirection?o.append(s.children.clone().addClass("bx-clone")):(o.prepend(s.children.clone().addClass("bx-clone")),t=s.children.first().position(),g="horizontal"===s.settings.mode?-t.left:-t.top),b(g,"reset",0),s.settings.pager=!1,s.settings.controls=!1,s.settings.autoControls=!1,s.settings.tickerHover&&(s.usingCSS?(r="horizontal"===s.settings.mode?4:5,s.viewport.hover(function(){i=o.css("-"+s.cssPrefix+"-transform"),n=parseFloat(i.split(",")[r]),b(n,"reset",0)},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(n))),H(d)})):s.viewport.hover(function(){o.stop()},function(){c=0,s.children.each(function(t){c+="horizontal"===s.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),a=s.settings.speed/c,l="horizontal"===s.settings.mode?"left":"top",d=a*(c-Math.abs(parseInt(o.css(l)))),H(d)})),H()},H=function(e){var t,i,n,r=e?e:s.settings.speed,a={left:0,top:0},l={left:0,top:0};"next"===s.settings.autoDirection?a=o.find(".bx-clone").first().position():l=s.children.first().position(),t="horizontal"===s.settings.mode?-a.left:-a.top,i="horizontal"===s.settings.mode?-l.left:-l.top,n={resetValue:i},b(t,"ticker",r,n)},W=function(t){var i=e(window),n={top:i.scrollTop(),left:i.scrollLeft()},s=t.offset();return n.right=n.left+i.width(),n.bottom=n.top+i.height(),s.right=s.left+t.outerWidth(),s.bottom=s.top+t.outerHeight(),!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)},L=function(e){var t=document.activeElement.tagName.toLowerCase(),i="input|textarea",n=new RegExp(t,["i"]),s=n.exec(i);if(null==s&&W(o)){if(39===e.keyCode)return I(e),!1;if(37===e.keyCode)return E(e),!1}},V=function(){s.touch={start:{x:0,y:0},end:{x:0,y:0}},s.viewport.bind("touchstart MSPointerDown pointerdown",R),s.viewport.on("click",".bxslider a",function(e){s.viewport.hasClass("click-disabled")&&(e.preventDefault(),s.viewport.removeClass("click-disabled"))})},R=function(e){if(s.controls.el.addClass("disabled"),s.working)e.preventDefault(),s.controls.el.removeClass("disabled");else{s.touch.originalPos=o.position();var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t];s.touch.start.x=i[0].pageX,s.touch.start.y=i[0].pageY,s.viewport.get(0).setPointerCapture&&(s.pointerId=t.pointerId,s.viewport.get(0).setPointerCapture(s.pointerId)),s.viewport.bind("touchmove MSPointerMove pointermove",N),s.viewport.bind("touchend MSPointerUp pointerup",Y),s.viewport.bind("MSPointerCancel pointercancel",F)}},F=function(e){b(s.touch.originalPos.left,"reset",0),s.controls.el.removeClass("disabled"),s.viewport.unbind("MSPointerCancel pointercancel",F),s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},N=function(e){var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=Math.abs(i[0].pageX-s.touch.start.x),o=Math.abs(i[0].pageY-s.touch.start.y),r=0,a=0;3*n>o&&s.settings.preventDefaultSwipeX?e.preventDefault():3*o>n&&s.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!==s.settings.mode&&s.settings.oneToOneTouch&&("horizontal"===s.settings.mode?(a=i[0].pageX-s.touch.start.x,r=s.touch.originalPos.left+a):(a=i[0].pageY-s.touch.start.y,r=s.touch.originalPos.top+a),b(r,"reset",0))},Y=function(e){s.viewport.unbind("touchmove MSPointerMove pointermove",N),s.controls.el.removeClass("disabled");var t=e.originalEvent,i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],n=0,r=0;s.touch.end.x=i[0].pageX,s.touch.end.y=i[0].pageY,"fade"===s.settings.mode?(r=Math.abs(s.touch.start.x-s.touch.end.x),r>=s.settings.swipeThreshold&&(s.touch.start.x>s.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())):("horizontal"===s.settings.mode?(r=s.touch.end.x-s.touch.start.x,n=s.touch.originalPos.left):(r=s.touch.end.y-s.touch.start.y,n=s.touch.originalPos.top),!s.settings.infiniteLoop&&(0===s.active.index&&r>0||s.active.last&&r<0)?b(n,"reset",200):Math.abs(r)>=s.settings.swipeThreshold?(r<0?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(n,"reset",200)),s.viewport.unbind("touchend MSPointerUp pointerup",Y),s.viewport.get(0).releasePointerCapture&&s.viewport.get(0).releasePointerCapture(s.pointerId)},_=function(t){if(s.initialized)if(s.working)window.setTimeout(_,10);else{var i=e(window).width(),n=e(window).height();r===i&&a===n||(r=i,a=n,o.redrawSlider(),s.settings.onSliderResize.call(o,s.active.index))}},X=function(e){var t=v();s.settings.ariaHidden&&!s.settings.ticker&&(s.children.attr("aria-hidden","true"),s.children.slice(e,e+t).attr("aria-hidden","false"))},Z=function(e){return e<0?s.settings.infiniteLoop?f()-1:s.active.index:e>=f()?s.settings.infiniteLoop?0:s.active.index:e};return o.goToSlide=function(t,i){var n,r,a,l,d=!0,c=0,g={left:0,top:0},p=null;if(s.oldIndex=s.active.index,s.active.index=Z(t),!s.working&&s.active.index!==s.oldIndex){if(s.working=!0,d=s.settings.onSlideBefore.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index),"undefined"!=typeof d&&!d)return s.active.index=s.oldIndex,void(s.working=!1);"next"===i?s.settings.onSlideNext.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1):"prev"===i&&(s.settings.onSlidePrev.call(o,s.children.eq(s.active.index),s.oldIndex,s.active.index)||(d=!1)),s.active.last=s.active.index>=f()-1,(s.settings.pager||s.settings.pagerCustom)&&P(s.active.index),s.settings.controls&&z(),"fade"===s.settings.mode?(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),s.children.filter(":visible").fadeOut(s.settings.speed).css({zIndex:0}),s.children.eq(s.active.index).css("zIndex",s.settings.slideZIndex+1).fadeIn(s.settings.speed,function(){e(this).css("zIndex",s.settings.slideZIndex),O()})):(s.settings.adaptiveHeight&&s.viewport.height()!==u()&&s.viewport.animate({height:u()},s.settings.adaptiveHeightSpeed),!s.settings.infiniteLoop&&s.carousel&&s.active.last?"horizontal"===s.settings.mode?(p=s.children.eq(s.children.length-1),g=p.position(),c=s.viewport.width()-p.outerWidth()):(n=s.children.length-s.settings.minSlides,g=s.children.eq(n).position()):s.carousel&&s.active.last&&"prev"===i?(r=1===s.settings.moveSlides?s.settings.maxSlides-m():(f()-1)*m()-(s.children.length-s.settings.maxSlides),p=o.children(".bx-clone").eq(r),g=p.position()):"next"===i&&0===s.active.index?(g=o.find("> .bx-clone").eq(s.settings.maxSlides).position(),s.active.last=!1):t>=0&&(l=t*parseInt(m()),g=s.children.eq(l).position()),"undefined"!=typeof g?(a="horizontal"===s.settings.mode?-(g.left-c):-g.top,b(a,"slide",s.settings.speed)):s.working=!1),s.settings.ariaHidden&&X(s.active.index*m())}},o.goToNextSlide=function(){if(s.settings.infiniteLoop||!s.active.last){var e=parseInt(s.active.index)+1;o.goToSlide(e,"next")}},o.goToPrevSlide=function(){if(s.settings.infiniteLoop||0!==s.active.index){var e=parseInt(s.active.index)-1;o.goToSlide(e,"prev")}},o.startAuto=function(e){s.interval||(s.interval=setInterval(function(){"next"===s.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},s.settings.pause),s.settings.autoControls&&e!==!0&&D("stop"))},o.stopAuto=function(e){s.interval&&(clearInterval(s.interval),s.interval=null,s.settings.autoControls&&e!==!0&&D("start"))},o.getCurrentSlide=function(){return s.active.index},o.getCurrentSlideElement=function(){return s.children.eq(s.active.index)},o.getSlideElement=function(e){return s.children.eq(e)},o.getSlideCount=function(){return s.children.length},o.isWorking=function(){return s.working},o.redrawSlider=function(){s.children.add(o.find(".bx-clone")).outerWidth(h()),s.viewport.css("height",u()),s.settings.ticker||x(),s.active.last&&(s.active.index=f()-1),s.active.index>=f()&&(s.active.last=!0),s.settings.pager&&!s.settings.pagerCustom&&(S(),P(s.active.index)),s.settings.ariaHidden&&X(s.active.index*m())},o.destroySlider=function(){s.initialized&&(s.initialized=!1,e(".bx-clone",this).remove(),s.children.each(function(){void 0!==e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!==e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),s.controls.el&&s.controls.el.remove(),s.controls.next&&s.controls.next.remove(),s.controls.prev&&s.controls.prev.remove(),s.pagerEl&&s.settings.controls&&!s.settings.pagerCustom&&s.pagerEl.remove(),e(".bx-caption",this).remove(),s.controls.autoEl&&s.controls.autoEl.remove(),clearInterval(s.interval),s.settings.responsive&&e(window).unbind("resize",_),s.settings.keyboardEnabled&&e(document).unbind("keydown",L),e(this).removeData("bxSlider"))},o.reloadSlider=function(t){void 0!==t&&(n=t),o.destroySlider(),l(),e(o).data("bxSlider",this)},l(),e(o).data("bxSlider",this),this}}}(jQuery),$(function(){var e=$(".sidebar"),t=$(".navbar__links"),i=$(".navbar"),n=$("#burger");$(".links__item"),$(".sidebarlayout");e.click(function(){t.toggleClass("--visible"),e.toggleClass("--on"),n.toggleClass("close").toggleClass("opened")}),i.siblings().click(function(){t.removeClass("--visible"),e.removeClass("--on"),n.addClass("close").removeClass("opened")});var s=$("#show-pop-up"),o=$(".wpbtn-footer"),r=$(".cover"),a=$(".close-button"),l=$(".whitepapper"),d=$("#show-feedback"),c=$(".feedback-wrap"),g=$(".space-close"),u=$("#qr-wechat"),p=$("#link-wechat"),h=$(".feedback-ico");u.hide().click(function(){u.fadeToggle(600),h.delay(600).fadeToggle(400)}),p.click(function(e){e.preventDefault(),u.delay(400).fadeToggle(600),h.fadeToggle(400)}),d.click(function(e){e.preventDefault(),c.fadeToggle("400"),d.toggleClass("white"),g.toggle(400)}),g.click(function(){c.fadeOut(400),d.removeClass("white"),g.hide()}),s.click(function(e){e.preventDefault(),r.fadeIn(400),l.fadeIn(400)}),o.click(function(e){e.preventDefault(),r.fadeIn(400),l.fadeIn(400)}),a.click(function(){r.fadeOut(400),l.fadeOut(400)}),r.click(function(){r.fadeOut(400),l.fadeOut(400)});var v=$(".hexogon"),f=$(".line"),m=$("g.text"),x=$(".roadmap");f.hide(),m.hide(),v.click(function(){x.addClass("step1"),setTimeout(function(){x.addClass("step2")},1200),setTimeout(function(){f.fadeIn("1000"),m.delay(1e3).fadeIn("400")},2e3)});var b=($("a.lang"),$("#lang-us"),$("#lang-cn"),$("#lang-in"),$(".langswitch-wrap")),S=$(".langswitch"),w=$(".langswitch-carusel");b.click(function(){S.toggle(400),$(".links__item").toggleClass("hided")}),w.bxSlider({auto:!0,controls:!1,pause:2e3,pager:!1});var k=$(".pop-up-video"),C=$("#play-video-eng-btn"),y=$("#play-video-cn-btn");C.click(function(){k.append('<iframe id="video" src="https://www.youtube.com/embed/p1YiDKlSe8k?rel=0&autoplay=1" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),k.fadeIn(700)}),y.click(function(){k.append('<video id="video" controls autoplay><source src="http://onplace.io/img/video/onplace-china-subtitle.mp4" type="video/mp4"/></video>'),k.fadeIn(700)}),$(".close-button-video").click(function(e){var t=$("#video"),i=$("#video-pop-up");e.preventDefault(),k.hide(700),i.remove(),t.remove()}),$(".partners-carousel").bxSlider({auto:!0,controls:!1,pause:3e3,pager:!1});var I={Empty:$("#picture-empty"),Edward:$("#picture-Edward"),Andrei:$("#picture-Andrei"),Dmitriy:$("#picture-Dmitriy"),Ilya:$("#picture-Ilya"),Mike:$("#picture-Mike"),Oleg:$("#picture-Oleg"),Michael:$("#picture-Michael"),Eugene:$("#picture-Eugene"),Ruslan:$("#picture-Ruslan"),Vladimir:$("#picture-Vladimir")},E={team:$("#team-description"),Edward:$("#Edward-description"),Andrei:$("#Andrei-description"),Dmitriy:$("#Dmitriy-description"),Ilya:$("#Ilya-description"),Mike:$("#Mike-description"),Oleg:$("#Oleg-description"),Michael:$("#Michael-description"),Eugene:$("#Eugene-description"),Ruslan:$("#Ruslan-description"),Vladimir:$("#Vladimir-description")},M={total:$(".backgrounds-item"),Edward:$("#Edward-background"),Andrei:$("#Andrei-background"),Mike:$("#Mike-background"),Dmitriy:$("#Dmitriy-background"),Ilya:$("#Ilya-background"),Oleg:$("#Oleg-background"),Michael:$("#Michael-background"),Eugene:$("#Eugene-background"),Ruslan:$("#Ruslan-background"),Vladimir:$("#Vladimir-background")},T=$(".member-picture"),P=$(".blue_polygons"),O=$(".team");E.team.show(),T.click(function(){P.fadeOut(800),O.addClass("white")}),I.Empty.click(function(e){e.preventDefault(),M.total.fadeOut(800),E.team.fadeIn(800).siblings().fadeOut(800),P.fadeIn(800),O.removeClass("white")}),I.Andrei.click(function(e){e.preventDefault(),M.Andrei.fadeIn(800).siblings().fadeOut(800),E.Andrei.fadeIn(800).siblings().fadeOut(800)}),I.Edward.click(function(e){e.preventDefault(),M.Edward.fadeIn(800).siblings().fadeOut(800),E.Edward.fadeIn(800).siblings().fadeOut(800)}),I.Dmitriy.click(function(e){e.preventDefault(),M.Dmitriy.fadeIn(800).siblings().fadeOut(800),E.Dmitriy.fadeIn(800).siblings().fadeOut(800)}),I.Ilya.click(function(e){e.preventDefault(),M.Ilya.fadeIn(800).siblings().fadeOut(800),E.Ilya.fadeIn(800).siblings().fadeOut(800)}),I.Mike.click(function(e){e.preventDefault(),M.Mike.fadeIn(800).siblings().fadeOut(800),E.Mike.fadeIn(800).siblings().fadeOut(800)}),I.Oleg.click(function(e){e.preventDefault(),M.Oleg.fadeIn(800).siblings().fadeOut(800),E.Oleg.fadeIn(800).siblings().fadeOut(800)}),I.Michael.click(function(e){e.preventDefault(),M.Michael.fadeIn(800).siblings().fadeOut(800),E.Michael.fadeIn(800).siblings().fadeOut(800)}),I.Eugene.click(function(e){e.preventDefault(),M.Eugene.fadeIn(800).siblings().fadeOut(800),E.Eugene.fadeIn(800).siblings().fadeOut(800)}),I.Ruslan.click(function(e){e.preventDefault(),M.Ruslan.fadeIn(800).siblings().fadeOut(800),E.Ruslan.fadeIn(800).siblings().fadeOut(800)}),I.Vladimir.click(function(e){e.preventDefault(),M.Vladimir.fadeIn(800).siblings().fadeOut(800),E.Vladimir.fadeIn(800).siblings().fadeOut(800)}),$(window).scroll(function(){var e=$(this).scrollTop();M.total.css({transform:"translate(0px, -"+e/3+"px)"})})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRlZmF1bHRzIiwibW9kZSIsInNsaWRlU2VsZWN0b3IiLCJpbmZpbml0ZUxvb3AiLCJoaWRlQ29udHJvbE9uRW5kIiwic3BlZWQiLCJlYXNpbmciLCJzbGlkZU1hcmdpbiIsInN0YXJ0U2xpZGUiLCJyYW5kb21TdGFydCIsImNhcHRpb25zIiwidGlja2VyIiwidGlja2VySG92ZXIiLCJhZGFwdGl2ZUhlaWdodCIsImFkYXB0aXZlSGVpZ2h0U3BlZWQiLCJ2aWRlbyIsInVzZUNTUyIsInByZWxvYWRJbWFnZXMiLCJyZXNwb25zaXZlIiwic2xpZGVaSW5kZXgiLCJ3cmFwcGVyQ2xhc3MiLCJ0b3VjaEVuYWJsZWQiLCJzd2lwZVRocmVzaG9sZCIsIm9uZVRvT25lVG91Y2giLCJwcmV2ZW50RGVmYXVsdFN3aXBlWCIsInByZXZlbnREZWZhdWx0U3dpcGVZIiwiYXJpYUxpdmUiLCJhcmlhSGlkZGVuIiwia2V5Ym9hcmRFbmFibGVkIiwicGFnZXIiLCJwYWdlclR5cGUiLCJwYWdlclNob3J0U2VwYXJhdG9yIiwicGFnZXJTZWxlY3RvciIsImJ1aWxkUGFnZXIiLCJwYWdlckN1c3RvbSIsImNvbnRyb2xzIiwibmV4dFRleHQiLCJwcmV2VGV4dCIsIm5leHRTZWxlY3RvciIsInByZXZTZWxlY3RvciIsImF1dG9Db250cm9scyIsInN0YXJ0VGV4dCIsInN0b3BUZXh0IiwiYXV0b0NvbnRyb2xzQ29tYmluZSIsImF1dG9Db250cm9sc1NlbGVjdG9yIiwiYXV0byIsInBhdXNlIiwiYXV0b1N0YXJ0IiwiYXV0b0RpcmVjdGlvbiIsInN0b3BBdXRvT25DbGljayIsImF1dG9Ib3ZlciIsImF1dG9EZWxheSIsImF1dG9TbGlkZUZvck9uZVBhZ2UiLCJtaW5TbGlkZXMiLCJtYXhTbGlkZXMiLCJtb3ZlU2xpZGVzIiwic2xpZGVXaWR0aCIsInNocmlua0l0ZW1zIiwib25TbGlkZXJMb2FkIiwib25TbGlkZUJlZm9yZSIsIm9uU2xpZGVBZnRlciIsIm9uU2xpZGVOZXh0Iiwib25TbGlkZVByZXYiLCJvblNsaWRlclJlc2l6ZSIsImZuIiwiYnhTbGlkZXIiLCJvcHRpb25zIiwidGhpcyIsImxlbmd0aCIsImVhY2giLCJzbGlkZXIiLCJlbCIsIndpbmRvd1dpZHRoIiwid2luZG93Iiwid2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJoZWlnaHQiLCJkYXRhIiwiaW5pdCIsInNldHRpbmdzIiwiZXh0ZW5kIiwicGFyc2VJbnQiLCJjaGlsZHJlbiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImFjdGl2ZSIsImluZGV4IiwiY2Fyb3VzZWwiLCJtaW5UaHJlc2hvbGQiLCJtYXhUaHJlc2hvbGQiLCJ3b3JraW5nIiwiaW50ZXJ2YWwiLCJhbmltUHJvcCIsInVzaW5nQ1NTIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicHJvcHMiLCJpIiwidW5kZWZpbmVkIiwic3R5bGUiLCJjc3NQcmVmaXgiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJhdHRyIiwic2V0dXAiLCJwcmVsb2FkU2VsZWN0b3IiLCJlcSIsIndyYXAiLCJ2aWV3cG9ydCIsInBhcmVudCIsImxvYWRlciIsInByZXBlbmQiLCJjc3MiLCJwb3NpdGlvbiIsIm92ZXJmbG93IiwibWF4V2lkdGgiLCJnZXRWaWV3cG9ydE1heFdpZHRoIiwiZmxvYXQiLCJsaXN0U3R5bGUiLCJnZXRTbGlkZVdpZHRoIiwiekluZGV4IiwiZGlzcGxheSIsImFwcGVuZENhcHRpb25zIiwibGFzdCIsImdldFBhZ2VyUXR5IiwiZml0VmlkcyIsImFwcGVuZENvbnRyb2xzIiwiYXBwZW5kQ29udHJvbHNBdXRvIiwiYXBwZW5kUGFnZXIiLCJhZnRlciIsImxvYWRFbGVtZW50cyIsInN0YXJ0Iiwic2VsZWN0b3IiLCJjYWxsYmFjayIsInRvdGFsIiwiZmluZCIsImNvdW50Iiwib25lIiwiY29tcGxldGUiLCJ0cmlnZ2VyIiwic2xpY2UiLCJzbGljZUFwcGVuZCIsImNsb25lIiwiYWRkQ2xhc3MiLCJzbGljZVByZXBlbmQiLCJhcHBlbmQiLCJyZW1vdmUiLCJzZXRTbGlkZVBvc2l0aW9uIiwiZ2V0Vmlld3BvcnRIZWlnaHQiLCJyZWRyYXdTbGlkZXIiLCJjYWxsIiwiaW5pdGlhbGl6ZWQiLCJiaW5kIiwicmVzaXplV2luZG93IiwiaW5pdEF1dG8iLCJpbml0VGlja2VyIiwidXBkYXRlUGFnZXJBY3RpdmUiLCJ1cGRhdGVEaXJlY3Rpb25Db250cm9scyIsImluaXRUb3VjaCIsImtleWRvd24iLCJrZXlQcmVzcyIsImN1cnJlbnRJbmRleCIsImdldE1vdmVCeSIsImFkZCIsIm91dGVySGVpZ2h0IiwibWF4IiwiYXBwbHkiLCJtYXAiLCJnZXQiLCJwYXJzZUZsb2F0IiwibmV3RWxXaWR0aCIsIndyYXBXaWR0aCIsImNlaWwiLCJnZXROdW1iZXJTbGlkZXNTaG93aW5nIiwic2xpZGVzU2hvd2luZyIsImNoaWxkV2lkdGgiLCJmaXJzdCIsInBhZ2VyUXR5IiwiYnJlYWtQb2ludCIsImNvdW50ZXIiLCJsYXN0Q2hpbGQiLCJsYXN0U2hvd2luZ0luZGV4Iiwic2V0UG9zaXRpb25Qcm9wZXJ0eSIsImxlZnQiLCJvdXRlcldpZHRoIiwidG9wIiwidmFsdWUiLCJ0eXBlIiwiZHVyYXRpb24iLCJwYXJhbXMiLCJhbmltYXRlT2JqIiwicHJvcFZhbHVlIiwiZSIsInRhcmdldCIsImlzIiwidW5iaW5kIiwidXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24iLCJyZXNldFZhbHVlIiwidGlja2VyTG9vcCIsImFuaW1hdGUiLCJwb3B1bGF0ZVBhZ2VyIiwicGFnZXJIdG1sIiwibGlua0NvbnRlbnQiLCJpc0Z1bmN0aW9uIiwicGFnZXJFbCIsImh0bWwiLCJvbiIsImNsaWNrUGFnZXJCaW5kIiwibmV4dCIsInByZXYiLCJjbGlja05leHRCaW5kIiwiY2xpY2tQcmV2QmluZCIsImRpcmVjdGlvbkVsIiwic3RvcCIsImF1dG9FbCIsImNsaWNrU3RhcnRCaW5kIiwiY2xpY2tTdG9wQmluZCIsInVwZGF0ZUF1dG9Db250cm9scyIsInRpdGxlIiwicHJldmVudERlZmF1bHQiLCJoYXNDbGFzcyIsInN0b3BBdXRvIiwiZ29Ub05leHRTbGlkZSIsImdvVG9QcmV2U2xpZGUiLCJzdGFydEF1dG8iLCJwYWdlckxpbmsiLCJwYWdlckluZGV4IiwiY3VycmVudFRhcmdldCIsImdvVG9TbGlkZSIsInNsaWRlSW5kZXgiLCJsZW4iLCJyZW1vdmVDbGFzcyIsIm9sZEluZGV4Iiwic3RhdGUiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJibHVyIiwiaG92ZXIiLCJhdXRvUGF1c2VkIiwidHJhbnNmb3JtIiwiaWR4IiwicmF0aW8iLCJwcm9wZXJ0eSIsIm5ld1NwZWVkIiwidG90YWxEaW1lbnMiLCJzdGFydFBvc2l0aW9uIiwic3BsaXQiLCJhYnMiLCJyZXN1bWVTcGVlZCIsImFuaW1hdGVQcm9wZXJ0eSIsInJlc2V0IiwiaXNPblNjcmVlbiIsIndpbiIsInNjcm9sbFRvcCIsInNjcm9sbExlZnQiLCJib3VuZHMiLCJvZmZzZXQiLCJyaWdodCIsImJvdHRvbSIsImFjdGl2ZUVsZW1lbnRUYWciLCJhY3RpdmVFbGVtZW50IiwidGFnTmFtZSIsInRhZ0ZpbHRlcnMiLCJwIiwiUmVnRXhwIiwicmVzdWx0IiwiZXhlYyIsImtleUNvZGUiLCJ0b3VjaCIsIngiLCJ5IiwiZW5kIiwib25Ub3VjaFN0YXJ0Iiwib3JpZ2luYWxQb3MiLCJvcmlnIiwib3JpZ2luYWxFdmVudCIsInRvdWNoUG9pbnRzIiwiY2hhbmdlZFRvdWNoZXMiLCJwYWdlWCIsInBhZ2VZIiwic2V0UG9pbnRlckNhcHR1cmUiLCJwb2ludGVySWQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvblBvaW50ZXJDYW5jZWwiLCJyZWxlYXNlUG9pbnRlckNhcHR1cmUiLCJ4TW92ZW1lbnQiLCJ5TW92ZW1lbnQiLCJjaGFuZ2UiLCJkaXN0YW5jZSIsIndpbmRvd1dpZHRoTmV3Iiwid2luZG93SGVpZ2h0TmV3IiwiYXBwbHlBcmlhSGlkZGVuQXR0cmlidXRlcyIsInN0YXJ0VmlzaWJsZUluZGV4IiwibnVtYmVyT2ZTbGlkZXNTaG93aW5nIiwic2V0U2xpZGVJbmRleCIsImRpcmVjdGlvbiIsInJlcXVlc3RFbCIsInBlcmZvcm1UcmFuc2l0aW9uIiwibW92ZUJ5IiwiZmlsdGVyIiwiZmFkZU91dCIsImZhZGVJbiIsInByZXZlbnRDb250cm9sVXBkYXRlIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiZ2V0Q3VycmVudFNsaWRlIiwiZ2V0Q3VycmVudFNsaWRlRWxlbWVudCIsImdldFNsaWRlRWxlbWVudCIsImdldFNsaWRlQ291bnQiLCJpc1dvcmtpbmciLCJkZXN0cm95U2xpZGVyIiwicmVtb3ZlQXR0ciIsInVud3JhcCIsInJlbW92ZURhdGEiLCJyZWxvYWRTbGlkZXIiLCJqUXVlcnkiLCIkc2lkZWJhciIsIiRuYXZiYXIiLCIkbmF2YmFyQ29udGFpbmVyIiwiJGJ1cmdlciIsImNsaWNrIiwidG9nZ2xlQ2xhc3MiLCJzaWJsaW5ncyIsIiR3aGl0ZVBhcHBlciIsIiR3aGl0ZVBhcHBlckJ0biIsIiRvdmVybGF5IiwiJGNsb3NlQnRuIiwiJHBvcFVwV2hpdGVwYXBwZXIiLCIkZmVlZGJhY2siLCIkcG9wVXBGZWVkYmFjayIsIiRjbG9zZVNwYWNlIiwiJHFyV2VDaGF0IiwiJGxpbmtXZUNoYXQiLCIkZmVlZGJhY2tMaW5rcyIsImhpZGUiLCJmYWRlVG9nZ2xlIiwiZGVsYXkiLCJ0b2dnbGUiLCJldmVudCIsIiRoZXhhZ29uZSIsIiRsaW5lQ29ubmVjdCIsIiR0ZXh0UG9pbnRzIiwiJHJvYWRtYXAiLCIkbGFuZ0J0biIsIiRsYW5nU3dpdGNoIiwiJGxhbmdTd2l0Y2hDYXJ1c2VsIiwiJHBvcFVwVmlkZW9Db250YWluZXIiLCIkcG9wVXBWaWRlb0J0biIsIiRwb3BVcFZpZGVvQ25CdG4iLCIkdmlkZW8iLCIkdmlkZW9TY3JlZW4iLCJwaWN0dXJlcyIsIkVtcHR5IiwiRWR3YXJkIiwiQW5kcmVpIiwiRG1pdHJpeSIsIklseWEiLCJNaWtlIiwiT2xlZyIsIk1pY2hhZWwiLCJFdWdlbmUiLCJSdXNsYW4iLCJWbGFkaW1pciIsImRlc2NyaXB0aW9uIiwidGVhbSIsImJhY2tncm91bmRzIiwiaGV4b2xpbmtzIiwiYmx1ZWhleGVzIiwidGVhbVNlY3Rpb24iLCJzaG93Iiwic2Nyb2xsIiwic3QiXSwibWFwcGluZ3MiOiJDQUFDLFNBQVVBLEdBRVQsR0FBSUMsSUFHRkMsS0FBTSxhQUNOQyxjQUFlLEdBQ2ZDLGNBQWMsRUFDZEMsa0JBQWtCLEVBQ2xCQyxNQUFPLElBQ1BDLE9BQVEsS0FDUkMsWUFBYSxFQUNiQyxXQUFZLEVBQ1pDLGFBQWEsRUFDYkMsVUFBVSxFQUNWQyxRQUFRLEVBQ1JDLGFBQWEsRUFDYkMsZ0JBQWdCLEVBQ2hCQyxvQkFBcUIsSUFDckJDLE9BQU8sRUFDUEMsUUFBUSxFQUNSQyxjQUFlLFVBQ2ZDLFlBQVksRUFDWkMsWUFBYSxHQUNiQyxhQUFjLGFBR2RDLGNBQWMsRUFDZEMsZUFBZ0IsR0FDaEJDLGVBQWUsRUFDZkMsc0JBQXNCLEVBQ3RCQyxzQkFBc0IsRUFHdEJDLFVBQVUsRUFDVkMsWUFBWSxFQUdaQyxpQkFBaUIsRUFHakJDLE9BQU8sRUFDUEMsVUFBVyxPQUNYQyxvQkFBcUIsTUFDckJDLGNBQWUsS0FDZkMsV0FBWSxLQUNaQyxZQUFhLEtBR2JDLFVBQVUsRUFDVkMsU0FBVSxPQUNWQyxTQUFVLE9BQ1ZDLGFBQWMsS0FDZEMsYUFBYyxLQUNkQyxjQUFjLEVBQ2RDLFVBQVcsUUFDWEMsU0FBVSxPQUNWQyxxQkFBcUIsRUFDckJDLHFCQUFzQixLQUd0QkMsTUFBTSxFQUNOQyxNQUFPLElBQ1BDLFdBQVcsRUFDWEMsY0FBZSxPQUNmQyxpQkFBaUIsRUFDakJDLFdBQVcsRUFDWEMsVUFBVyxFQUNYQyxxQkFBcUIsRUFHckJDLFVBQVcsRUFDWEMsVUFBVyxFQUNYQyxXQUFZLEVBQ1pDLFdBQVksRUFDWkMsYUFBYSxFQUdiQyxhQUFjLFdBQWEsT0FBTyxHQUNsQ0MsY0FBZSxXQUFhLE9BQU8sR0FDbkNDLGFBQWMsV0FBYSxPQUFPLEdBQ2xDQyxZQUFhLFdBQWEsT0FBTyxHQUNqQ0Ms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QU90RGhULEVBQUUwRSxRQUFRNFMsT0FBTyxXQUNmLEdBQUlDLEdBQUt2WCxFQUFFb0UsTUFBTTRMLFdBRWpCaUgsR0FBWXhPLE1BQU10QixLQUFNK0gsVUFBVyxtQkFBcUJxSSxFQUFHLEVBQUciLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oJCkge1xyXG5cclxuICB2YXIgZGVmYXVsdHMgPSB7XHJcblxyXG4gICAgLy8gR0VORVJBTFxyXG4gICAgbW9kZTogJ2hvcml6b250YWwnLFxyXG4gICAgc2xpZGVTZWxlY3RvcjogJycsXHJcbiAgICBpbmZpbml0ZUxvb3A6IHRydWUsXHJcbiAgICBoaWRlQ29udHJvbE9uRW5kOiBmYWxzZSxcclxuICAgIHNwZWVkOiA1MDAsXHJcbiAgICBlYXNpbmc6IG51bGwsXHJcbiAgICBzbGlkZU1hcmdpbjogMCxcclxuICAgIHN0YXJ0U2xpZGU6IDAsXHJcbiAgICByYW5kb21TdGFydDogZmFsc2UsXHJcbiAgICBjYXB0aW9uczogZmFsc2UsXHJcbiAgICB0aWNrZXI6IGZhbHNlLFxyXG4gICAgdGlja2VySG92ZXI6IGZhbHNlLFxyXG4gICAgYWRhcHRpdmVIZWlnaHQ6IGZhbHNlLFxyXG4gICAgYWRhcHRpdmVIZWlnaHRTcGVlZDogNTAwLFxyXG4gICAgdmlkZW86IGZhbHNlLFxyXG4gICAgdXNlQ1NTOiB0cnVlLFxyXG4gICAgcHJlbG9hZEltYWdlczogJ3Zpc2libGUnLFxyXG4gICAgcmVzcG9uc2l2ZTogdHJ1ZSxcclxuICAgIHNsaWRlWkluZGV4OiA1MCxcclxuICAgIHdyYXBwZXJDbGFzczogJ2J4LXdyYXBwZXInLFxyXG5cclxuICAgIC8vIFRPVUNIXHJcbiAgICB0b3VjaEVuYWJsZWQ6IHRydWUsXHJcbiAgICBzd2lwZVRocmVzaG9sZDogNTAsXHJcbiAgICBvbmVUb09uZVRvdWNoOiB0cnVlLFxyXG4gICAgcHJldmVudERlZmF1bHRTd2lwZVg6IHRydWUsXHJcbiAgICBwcmV2ZW50RGVmYXVsdFN3aXBlWTogZmFsc2UsXHJcblxyXG4gICAgLy8gQUNDRVNTSUJJTElUWVxyXG4gICAgYXJpYUxpdmU6IHRydWUsXHJcbiAgICBhcmlhSGlkZGVuOiB0cnVlLFxyXG5cclxuICAgIC8vIEtFWUJPQVJEXHJcbiAgICBrZXlib2FyZEVuYWJsZWQ6IGZhbHNlLFxyXG5cclxuICAgIC8vIFBBR0VSXHJcbiAgICBwYWdlcjogdHJ1ZSxcclxuICAgIHBhZ2VyVHlwZTogJ2Z1bGwnLFxyXG4gICAgcGFnZXJTaG9ydFNlcGFyYXRvcjogJyAvICcsXHJcbiAgICBwYWdlclNlbGVjdG9yOiBudWxsLFxyXG4gICAgYnVpbGRQYWdlcjogbnVsbCxcclxuICAgIHBhZ2VyQ3VzdG9tOiBudWxsLFxyXG5cclxuICAgIC8vIENPTlRST0xTXHJcbiAgICBjb250cm9sczogdHJ1ZSxcclxuICAgIG5leHRUZXh0OiAnTmV4dCcsXHJcbiAgICBwcmV2VGV4dDogJ1ByZXYnLFxyXG4gICAgbmV4dFNlbGVjdG9yOiBudWxsLFxyXG4gICAgcHJldlNlbGVjdG9yOiBudWxsLFxyXG4gICAgYXV0b0NvbnRyb2xzOiBmYWxzZSxcclxuICAgIHN0YXJ0VGV4dDogJ1N0YXJ0JyxcclxuICAgIHN0b3BUZXh0OiAnU3RvcCcsXHJcbiAgICBhdXRvQ29udHJvbHNDb21iaW5lOiBmYWxzZSxcclxuICAgIGF1dG9Db250cm9sc1NlbGVjdG9yOiBudWxsLFxyXG5cclxuICAgIC8vIEFVVE9cclxuICAgIGF1dG86IGZhbHNlLFxyXG4gICAgcGF1c2U6IDQwMDAsXHJcbiAgICBhdXRvU3RhcnQ6IHRydWUsXHJcbiAgICBhdXRvRGlyZWN0aW9uOiAnbmV4dCcsXHJcbiAgICBzdG9wQXV0b09uQ2xpY2s6IGZhbHNlLFxyXG4gICAgYXV0b0hvdmVyOiBmYWxzZSxcclxuICAgIGF1dG9EZWxheTogMCxcclxuICAgIGF1dG9TbGlkZUZvck9uZVBhZ2U6IGZhbHNlLFxyXG5cclxuICAgIC8vIENBUk9VU0VMXHJcbiAgICBtaW5TbGlkZXM6IDEsXHJcbiAgICBtYXhTbGlkZXM6IDEsXHJcbiAgICBtb3ZlU2xpZGVzOiAwLFxyXG4gICAgc2xpZGVXaWR0aDogMCxcclxuICAgIHNocmlua0l0ZW1zOiBmYWxzZSxcclxuXHJcbiAgICAvLyBDQUxMQkFDS1NcclxuICAgIG9uU2xpZGVyTG9hZDogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxyXG4gICAgb25TbGlkZUJlZm9yZTogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxyXG4gICAgb25TbGlkZUFmdGVyOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXHJcbiAgICBvblNsaWRlTmV4dDogZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9LFxyXG4gICAgb25TbGlkZVByZXY6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSxcclxuICAgIG9uU2xpZGVyUmVzaXplOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH1cclxuICB9O1xyXG5cclxuICAkLmZuLmJ4U2xpZGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG5cclxuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzdXBwb3J0IG11bHRpcGxlIGVsZW1lbnRzXHJcbiAgICBpZiAodGhpcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAkKHRoaXMpLmJ4U2xpZGVyKG9wdGlvbnMpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY3JlYXRlIGEgbmFtZXNwYWNlIHRvIGJlIHVzZWQgdGhyb3VnaG91dCB0aGUgcGx1Z2luXHJcbiAgICB2YXIgc2xpZGVyID0ge30sXHJcbiAgICAvLyBzZXQgYSByZWZlcmVuY2UgdG8gb3VyIHNsaWRlciBlbGVtZW50XHJcbiAgICBlbCA9IHRoaXMsXHJcbiAgICAvLyBnZXQgdGhlIG9yaWdpbmFsIHdpbmRvdyBkaW1lbnMgKHRoYW5rcyBhIGxvdCBJRSlcclxuICAgIHdpbmRvd1dpZHRoID0gJCh3aW5kb3cpLndpZHRoKCksXHJcbiAgICB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XHJcblxyXG4gICAgLy8gUmV0dXJuIGlmIHNsaWRlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkXHJcbiAgICBpZiAoJChlbCkuZGF0YSgnYnhTbGlkZXInKSkgeyByZXR1cm47IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKiA9IFBSSVZBVEUgRlVOQ1RJT05TXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyBuYW1lc3BhY2Ugc2V0dGluZ3MgdG8gYmUgdXNlZCB0aHJvdWdob3V0IHBsdWdpblxyXG4gICAgICovXHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBSZXR1cm4gaWYgc2xpZGVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWRcclxuICAgICAgaWYgKCQoZWwpLmRhdGEoJ2J4U2xpZGVyJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIG1lcmdlIHVzZXItc3VwcGxpZWQgb3B0aW9ucyB3aXRoIHRoZSBkZWZhdWx0c1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG4gICAgICAvLyBwYXJzZSBzbGlkZVdpZHRoIHNldHRpbmdcclxuICAgICAgc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGggPSBwYXJzZUludChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCk7XHJcbiAgICAgIC8vIHN0b3JlIHRoZSBvcmlnaW5hbCBjaGlsZHJlblxyXG4gICAgICBzbGlkZXIuY2hpbGRyZW4gPSBlbC5jaGlsZHJlbihzbGlkZXIuc2V0dGluZ3Muc2xpZGVTZWxlY3Rvcik7XHJcbiAgICAgIC8vIGNoZWNrIGlmIGFjdHVhbCBudW1iZXIgb2Ygc2xpZGVzIGlzIGxlc3MgdGhhbiBtaW5TbGlkZXMgLyBtYXhTbGlkZXNcclxuICAgICAgaWYgKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPCBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzKSB7IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgPSBzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoOyB9XHJcbiAgICAgIGlmIChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIDwgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcykgeyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgfVxyXG4gICAgICAvLyBpZiByYW5kb20gc3RhcnQsIHNldCB0aGUgc3RhcnRTbGlkZSBzZXR0aW5nIHRvIHJhbmRvbSBudW1iZXJcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5yYW5kb21TdGFydCkgeyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpOyB9XHJcbiAgICAgIC8vIHN0b3JlIGFjdGl2ZSBzbGlkZSBpbmZvcm1hdGlvblxyXG4gICAgICBzbGlkZXIuYWN0aXZlID0geyBpbmRleDogc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUgfTtcclxuICAgICAgLy8gc3RvcmUgaWYgdGhlIHNsaWRlciBpcyBpbiBjYXJvdXNlbCBtb2RlIChkaXNwbGF5aW5nIC8gbW92aW5nIG11bHRpcGxlIHNsaWRlcylcclxuICAgICAgc2xpZGVyLmNhcm91c2VsID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyA+IDEgfHwgc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgIC8vIGlmIGNhcm91c2VsLCBmb3JjZSBwcmVsb2FkSW1hZ2VzID0gJ2FsbCdcclxuICAgICAgaWYgKHNsaWRlci5jYXJvdXNlbCkgeyBzbGlkZXIuc2V0dGluZ3MucHJlbG9hZEltYWdlcyA9ICdhbGwnOyB9XHJcbiAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgbWluIC8gbWF4IHdpZHRoIHRocmVzaG9sZHMgYmFzZWQgb24gbWluIC8gbWF4IG51bWJlciBvZiBzbGlkZXNcclxuICAgICAgLy8gdXNlZCB0byBzZXR1cCBhbmQgdXBkYXRlIGNhcm91c2VsIHNsaWRlcyBkaW1lbnNpb25zXHJcbiAgICAgIHNsaWRlci5taW5UaHJlc2hvbGQgPSAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKSArICgoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpICogc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcclxuICAgICAgc2xpZGVyLm1heFRocmVzaG9sZCA9IChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICogc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgpICsgKChzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gMSkgKiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pO1xyXG4gICAgICAvLyBzdG9yZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgc2xpZGVyIChpZiBjdXJyZW50bHkgYW5pbWF0aW5nLCB3b3JraW5nIGlzIHRydWUpXHJcbiAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XHJcbiAgICAgIC8vIGluaXRpYWxpemUgdGhlIGNvbnRyb2xzIG9iamVjdFxyXG4gICAgICBzbGlkZXIuY29udHJvbHMgPSB7fTtcclxuICAgICAgLy8gaW5pdGlhbGl6ZSBhbiBhdXRvIGludGVydmFsXHJcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XHJcbiAgICAgIC8vIGRldGVybWluZSB3aGljaCBwcm9wZXJ0eSB0byB1c2UgZm9yIHRyYW5zaXRpb25zXHJcbiAgICAgIHNsaWRlci5hbmltUHJvcCA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnID8gJ3RvcCcgOiAnbGVmdCc7XHJcbiAgICAgIC8vIGRldGVybWluZSBpZiBoYXJkd2FyZSBhY2NlbGVyYXRpb24gY2FuIGJlIHVzZWRcclxuICAgICAgc2xpZGVyLnVzaW5nQ1NTID0gc2xpZGVyLnNldHRpbmdzLnVzZUNTUyAmJiBzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ2ZhZGUnICYmIChmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyBjcmVhdGUgb3VyIHRlc3QgZGl2IGVsZW1lbnRcclxuICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgLy8gY3NzIHRyYW5zaXRpb24gcHJvcGVydGllc1xyXG4gICAgICAgIHByb3BzID0gWydXZWJraXRQZXJzcGVjdGl2ZScsICdNb3pQZXJzcGVjdGl2ZScsICdPUGVyc3BlY3RpdmUnLCAnbXNQZXJzcGVjdGl2ZSddO1xyXG4gICAgICAgIC8vIHRlc3QgZm9yIGVhY2ggcHJvcGVydHlcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAoZGl2LnN0eWxlW3Byb3BzW2ldXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNsaWRlci5jc3NQcmVmaXggPSBwcm9wc1tpXS5yZXBsYWNlKCdQZXJzcGVjdGl2ZScsICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBzbGlkZXIuYW5pbVByb3AgPSAnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2Zvcm0nO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9KCkpO1xyXG4gICAgICAvLyBpZiB2ZXJ0aWNhbCBtb2RlIGFsd2F5cyBtYWtlIG1heFNsaWRlcyBhbmQgbWluU2xpZGVzIGVxdWFsXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlczsgfVxyXG4gICAgICAvLyBzYXZlIG9yaWdpbmFsIHN0eWxlIGRhdGFcclxuICAgICAgZWwuZGF0YSgnb3JpZ1N0eWxlJywgZWwuYXR0cignc3R5bGUnKSk7XHJcbiAgICAgIGVsLmNoaWxkcmVuKHNsaWRlci5zZXR0aW5ncy5zbGlkZVNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykuZGF0YSgnb3JpZ1N0eWxlJywgJCh0aGlzKS5hdHRyKCdzdHlsZScpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBwZXJmb3JtIGFsbCBET00gLyBDU1MgbW9kaWZpY2F0aW9uc1xyXG4gICAgICBzZXR1cCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFBlcmZvcm1zIGFsbCBET00gYW5kIENTUyBtb2RpZmljYXRpb25zXHJcbiAgICAgKi9cclxuICAgIHZhciBzZXR1cCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcHJlbG9hZFNlbGVjdG9yID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5zZXR0aW5ncy5zdGFydFNsaWRlKTsgLy8gc2V0IHRoZSBkZWZhdWx0IHByZWxvYWQgc2VsZWN0b3IgKHZpc2libGUpXHJcblxyXG4gICAgICAvLyB3cmFwIGVsIGluIGEgd3JhcHBlclxyXG4gICAgICBlbC53cmFwKCc8ZGl2IGNsYXNzPVwiJyArIHNsaWRlci5zZXR0aW5ncy53cmFwcGVyQ2xhc3MgKyAnXCI+PGRpdiBjbGFzcz1cImJ4LXZpZXdwb3J0XCI+PC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgIC8vIHN0b3JlIGEgbmFtZXNwYWNlIHJlZmVyZW5jZSB0byAuYngtdmlld3BvcnRcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0ID0gZWwucGFyZW50KCk7XHJcblxyXG4gICAgICAvLyBhZGQgYXJpYS1saXZlIGlmIHRoZSBzZXR0aW5nIGlzIGVuYWJsZWQgYW5kIHRpY2tlciBtb2RlIGlzIGRpc2FibGVkXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUxpdmUgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcclxuICAgICAgICBzbGlkZXIudmlld3BvcnQuYXR0cignYXJpYS1saXZlJywgJ3BvbGl0ZScpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGFkZCBhIGxvYWRpbmcgZGl2IHRvIGRpc3BsYXkgd2hpbGUgaW1hZ2VzIGFyZSBsb2FkaW5nXHJcbiAgICAgIHNsaWRlci5sb2FkZXIgPSAkKCc8ZGl2IGNsYXNzPVwiYngtbG9hZGluZ1wiIC8+Jyk7XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC5wcmVwZW5kKHNsaWRlci5sb2FkZXIpO1xyXG4gICAgICAvLyBzZXQgZWwgdG8gYSBtYXNzaXZlIHdpZHRoLCB0byBob2xkIGFueSBuZWVkZWQgc2xpZGVzXHJcbiAgICAgIC8vIGFsc28gc3RyaXAgYW55IG1hcmdpbiBhbmQgcGFkZGluZyBmcm9tIGVsXHJcbiAgICAgIGVsLmNzcyh7XHJcbiAgICAgICAgd2lkdGg6IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAqIDEwMDAgKyAyMTUpICsgJyUnIDogJ2F1dG8nLFxyXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBpZiB1c2luZyBDU1MsIGFkZCB0aGUgZWFzaW5nIHByb3BlcnR5XHJcbiAgICAgIGlmIChzbGlkZXIudXNpbmdDU1MgJiYgc2xpZGVyLnNldHRpbmdzLmVhc2luZykge1xyXG4gICAgICAgIGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicsIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcpO1xyXG4gICAgICAvLyBpZiBub3QgdXNpbmcgQ1NTIGFuZCBubyBlYXNpbmcgdmFsdWUgd2FzIHN1cHBsaWVkLCB1c2UgdGhlIGRlZmF1bHQgSlMgYW5pbWF0aW9uIGVhc2luZyAoc3dpbmcpXHJcbiAgICAgIH0gZWxzZSBpZiAoIXNsaWRlci5zZXR0aW5ncy5lYXNpbmcpIHtcclxuICAgICAgICBzbGlkZXIuc2V0dGluZ3MuZWFzaW5nID0gJ3N3aW5nJztcclxuICAgICAgfVxyXG4gICAgICAvLyBtYWtlIG1vZGlmaWNhdGlvbnMgdG8gdGhlIHZpZXdwb3J0ICguYngtdmlld3BvcnQpXHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC5jc3Moe1xyXG4gICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG4gICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnXHJcbiAgICAgIH0pO1xyXG4gICAgICBzbGlkZXIudmlld3BvcnQucGFyZW50KCkuY3NzKHtcclxuICAgICAgICBtYXhXaWR0aDogZ2V0Vmlld3BvcnRNYXhXaWR0aCgpXHJcbiAgICAgIH0pO1xyXG4gICAgICAvLyBhcHBseSBjc3MgdG8gYWxsIHNsaWRlciBjaGlsZHJlblxyXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uY3NzKHtcclxuICAgICAgICBmbG9hdDogc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICdub25lJyxcclxuICAgICAgICBsaXN0U3R5bGU6ICdub25lJyxcclxuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJ1xyXG4gICAgICB9KTtcclxuICAgICAgLy8gYXBwbHkgdGhlIGNhbGN1bGF0ZWQgd2lkdGggYWZ0ZXIgdGhlIGZsb2F0IGlzIGFwcGxpZWQgdG8gcHJldmVudCBzY3JvbGxiYXIgaW50ZXJmZXJlbmNlXHJcbiAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3MoJ3dpZHRoJywgZ2V0U2xpZGVXaWR0aCgpKTtcclxuICAgICAgLy8gaWYgc2xpZGVNYXJnaW4gaXMgc3VwcGxpZWQsIGFkZCB0aGUgY3NzXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnICYmIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHsgc2xpZGVyLmNoaWxkcmVuLmNzcygnbWFyZ2luUmlnaHQnLCBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pOyB9XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJyAmJiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gPiAwKSB7IHNsaWRlci5jaGlsZHJlbi5jc3MoJ21hcmdpbkJvdHRvbScsIHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbik7IH1cclxuICAgICAgLy8gaWYgXCJmYWRlXCIgbW9kZSwgYWRkIHBvc2l0aW9uaW5nIGFuZCB6LWluZGV4IENTU1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5jc3Moe1xyXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgICB6SW5kZXg6IDAsXHJcbiAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBwcmVwYXJlIHRoZSB6LWluZGV4IG9uIHRoZSBzaG93aW5nIGVsZW1lbnRcclxuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpLmNzcyh7ekluZGV4OiBzbGlkZXIuc2V0dGluZ3Muc2xpZGVaSW5kZXgsIGRpc3BsYXk6ICdibG9jayd9KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBjcmVhdGUgYW4gZWxlbWVudCB0byBjb250YWluIGFsbCBzbGlkZXIgY29udHJvbHMgKHBhZ2VyLCBzdGFydCAvIHN0b3AsIGV0YylcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzXCIgLz4nKTtcclxuICAgICAgLy8gaWYgY2FwdGlvbnMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jYXB0aW9ucykgeyBhcHBlbmRDYXB0aW9ucygpOyB9XHJcbiAgICAgIC8vIGNoZWNrIGlmIHN0YXJ0U2xpZGUgaXMgbGFzdCBzbGlkZVxyXG4gICAgICBzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuc2V0dGluZ3Muc3RhcnRTbGlkZSA9PT0gZ2V0UGFnZXJRdHkoKSAtIDE7XHJcbiAgICAgIC8vIGlmIHZpZGVvIGlzIHRydWUsIHNldCB1cCB0aGUgZml0VmlkcyBwbHVnaW5cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy52aWRlbykgeyBlbC5maXRWaWRzKCk7IH1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wcmVsb2FkSW1hZ2VzID09PSAnYWxsJyB8fCBzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7IHByZWxvYWRTZWxlY3RvciA9IHNsaWRlci5jaGlsZHJlbjsgfVxyXG4gICAgICAvLyBvbmx5IGNoZWNrIGZvciBjb250cm9sIGFkZGl0aW9uIGlmIG5vdCBpbiBcInRpY2tlclwiIG1vZGVcclxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7XHJcbiAgICAgICAgLy8gaWYgY29udHJvbHMgYXJlIHJlcXVlc3RlZCwgYWRkIHRoZW1cclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB7IGFwcGVuZENvbnRyb2xzKCk7IH1cclxuICAgICAgICAvLyBpZiBhdXRvIGlzIHRydWUsIGFuZCBhdXRvIGNvbnRyb2xzIGFyZSByZXF1ZXN0ZWQsIGFkZCB0aGVtXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMpIHsgYXBwZW5kQ29udHJvbHNBdXRvKCk7IH1cclxuICAgICAgICAvLyBpZiBwYWdlciBpcyByZXF1ZXN0ZWQsIGFkZCBpdFxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHsgYXBwZW5kUGFnZXIoKTsgfVxyXG4gICAgICAgIC8vIGlmIGFueSBjb250cm9sIG9wdGlvbiBpcyByZXF1ZXN0ZWQsIGFkZCB0aGUgY29udHJvbHMgd3JhcHBlclxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgfHwgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyB8fCBzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHsgc2xpZGVyLnZpZXdwb3J0LmFmdGVyKHNsaWRlci5jb250cm9scy5lbCk7IH1cclxuICAgICAgLy8gaWYgdGlja2VyIG1vZGUsIGRvIG5vdCBhbGxvdyBhIHBhZ2VyXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLnNldHRpbmdzLnBhZ2VyID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgICAgbG9hZEVsZW1lbnRzKHByZWxvYWRTZWxlY3Rvciwgc3RhcnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgbG9hZEVsZW1lbnRzID0gZnVuY3Rpb24oc2VsZWN0b3IsIGNhbGxiYWNrKSB7XHJcbiAgICAgIHZhciB0b3RhbCA9IHNlbGVjdG9yLmZpbmQoJ2ltZzpub3QoW3NyYz1cIlwiXSksIGlmcmFtZScpLmxlbmd0aCxcclxuICAgICAgY291bnQgPSAwO1xyXG4gICAgICBpZiAodG90YWwgPT09IDApIHtcclxuICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3Rvci5maW5kKCdpbWc6bm90KFtzcmM9XCJcIl0pLCBpZnJhbWUnKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQodGhpcykub25lKCdsb2FkIGVycm9yJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAoKytjb3VudCA9PT0gdG90YWwpIHsgY2FsbGJhY2soKTsgfVxyXG4gICAgICAgIH0pLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5jb21wbGV0ZSkgeyAkKHRoaXMpLnRyaWdnZXIoJ2xvYWQnKTsgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGFydCB0aGUgc2xpZGVyXHJcbiAgICAgKi9cclxuICAgIHZhciBzdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBpZiBpbmZpbml0ZSBsb29wLCBwcmVwYXJlIGFkZGl0aW9uYWwgc2xpZGVzXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAnZmFkZScgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcclxuICAgICAgICB2YXIgc2xpY2UgICAgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXMgOiBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzLFxyXG4gICAgICAgIHNsaWNlQXBwZW5kICA9IHNsaWRlci5jaGlsZHJlbi5zbGljZSgwLCBzbGljZSkuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ2J4LWNsb25lJyksXHJcbiAgICAgICAgc2xpY2VQcmVwZW5kID0gc2xpZGVyLmNoaWxkcmVuLnNsaWNlKC1zbGljZSkuY2xvbmUodHJ1ZSkuYWRkQ2xhc3MoJ2J4LWNsb25lJyk7XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hcmlhSGlkZGVuKSB7XHJcbiAgICAgICAgICBzbGljZUFwcGVuZC5hdHRyKCdhcmlhLWhpZGRlbicsIHRydWUpO1xyXG4gICAgICAgICAgc2xpY2VQcmVwZW5kLmF0dHIoJ2FyaWEtaGlkZGVuJywgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsLmFwcGVuZChzbGljZUFwcGVuZCkucHJlcGVuZChzbGljZVByZXBlbmQpO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIHJlbW92ZSB0aGUgbG9hZGluZyBET00gZWxlbWVudFxyXG4gICAgICBzbGlkZXIubG9hZGVyLnJlbW92ZSgpO1xyXG4gICAgICAvLyBzZXQgdGhlIGxlZnQgLyB0b3AgcG9zaXRpb24gb2YgXCJlbFwiXHJcbiAgICAgIHNldFNsaWRlUG9zaXRpb24oKTtcclxuICAgICAgLy8gaWYgXCJ2ZXJ0aWNhbFwiIG1vZGUsIGFsd2F5cyB1c2UgYWRhcHRpdmVIZWlnaHQgdG8gcHJldmVudCBvZGQgYmVoYXZpb3JcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7IHNsaWRlci5zZXR0aW5ncy5hZGFwdGl2ZUhlaWdodCA9IHRydWU7IH1cclxuICAgICAgLy8gc2V0IHRoZSB2aWV3cG9ydCBoZWlnaHRcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LmhlaWdodChnZXRWaWV3cG9ydEhlaWdodCgpKTtcclxuICAgICAgLy8gbWFrZSBzdXJlIGV2ZXJ5dGhpbmcgaXMgcG9zaXRpb25lZCBqdXN0IHJpZ2h0IChzYW1lIGFzIGEgd2luZG93IHJlc2l6ZSlcclxuICAgICAgZWwucmVkcmF3U2xpZGVyKCk7XHJcbiAgICAgIC8vIG9uU2xpZGVyTG9hZCBjYWxsYmFja1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3Mub25TbGlkZXJMb2FkLmNhbGwoZWwsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xyXG4gICAgICAvLyBzbGlkZXIgaGFzIGJlZW4gZnVsbHkgaW5pdGlhbGl6ZWRcclxuICAgICAgc2xpZGVyLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgLy8gYmluZCB0aGUgcmVzaXplIGNhbGwgdG8gdGhlIHdpbmRvd1xyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnJlc3BvbnNpdmUpIHsgJCh3aW5kb3cpLmJpbmQoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdyk7IH1cclxuICAgICAgLy8gaWYgYXV0byBpcyB0cnVlIGFuZCBoYXMgbW9yZSB0aGFuIDEgcGFnZSwgc3RhcnQgdGhlIHNob3dcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICYmIHNsaWRlci5zZXR0aW5ncy5hdXRvU3RhcnQgJiYgKGdldFBhZ2VyUXR5KCkgPiAxIHx8IHNsaWRlci5zZXR0aW5ncy5hdXRvU2xpZGVGb3JPbmVQYWdlKSkgeyBpbml0QXV0bygpOyB9XHJcbiAgICAgIC8vIGlmIHRpY2tlciBpcyB0cnVlLCBzdGFydCB0aGUgdGlja2VyXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VyKSB7IGluaXRUaWNrZXIoKTsgfVxyXG4gICAgICAvLyBpZiBwYWdlciBpcyByZXF1ZXN0ZWQsIG1ha2UgdGhlIGFwcHJvcHJpYXRlIHBhZ2VyIGxpbmsgYWN0aXZlXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIpIHsgdXBkYXRlUGFnZXJBY3RpdmUoc2xpZGVyLnNldHRpbmdzLnN0YXJ0U2xpZGUpOyB9XHJcbiAgICAgIC8vIGNoZWNrIGZvciBhbnkgdXBkYXRlcyB0byB0aGUgY29udHJvbHMgKGxpa2UgaGlkZUNvbnRyb2xPbkVuZCB1cGRhdGVzKVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmNvbnRyb2xzKSB7IHVwZGF0ZURpcmVjdGlvbkNvbnRyb2xzKCk7IH1cclxuICAgICAgLy8gaWYgdG91Y2hFbmFibGVkIGlzIHRydWUsIHNldHVwIHRoZSB0b3VjaCBldmVudHNcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy50b3VjaEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgaW5pdFRvdWNoKCk7IH1cclxuICAgICAgLy8gaWYga2V5Ym9hcmRFbmFibGVkIGlzIHRydWUsIHNldHVwIHRoZSBrZXlib2FyZCBldmVudHNcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5rZXlib2FyZEVuYWJsZWQgJiYgIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHtcclxuICAgICAgICAkKGRvY3VtZW50KS5rZXlkb3duKGtleVByZXNzKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgaGVpZ2h0IG9mIHRoZSB2aWV3cG9ydCwgdXNlZCB0byBkZXRlcm1pbmUgZWl0aGVyIGFkYXB0aXZlSGVpZ2h0IG9yIHRoZSBtYXhIZWlnaHQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgdmFyIGdldFZpZXdwb3J0SGVpZ2h0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBoZWlnaHQgPSAwO1xyXG4gICAgICAvLyBmaXJzdCBkZXRlcm1pbmUgd2hpY2ggY2hpbGRyZW4gKHNsaWRlcykgc2hvdWxkIGJlIHVzZWQgaW4gb3VyIGhlaWdodCBjYWxjdWxhdGlvblxyXG4gICAgICB2YXIgY2hpbGRyZW4gPSAkKCk7XHJcbiAgICAgIC8vIGlmIG1vZGUgaXMgbm90IFwidmVydGljYWxcIiBhbmQgYWRhcHRpdmVIZWlnaHQgaXMgZmFsc2UsIGluY2x1ZGUgYWxsIGNoaWxkcmVuXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSAhPT0gJ3ZlcnRpY2FsJyAmJiAhc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0KSB7XHJcbiAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gaWYgbm90IGNhcm91c2VsLCByZXR1cm4gdGhlIHNpbmdsZSBhY3RpdmUgY2hpbGRcclxuICAgICAgICBpZiAoIXNsaWRlci5jYXJvdXNlbCkge1xyXG4gICAgICAgICAgY2hpbGRyZW4gPSBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCk7XHJcbiAgICAgICAgLy8gaWYgY2Fyb3VzZWwsIHJldHVybiBhIHNsaWNlIG9mIGNoaWxkcmVuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIGdldCB0aGUgaW5kaXZpZHVhbCBzbGlkZSBpbmRleFxyXG4gICAgICAgICAgdmFyIGN1cnJlbnRJbmRleCA9IHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID09PSAxID8gc2xpZGVyLmFjdGl2ZS5pbmRleCA6IHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKTtcclxuICAgICAgICAgIC8vIGFkZCB0aGUgY3VycmVudCBzbGlkZSB0byB0aGUgY2hpbGRyZW5cclxuICAgICAgICAgIGNoaWxkcmVuID0gc2xpZGVyLmNoaWxkcmVuLmVxKGN1cnJlbnRJbmRleCk7XHJcbiAgICAgICAgICAvLyBjeWNsZSB0aHJvdWdoIHRoZSByZW1haW5pbmcgXCJzaG93aW5nXCIgc2xpZGVzXHJcbiAgICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IHNsaWRlci5zZXR0aW5ncy5tYXhTbGlkZXMgLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gaWYgbG9vcGVkIGJhY2sgdG8gdGhlIHN0YXJ0XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggKyBpID49IHNsaWRlci5jaGlsZHJlbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoaSAtIDEpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLmFkZChzbGlkZXIuY2hpbGRyZW4uZXEoY3VycmVudEluZGV4ICsgaSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIFwidmVydGljYWxcIiBtb2RlLCBjYWxjdWxhdGUgdGhlIHN1bSBvZiB0aGUgaGVpZ2h0cyBvZiB0aGUgY2hpbGRyZW5cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgY2hpbGRyZW4uZWFjaChmdW5jdGlvbihpbmRleCkge1xyXG4gICAgICAgICAgaGVpZ2h0ICs9ICQodGhpcykub3V0ZXJIZWlnaHQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBhZGQgdXNlci1zdXBwbGllZCBtYXJnaW5zXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiA+IDApIHtcclxuICAgICAgICAgIGhlaWdodCArPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4gKiAoc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcyAtIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgLy8gaWYgbm90IFwidmVydGljYWxcIiBtb2RlLCBjYWxjdWxhdGUgdGhlIG1heCBoZWlnaHQgb2YgdGhlIGNoaWxkcmVuXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuICQodGhpcykub3V0ZXJIZWlnaHQoZmFsc2UpO1xyXG4gICAgICAgIH0pLmdldCgpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHNsaWRlci52aWV3cG9ydC5jc3MoJ2JveC1zaXppbmcnKSA9PT0gJ2JvcmRlci1ib3gnKSB7XHJcbiAgICAgICAgaGVpZ2h0ICs9IHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy10b3AnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctYm90dG9tJykpICtcclxuICAgICAgICAgICAgICBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ2JvcmRlci10b3Atd2lkdGgnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ2JvcmRlci1ib3R0b20td2lkdGgnKSk7XHJcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LmNzcygnYm94LXNpemluZycpID09PSAncGFkZGluZy1ib3gnKSB7XHJcbiAgICAgICAgaGVpZ2h0ICs9IHBhcnNlRmxvYXQoc2xpZGVyLnZpZXdwb3J0LmNzcygncGFkZGluZy10b3AnKSkgKyBwYXJzZUZsb2F0KHNsaWRlci52aWV3cG9ydC5jc3MoJ3BhZGRpbmctYm90dG9tJykpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gaGVpZ2h0O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgd2lkdGggdG8gYmUgdXNlZCBmb3IgdGhlIG91dGVyIHdyYXBwZXIgLyB2aWV3cG9ydFxyXG4gICAgICovXHJcbiAgICB2YXIgZ2V0Vmlld3BvcnRNYXhXaWR0aCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgd2lkdGggPSAnMTAwJSc7XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IDApIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgICAgd2lkdGggPSAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAqIHNsaWRlci5zZXR0aW5ncy5zbGlkZVdpZHRoKSArICgoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyAtIDEpICogc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgd2lkdGggPSBzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHdpZHRoO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGNhbGN1bGF0ZWQgd2lkdGggdG8gYmUgYXBwbGllZCB0byBlYWNoIHNsaWRlXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRTbGlkZVdpZHRoID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBuZXdFbFdpZHRoID0gc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGgsIC8vIHN0YXJ0IHdpdGggYW55IHVzZXItc3VwcGxpZWQgc2xpZGUgd2lkdGhcclxuICAgICAgd3JhcFdpZHRoICAgICAgPSBzbGlkZXIudmlld3BvcnQud2lkdGgoKTsgICAgLy8gZ2V0IHRoZSBjdXJyZW50IHZpZXdwb3J0IHdpZHRoXHJcbiAgICAgIC8vIGlmIHNsaWRlIHdpZHRoIHdhcyBub3Qgc3VwcGxpZWQsIG9yIGlzIGxhcmdlciB0aGFuIHRoZSB2aWV3cG9ydCB1c2UgdGhlIHZpZXdwb3J0IHdpZHRoXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA9PT0gMCB8fFxyXG4gICAgICAgIChzbGlkZXIuc2V0dGluZ3Muc2xpZGVXaWR0aCA+IHdyYXBXaWR0aCAmJiAhc2xpZGVyLmNhcm91c2VsKSB8fFxyXG4gICAgICAgIHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgbmV3RWxXaWR0aCA9IHdyYXBXaWR0aDtcclxuICAgICAgLy8gaWYgY2Fyb3VzZWwsIHVzZSB0aGUgdGhyZXNob2xkcyB0byBkZXRlcm1pbmUgdGhlIHdpZHRoXHJcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEgJiYgc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICAgIGlmICh3cmFwV2lkdGggPiBzbGlkZXIubWF4VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3RWxXaWR0aDtcclxuICAgICAgICB9IGVsc2UgaWYgKHdyYXBXaWR0aCA8IHNsaWRlci5taW5UaHJlc2hvbGQpIHtcclxuICAgICAgICAgIG5ld0VsV2lkdGggPSAod3JhcFdpZHRoIC0gKHNsaWRlci5zZXR0aW5ncy5zbGlkZU1hcmdpbiAqIChzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzIC0gMSkpKSAvIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3Muc2hyaW5rSXRlbXMpIHtcclxuICAgICAgICAgIG5ld0VsV2lkdGggPSBNYXRoLmZsb29yKCh3cmFwV2lkdGggKyBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gKE1hdGguY2VpbCgod3JhcFdpZHRoICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKSAvIChuZXdFbFdpZHRoICsgc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKSkpIC0gc2xpZGVyLnNldHRpbmdzLnNsaWRlTWFyZ2luKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIG5ld0VsV2lkdGg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHNsaWRlcyBjdXJyZW50bHkgdmlzaWJsZSBpbiB0aGUgdmlld3BvcnQgKGluY2x1ZGVzIHBhcnRpYWxseSB2aXNpYmxlIHNsaWRlcylcclxuICAgICAqL1xyXG4gICAgdmFyIGdldE51bWJlclNsaWRlc1Nob3dpbmcgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHNsaWRlc1Nob3dpbmcgPSAxLFxyXG4gICAgICBjaGlsZFdpZHRoID0gbnVsbDtcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgJiYgc2xpZGVyLnNldHRpbmdzLnNsaWRlV2lkdGggPiAwKSB7XHJcbiAgICAgICAgLy8gaWYgdmlld3BvcnQgaXMgc21hbGxlciB0aGFuIG1pblRocmVzaG9sZCwgcmV0dXJuIG1pblNsaWRlc1xyXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQud2lkdGgoKSA8IHNsaWRlci5taW5UaHJlc2hvbGQpIHtcclxuICAgICAgICAgIHNsaWRlc1Nob3dpbmcgPSBzbGlkZXIuc2V0dGluZ3MubWluU2xpZGVzO1xyXG4gICAgICAgIC8vIGlmIHZpZXdwb3J0IGlzIGxhcmdlciB0aGFuIG1heFRocmVzaG9sZCwgcmV0dXJuIG1heFNsaWRlc1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgPiBzbGlkZXIubWF4VGhyZXNob2xkKSB7XHJcbiAgICAgICAgICBzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcztcclxuICAgICAgICAvLyBpZiB2aWV3cG9ydCBpcyBiZXR3ZWVuIG1pbiAvIG1heCB0aHJlc2hvbGRzLCBkaXZpZGUgdmlld3BvcnQgd2lkdGggYnkgZmlyc3QgY2hpbGQgd2lkdGhcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2hpbGRXaWR0aCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLndpZHRoKCkgKyBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW47XHJcbiAgICAgICAgICBzbGlkZXNTaG93aW5nID0gTWF0aC5mbG9vcigoc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgK1xyXG4gICAgICAgICAgICBzbGlkZXIuc2V0dGluZ3Muc2xpZGVNYXJnaW4pIC8gY2hpbGRXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBpZiBcInZlcnRpY2FsXCIgbW9kZSwgc2xpZGVzIHNob3dpbmcgd2lsbCBhbHdheXMgYmUgbWluU2xpZGVzXHJcbiAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcclxuICAgICAgICBzbGlkZXNTaG93aW5nID0gc2xpZGVyLnNldHRpbmdzLm1pblNsaWRlcztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gc2xpZGVzU2hvd2luZztcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgcGFnZXMgKG9uZSBmdWxsIHZpZXdwb3J0IG9mIHNsaWRlcyBpcyBvbmUgXCJwYWdlXCIpXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRQYWdlclF0eSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgcGFnZXJRdHkgPSAwLFxyXG4gICAgICBicmVha1BvaW50ID0gMCxcclxuICAgICAgY291bnRlciA9IDA7XHJcbiAgICAgIC8vIGlmIG1vdmVTbGlkZXMgaXMgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA+IDApIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xyXG4gICAgICAgICAgcGFnZXJRdHkgPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIGdldE1vdmVCeSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gd2hlbiBicmVha3BvaW50IGdvZXMgYWJvdmUgY2hpbGRyZW4gbGVuZ3RoLCBjb3VudGVyIGlzIHRoZSBudW1iZXIgb2YgcGFnZXNcclxuICAgICAgICAgIHdoaWxlIChicmVha1BvaW50IDwgc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICArK3BhZ2VyUXR5O1xyXG4gICAgICAgICAgICBicmVha1BvaW50ID0gY291bnRlciArIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcclxuICAgICAgICAgICAgY291bnRlciArPSBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA8PSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCkgPyBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA6IGdldE51bWJlclNsaWRlc1Nob3dpbmcoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIC8vIGlmIG1vdmVTbGlkZXMgaXMgMCAoYXV0bykgZGl2aWRlIGNoaWxkcmVuIGxlbmd0aCBieSBzaWRlcyBzaG93aW5nLCB0aGVuIHJvdW5kIHVwXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcGFnZXJRdHkgPSBNYXRoLmNlaWwoc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAvIGdldE51bWJlclNsaWRlc1Nob3dpbmcoKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHBhZ2VyUXR5O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBpbmRpdmlkdWFsIHNsaWRlcyBieSB3aGljaCB0byBzaGlmdCB0aGUgc2xpZGVyXHJcbiAgICAgKi9cclxuICAgIHZhciBnZXRNb3ZlQnkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gaWYgbW92ZVNsaWRlcyB3YXMgc2V0IGJ5IHRoZSB1c2VyIGFuZCBtb3ZlU2xpZGVzIGlzIGxlc3MgdGhhbiBudW1iZXIgb2Ygc2xpZGVzIHNob3dpbmdcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb3ZlU2xpZGVzID4gMCAmJiBzbGlkZXIuc2V0dGluZ3MubW92ZVNsaWRlcyA8PSBnZXROdW1iZXJTbGlkZXNTaG93aW5nKCkpIHtcclxuICAgICAgICByZXR1cm4gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXM7XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgbW92ZVNsaWRlcyBpcyAwIChhdXRvKVxyXG4gICAgICByZXR1cm4gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHNsaWRlcidzIChlbCkgbGVmdCBvciB0b3AgcG9zaXRpb25cclxuICAgICAqL1xyXG4gICAgdmFyIHNldFNsaWRlUG9zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHBvc2l0aW9uLCBsYXN0Q2hpbGQsIGxhc3RTaG93aW5nSW5kZXg7XHJcbiAgICAgIC8vIGlmIGxhc3Qgc2xpZGUsIG5vdCBpbmZpbml0ZSBsb29wLCBhbmQgbnVtYmVyIG9mIGNoaWxkcmVuIGlzIGxhcmdlciB0aGFuIHNwZWNpZmllZCBtYXhTbGlkZXNcclxuICAgICAgaWYgKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggPiBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzICYmIHNsaWRlci5hY3RpdmUubGFzdCAmJiAhc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2hpbGQncyBwb3NpdGlvblxyXG4gICAgICAgICAgbGFzdENoaWxkID0gc2xpZGVyLmNoaWxkcmVuLmxhc3QoKTtcclxuICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIGxlZnQgcG9zaXRpb25cclxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLShwb3NpdGlvbi5sZWZ0IC0gKHNsaWRlci52aWV3cG9ydC53aWR0aCgpIC0gbGFzdENoaWxkLm91dGVyV2lkdGgoKSkpLCAncmVzZXQnLCAwKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAndmVydGljYWwnKSB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGxhc3Qgc2hvd2luZyBpbmRleCdzIHBvc2l0aW9uXHJcbiAgICAgICAgICBsYXN0U2hvd2luZ0luZGV4ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShsYXN0U2hvd2luZ0luZGV4KS5wb3NpdGlvbigpO1xyXG4gICAgICAgICAgLy8gc2V0IHRoZSB0b3AgcG9zaXRpb25cclxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLnRvcCwgJ3Jlc2V0JywgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBpZiBub3QgbGFzdCBzbGlkZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IHNob3dpbmcgc2xpZGVcclxuICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgLy8gY2hlY2sgZm9yIGxhc3Qgc2xpZGVcclxuICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gZ2V0UGFnZXJRdHkoKSAtIDEpIHsgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gdHJ1ZTsgfVxyXG4gICAgICAgIC8vIHNldCB0aGUgcmVzcGVjdGl2ZSBwb3NpdGlvblxyXG4gICAgICAgIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi5sZWZ0LCAncmVzZXQnLCAwKTsgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICd2ZXJ0aWNhbCcpIHsgc2V0UG9zaXRpb25Qcm9wZXJ0eSgtcG9zaXRpb24udG9wLCAncmVzZXQnLCAwKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIGVsJ3MgYW5pbWF0aW5nIHByb3BlcnR5IHBvc2l0aW9uICh3aGljaCBpbiB0dXJuIHdpbGwgc29tZXRpbWVzIGFuaW1hdGUgZWwpLlxyXG4gICAgICogSWYgdXNpbmcgQ1NTLCBzZXRzIHRoZSB0cmFuc2Zvcm0gcHJvcGVydHkuIElmIG5vdCB1c2luZyBDU1MsIHNldHMgdGhlIHRvcCAvIGxlZnQgcHJvcGVydHkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZhbHVlIChpbnQpXHJcbiAgICAgKiAgLSB0aGUgYW5pbWF0aW5nIHByb3BlcnR5J3MgdmFsdWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHlwZSAoc3RyaW5nKSAnc2xpZGUnLCAncmVzZXQnLCAndGlja2VyJ1xyXG4gICAgICogIC0gdGhlIHR5cGUgb2YgaW5zdGFuY2UgZm9yIHdoaWNoIHRoZSBmdW5jdGlvbiBpcyBiZWluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkdXJhdGlvbiAoaW50KVxyXG4gICAgICogIC0gdGhlIGFtb3VudCBvZiB0aW1lIChpbiBtcykgdGhlIHRyYW5zaXRpb24gc2hvdWxkIG9jY3VweVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgKGFycmF5KSBvcHRpb25hbFxyXG4gICAgICogIC0gYW4gb3B0aW9uYWwgcGFyYW1ldGVyIGNvbnRhaW5pbmcgYW55IHZhcmlhYmxlcyB0aGF0IG5lZWQgdG8gYmUgcGFzc2VkIGluXHJcbiAgICAgKi9cclxuICAgIHZhciBzZXRQb3NpdGlvblByb3BlcnR5ID0gZnVuY3Rpb24odmFsdWUsIHR5cGUsIGR1cmF0aW9uLCBwYXJhbXMpIHtcclxuICAgICAgdmFyIGFuaW1hdGVPYmosIHByb3BWYWx1ZTtcclxuICAgICAgLy8gdXNlIENTUyB0cmFuc2Zvcm1cclxuICAgICAgaWYgKHNsaWRlci51c2luZ0NTUykge1xyXG4gICAgICAgIC8vIGRldGVybWluZSB0aGUgdHJhbnNsYXRlM2QgdmFsdWVcclxuICAgICAgICBwcm9wVmFsdWUgPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJyA/ICd0cmFuc2xhdGUzZCgwLCAnICsgdmFsdWUgKyAncHgsIDApJyA6ICd0cmFuc2xhdGUzZCgnICsgdmFsdWUgKyAncHgsIDAsIDApJztcclxuICAgICAgICAvLyBhZGQgdGhlIENTUyB0cmFuc2l0aW9uLWR1cmF0aW9uXHJcbiAgICAgICAgZWwuY3NzKCctJyArIHNsaWRlci5jc3NQcmVmaXggKyAnLXRyYW5zaXRpb24tZHVyYXRpb24nLCBkdXJhdGlvbiAvIDEwMDAgKyAncycpO1xyXG4gICAgICAgIGlmICh0eXBlID09PSAnc2xpZGUnKSB7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIHByb3BlcnR5IHZhbHVlXHJcbiAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCBwcm9wVmFsdWUpO1xyXG4gICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIGJpbmQgYSBjYWxsYmFjayBtZXRob2QgLSBleGVjdXRlcyB3aGVuIENTUyB0cmFuc2l0aW9uIGNvbXBsZXRlc1xyXG4gICAgICAgICAgICBlbC5iaW5kKCd0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgIC8vbWFrZSBzdXJlIGl0J3MgdGhlIGNvcnJlY3Qgb25lXHJcbiAgICAgICAgICAgICAgaWYgKCEkKGUudGFyZ2V0KS5pcyhlbCkpIHsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgLy8gdW5iaW5kIHRoZSBjYWxsYmFja1xyXG4gICAgICAgICAgICAgIGVsLnVuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcpO1xyXG4gICAgICAgICAgICAgIHVwZGF0ZUFmdGVyU2xpZGVUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHsgLy9kdXJhdGlvbiA9IDBcclxuICAgICAgICAgICAgdXBkYXRlQWZ0ZXJTbGlkZVRyYW5zaXRpb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdyZXNldCcpIHtcclxuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndGlja2VyJykge1xyXG4gICAgICAgICAgLy8gbWFrZSB0aGUgdHJhbnNpdGlvbiB1c2UgJ2xpbmVhcidcclxuICAgICAgICAgIGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbicsICdsaW5lYXInKTtcclxuICAgICAgICAgIGVsLmNzcyhzbGlkZXIuYW5pbVByb3AsIHByb3BWYWx1ZSk7XHJcbiAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IDApIHtcclxuICAgICAgICAgICAgZWwuYmluZCgndHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAvL21ha2Ugc3VyZSBpdCdzIHRoZSBjb3JyZWN0IG9uZVxyXG4gICAgICAgICAgICAgIGlmICghJChlLnRhcmdldCkuaXMoZWwpKSB7IHJldHVybjsgfVxyXG4gICAgICAgICAgICAgIC8vIHVuYmluZCB0aGUgY2FsbGJhY2tcclxuICAgICAgICAgICAgICBlbC51bmJpbmQoJ3RyYW5zaXRpb25lbmQgd2Via2l0VHJhbnNpdGlvbkVuZCBvVHJhbnNpdGlvbkVuZCBNU1RyYW5zaXRpb25FbmQnKTtcclxuICAgICAgICAgICAgICAvLyByZXNldCB0aGUgcG9zaXRpb25cclxuICAgICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcclxuICAgICAgICAgICAgICAvLyBzdGFydCB0aGUgbG9vcCBhZ2FpblxyXG4gICAgICAgICAgICAgIHRpY2tlckxvb3AoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2UgeyAvL2R1cmF0aW9uID0gMFxyXG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcclxuICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgLy8gdXNlIEpTIGFuaW1hdGVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhbmltYXRlT2JqID0ge307XHJcbiAgICAgICAgYW5pbWF0ZU9ialtzbGlkZXIuYW5pbVByb3BdID0gdmFsdWU7XHJcbiAgICAgICAgaWYgKHR5cGUgPT09ICdzbGlkZScpIHtcclxuICAgICAgICAgIGVsLmFuaW1hdGUoYW5pbWF0ZU9iaiwgZHVyYXRpb24sIHNsaWRlci5zZXR0aW5ncy5lYXNpbmcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmVzZXQnKSB7XHJcbiAgICAgICAgICBlbC5jc3Moc2xpZGVyLmFuaW1Qcm9wLCB2YWx1ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAndGlja2VyJykge1xyXG4gICAgICAgICAgZWwuYW5pbWF0ZShhbmltYXRlT2JqLCBkdXJhdGlvbiwgJ2xpbmVhcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHBhcmFtcy5yZXNldFZhbHVlLCAncmVzZXQnLCAwKTtcclxuICAgICAgICAgICAgLy8gcnVuIHRoZSByZWN1cnNpdmUgbG9vcCBhZnRlciBhbmltYXRpb25cclxuICAgICAgICAgICAgdGlja2VyTG9vcCgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUG9wdWxhdGVzIHRoZSBwYWdlciB3aXRoIHByb3BlciBhbW91bnQgb2YgcGFnZXNcclxuICAgICAqL1xyXG4gICAgdmFyIHBvcHVsYXRlUGFnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHBhZ2VySHRtbCA9ICcnLFxyXG4gICAgICBsaW5rQ29udGVudCA9ICcnLFxyXG4gICAgICBwYWdlclF0eSA9IGdldFBhZ2VyUXR5KCk7XHJcbiAgICAgIC8vIGxvb3AgdGhyb3VnaCBlYWNoIHBhZ2VyIGl0ZW1cclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYWdlclF0eTsgaSsrKSB7XHJcbiAgICAgICAgbGlua0NvbnRlbnQgPSAnJztcclxuICAgICAgICAvLyBpZiBhIGJ1aWxkUGFnZXIgZnVuY3Rpb24gaXMgc3VwcGxpZWQsIHVzZSBpdCB0byBnZXQgcGFnZXIgbGluayB2YWx1ZSwgZWxzZSB1c2UgaW5kZXggKyAxXHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyICYmICQuaXNGdW5jdGlvbihzbGlkZXIuc2V0dGluZ3MuYnVpbGRQYWdlcikgfHwgc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7XHJcbiAgICAgICAgICBsaW5rQ29udGVudCA9IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpO1xyXG4gICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWN1c3RvbS1wYWdlcicpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBsaW5rQ29udGVudCA9IGkgKyAxO1xyXG4gICAgICAgICAgc2xpZGVyLnBhZ2VyRWwuYWRkQ2xhc3MoJ2J4LWRlZmF1bHQtcGFnZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gdmFyIGxpbmtDb250ZW50ID0gc2xpZGVyLnNldHRpbmdzLmJ1aWxkUGFnZXIgJiYgJC5pc0Z1bmN0aW9uKHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKSA/IHNsaWRlci5zZXR0aW5ncy5idWlsZFBhZ2VyKGkpIDogaSArIDE7XHJcbiAgICAgICAgLy8gYWRkIHRoZSBtYXJrdXAgdG8gdGhlIHN0cmluZ1xyXG4gICAgICAgIHBhZ2VySHRtbCArPSAnPGRpdiBjbGFzcz1cImJ4LXBhZ2VyLWl0ZW1cIj48YSBocmVmPVwiXCIgZGF0YS1zbGlkZS1pbmRleD1cIicgKyBpICsgJ1wiIGNsYXNzPVwiYngtcGFnZXItbGlua1wiPicgKyBsaW5rQ29udGVudCArICc8L2E+PC9kaXY+JztcclxuICAgICAgfVxyXG4gICAgICAvLyBwb3B1bGF0ZSB0aGUgcGFnZXIgZWxlbWVudCB3aXRoIHBhZ2VyIGxpbmtzXHJcbiAgICAgIHNsaWRlci5wYWdlckVsLmh0bWwocGFnZXJIdG1sKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmRzIHRoZSBwYWdlciB0byB0aGUgY29udHJvbHMgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICB2YXIgYXBwZW5kUGFnZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MucGFnZXJDdXN0b20pIHtcclxuICAgICAgICAvLyBjcmVhdGUgdGhlIHBhZ2VyIERPTSBlbGVtZW50XHJcbiAgICAgICAgc2xpZGVyLnBhZ2VyRWwgPSAkKCc8ZGl2IGNsYXNzPVwiYngtcGFnZXJcIiAvPicpO1xyXG4gICAgICAgIC8vIGlmIGEgcGFnZXIgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdCB3aXRoIHRoZSBwYWdlclxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXJTZWxlY3Rvcikge1xyXG4gICAgICAgICAgJChzbGlkZXIuc2V0dGluZ3MucGFnZXJTZWxlY3RvcikuaHRtbChzbGlkZXIucGFnZXJFbCk7XHJcbiAgICAgICAgLy8gaWYgbm8gcGFnZXIgc2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBhZGQgaXQgYWZ0ZXIgdGhlIHdyYXBwZXJcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdieC1oYXMtcGFnZXInKS5hcHBlbmQoc2xpZGVyLnBhZ2VyRWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBwb3B1bGF0ZSB0aGUgcGFnZXJcclxuICAgICAgICBwb3B1bGF0ZVBhZ2VyKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLnBhZ2VyRWwgPSAkKHNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gYXNzaWduIHRoZSBwYWdlciBjbGljayBiaW5kaW5nXHJcbiAgICAgIHNsaWRlci5wYWdlckVsLm9uKCdjbGljayB0b3VjaGVuZCcsICdhJywgY2xpY2tQYWdlckJpbmQpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGVuZHMgcHJldiAvIG5leHQgY29udHJvbHMgdG8gdGhlIGNvbnRyb2xzIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGVuZENvbnRyb2xzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNsaWRlci5jb250cm9scy5uZXh0ID0gJCgnPGEgY2xhc3M9XCJieC1uZXh0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3MubmV4dFRleHQgKyAnPC9hPicpO1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMucHJldiA9ICQoJzxhIGNsYXNzPVwiYngtcHJldlwiIGhyZWY9XCJcIj4nICsgc2xpZGVyLnNldHRpbmdzLnByZXZUZXh0ICsgJzwvYT4nKTtcclxuICAgICAgLy8gYmluZCBjbGljayBhY3Rpb25zIHRvIHRoZSBjb250cm9sc1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5iaW5kKCdjbGljayB0b3VjaGVuZCcsIGNsaWNrTmV4dEJpbmQpO1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMucHJldi5iaW5kKCdjbGljayB0b3VjaGVuZCcsIGNsaWNrUHJldkJpbmQpO1xyXG4gICAgICAvLyBpZiBuZXh0U2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3Rvcikge1xyXG4gICAgICAgICQoc2xpZGVyLnNldHRpbmdzLm5leHRTZWxlY3RvcikuYXBwZW5kKHNsaWRlci5jb250cm9scy5uZXh0KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBwcmV2U2VsZWN0b3Igd2FzIHN1cHBsaWVkLCBwb3B1bGF0ZSBpdFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3Rvcikge1xyXG4gICAgICAgICQoc2xpZGVyLnNldHRpbmdzLnByZXZTZWxlY3RvcikuYXBwZW5kKHNsaWRlci5jb250cm9scy5wcmV2KTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBubyBjdXN0b20gc2VsZWN0b3JzIHdlcmUgc3VwcGxpZWRcclxuICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3MubmV4dFNlbGVjdG9yICYmICFzbGlkZXIuc2V0dGluZ3MucHJldlNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy8gYWRkIHRoZSBjb250cm9scyB0byB0aGUgRE9NXHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmRpcmVjdGlvbkVsID0gJCgnPGRpdiBjbGFzcz1cImJ4LWNvbnRyb2xzLWRpcmVjdGlvblwiIC8+Jyk7XHJcbiAgICAgICAgLy8gYWRkIHRoZSBjb250cm9sIGVsZW1lbnRzIHRvIHRoZSBkaXJlY3Rpb25FbFxyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5kaXJlY3Rpb25FbC5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLnByZXYpLmFwcGVuZChzbGlkZXIuY29udHJvbHMubmV4dCk7XHJcbiAgICAgICAgLy8gc2xpZGVyLnZpZXdwb3J0LmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpO1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLWNvbnRyb2xzLWRpcmVjdGlvbicpLmFwcGVuZChzbGlkZXIuY29udHJvbHMuZGlyZWN0aW9uRWwpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kcyBzdGFydCAvIHN0b3AgYXV0byBjb250cm9scyB0byB0aGUgY29udHJvbHMgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICB2YXIgYXBwZW5kQ29udHJvbHNBdXRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHNsaWRlci5jb250cm9scy5zdGFydCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvLWl0ZW1cIj48YSBjbGFzcz1cImJ4LXN0YXJ0XCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RhcnRUZXh0ICsgJzwvYT48L2Rpdj4nKTtcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLnN0b3AgPSAkKCc8ZGl2IGNsYXNzPVwiYngtY29udHJvbHMtYXV0by1pdGVtXCI+PGEgY2xhc3M9XCJieC1zdG9wXCIgaHJlZj1cIlwiPicgKyBzbGlkZXIuc2V0dGluZ3Muc3RvcFRleHQgKyAnPC9hPjwvZGl2PicpO1xyXG4gICAgICAvLyBhZGQgdGhlIGNvbnRyb2xzIHRvIHRoZSBET01cclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCA9ICQoJzxkaXYgY2xhc3M9XCJieC1jb250cm9scy1hdXRvXCIgLz4nKTtcclxuICAgICAgLy8gYmluZCBjbGljayBhY3Rpb25zIHRvIHRoZSBjb250cm9sc1xyXG4gICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLm9uKCdjbGljaycsICcuYngtc3RhcnQnLCBjbGlja1N0YXJ0QmluZCk7XHJcbiAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwub24oJ2NsaWNrJywgJy5ieC1zdG9wJywgY2xpY2tTdG9wQmluZCk7XHJcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUsIGluc2VydCBvbmx5IHRoZSBcInN0YXJ0XCIgY29udHJvbFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc0NvbWJpbmUpIHtcclxuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmFwcGVuZChzbGlkZXIuY29udHJvbHMuc3RhcnQpO1xyXG4gICAgICAvLyBpZiBhdXRvQ29udHJvbHNDb21iaW5lIGlzIGZhbHNlLCBpbnNlcnQgYm90aCBjb250cm9sc1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdGFydCkuYXBwZW5kKHNsaWRlci5jb250cm9scy5zdG9wKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIHNlbGVjdG9yIHdhcyBzdXBwbGllZCwgcG9wdWxhdGUgaXQgd2l0aCB0aGUgY29udHJvbHNcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHNTZWxlY3Rvcikge1xyXG4gICAgICAgICQoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc1NlbGVjdG9yKS5odG1sKHNsaWRlci5jb250cm9scy5hdXRvRWwpO1xyXG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIHNlbGVjdG9yIHdhcyBub3Qgc3VwcGxpZWQsIGFkZCBpdCBhZnRlciB0aGUgd3JhcHBlclxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5lbC5hZGRDbGFzcygnYngtaGFzLWNvbnRyb2xzLWF1dG8nKS5hcHBlbmQoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCk7XHJcbiAgICAgIH1cclxuICAgICAgLy8gdXBkYXRlIHRoZSBhdXRvIGNvbnRyb2xzXHJcbiAgICAgIHVwZGF0ZUF1dG9Db250cm9scyhzbGlkZXIuc2V0dGluZ3MuYXV0b1N0YXJ0ID8gJ3N0b3AnIDogJ3N0YXJ0Jyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kcyBpbWFnZSBjYXB0aW9ucyB0byB0aGUgRE9NXHJcbiAgICAgKi9cclxuICAgIHZhciBhcHBlbmRDYXB0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBjeWNsZSB0aHJvdWdoIGVhY2ggY2hpbGRcclxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAvLyBnZXQgdGhlIGltYWdlIHRpdGxlIGF0dHJpYnV0ZVxyXG4gICAgICAgIHZhciB0aXRsZSA9ICQodGhpcykuZmluZCgnaW1nOmZpcnN0JykuYXR0cigndGl0bGUnKTtcclxuICAgICAgICAvLyBhcHBlbmQgdGhlIGNhcHRpb25cclxuICAgICAgICBpZiAodGl0bGUgIT09IHVuZGVmaW5lZCAmJiAoJycgKyB0aXRsZSkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmFwcGVuZCgnPGRpdiBjbGFzcz1cImJ4LWNhcHRpb25cIj48c3Bhbj4nICsgdGl0bGUgKyAnPC9zcGFuPjwvZGl2PicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xpY2sgbmV4dCBiaW5kaW5nXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxyXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICB2YXIgY2xpY2tOZXh0QmluZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmVsLmhhc0NsYXNzKCdkaXNhYmxlZCcpKSB7IHJldHVybjsgfVxyXG4gICAgICAvLyBpZiBhdXRvIHNob3cgaXMgcnVubmluZywgc3RvcCBpdFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG8gJiYgc2xpZGVyLnNldHRpbmdzLnN0b3BBdXRvT25DbGljaykgeyBlbC5zdG9wQXV0bygpOyB9XHJcbiAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGljayBwcmV2IGJpbmRpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBjbGlja1ByZXZCaW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIGlmIGF1dG8gc2hvdyBpcyBydW5uaW5nLCBzdG9wIGl0XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0byAmJiBzbGlkZXIuc2V0dGluZ3Muc3RvcEF1dG9PbkNsaWNrKSB7IGVsLnN0b3BBdXRvKCk7IH1cclxuICAgICAgZWwuZ29Ub1ByZXZTbGlkZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENsaWNrIHN0YXJ0IGJpbmRpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBjbGlja1N0YXJ0QmluZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZWwuc3RhcnRBdXRvKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGljayBzdG9wIGJpbmRpbmdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBjbGlja1N0b3BCaW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBlbC5zdG9wQXV0bygpO1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xpY2sgcGFnZXIgYmluZGluZ1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIGNsaWNrUGFnZXJCaW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgcGFnZXJMaW5rLCBwYWdlckluZGV4O1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChzbGlkZXIuY29udHJvbHMuZWwuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gaWYgYXV0byBzaG93IGlzIHJ1bm5pbmcsIHN0b3AgaXRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvICAmJiBzbGlkZXIuc2V0dGluZ3Muc3RvcEF1dG9PbkNsaWNrKSB7IGVsLnN0b3BBdXRvKCk7IH1cclxuICAgICAgcGFnZXJMaW5rID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICBpZiAocGFnZXJMaW5rLmF0dHIoJ2RhdGEtc2xpZGUtaW5kZXgnKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgcGFnZXJJbmRleCA9IHBhcnNlSW50KHBhZ2VyTGluay5hdHRyKCdkYXRhLXNsaWRlLWluZGV4JykpO1xyXG4gICAgICAgIC8vIGlmIGNsaWNrZWQgcGFnZXIgbGluayBpcyBub3QgYWN0aXZlLCBjb250aW51ZSB3aXRoIHRoZSBnb1RvU2xpZGUgY2FsbFxyXG4gICAgICAgIGlmIChwYWdlckluZGV4ICE9PSBzbGlkZXIuYWN0aXZlLmluZGV4KSB7IGVsLmdvVG9TbGlkZShwYWdlckluZGV4KTsgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgcGFnZXIgbGlua3Mgd2l0aCBhbiBhY3RpdmUgY2xhc3NcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2xpZGVJbmRleCAoaW50KVxyXG4gICAgICogIC0gaW5kZXggb2Ygc2xpZGUgdG8gbWFrZSBhY3RpdmVcclxuICAgICAqL1xyXG4gICAgdmFyIHVwZGF0ZVBhZ2VyQWN0aXZlID0gZnVuY3Rpb24oc2xpZGVJbmRleCkge1xyXG4gICAgICAvLyBpZiBcInNob3J0XCIgcGFnZXIgdHlwZVxyXG4gICAgICB2YXIgbGVuID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aDsgLy8gbmIgb2YgY2hpbGRyZW5cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5wYWdlclR5cGUgPT09ICdzaG9ydCcpIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyA+IDEpIHtcclxuICAgICAgICAgIGxlbiA9IE1hdGguY2VpbChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC8gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNsaWRlci5wYWdlckVsLmh0bWwoKHNsaWRlSW5kZXggKyAxKSArIHNsaWRlci5zZXR0aW5ncy5wYWdlclNob3J0U2VwYXJhdG9yICsgbGVuKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgLy8gcmVtb3ZlIGFsbCBwYWdlciBhY3RpdmUgY2xhc3Nlc1xyXG4gICAgICBzbGlkZXIucGFnZXJFbC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAvLyBhcHBseSB0aGUgYWN0aXZlIGNsYXNzIGZvciBhbGwgcGFnZXJzXHJcbiAgICAgIHNsaWRlci5wYWdlckVsLmVhY2goZnVuY3Rpb24oaSwgZWwpIHsgJChlbCkuZmluZCgnYScpLmVxKHNsaWRlSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTsgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgbmVlZGVkIGFjdGlvbnMgYWZ0ZXIgYSBzbGlkZSB0cmFuc2l0aW9uXHJcbiAgICAgKi9cclxuICAgIHZhciB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBpZiBpbmZpbml0ZSBsb29wIGlzIHRydWVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3ApIHtcclxuICAgICAgICB2YXIgcG9zaXRpb24gPSAnJztcclxuICAgICAgICAvLyBmaXJzdCBzbGlkZVxyXG4gICAgICAgIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIG5ldyBwb3NpdGlvblxyXG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEoMCkucG9zaXRpb24oKTtcclxuICAgICAgICAvLyBjYXJvdXNlbCwgbGFzdCBzbGlkZVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gZ2V0UGFnZXJRdHkoKSAtIDEgJiYgc2xpZGVyLmNhcm91c2VsKSB7XHJcbiAgICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5lcSgoZ2V0UGFnZXJRdHkoKSAtIDEpICogZ2V0TW92ZUJ5KCkpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgLy8gbGFzdCBzbGlkZVxyXG4gICAgICAgIH0gZWxzZSBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5jaGlsZHJlbi5sZW5ndGggLSAxKS5wb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocG9zaXRpb24pIHtcclxuICAgICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7IHNldFBvc2l0aW9uUHJvcGVydHkoLXBvc2l0aW9uLmxlZnQsICdyZXNldCcsIDApOyB9XHJcbiAgICAgICAgICBlbHNlIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ3ZlcnRpY2FsJykgeyBzZXRQb3NpdGlvblByb3BlcnR5KC1wb3NpdGlvbi50b3AsICdyZXNldCcsIDApOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIGRlY2xhcmUgdGhhdCB0aGUgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZVxyXG4gICAgICBzbGlkZXIud29ya2luZyA9IGZhbHNlO1xyXG4gICAgICAvLyBvblNsaWRlQWZ0ZXIgY2FsbGJhY2tcclxuICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVBZnRlci5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgYXV0byBjb250cm9scyBzdGF0ZSAoZWl0aGVyIGFjdGl2ZSwgb3IgY29tYmluZWQgc3dpdGNoKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdGF0ZSAoc3RyaW5nKSBcInN0YXJ0XCIsIFwic3RvcFwiXHJcbiAgICAgKiAgLSB0aGUgbmV3IHN0YXRlIG9mIHRoZSBhdXRvIHNob3dcclxuICAgICAqL1xyXG4gICAgdmFyIHVwZGF0ZUF1dG9Db250cm9scyA9IGZ1bmN0aW9uKHN0YXRlKSB7XHJcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgdHJ1ZSwgcmVwbGFjZSB0aGUgY3VycmVudCBjb250cm9sIHdpdGggdGhlIG5ldyBzdGF0ZVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9sc0NvbWJpbmUpIHtcclxuICAgICAgICBzbGlkZXIuY29udHJvbHMuYXV0b0VsLmh0bWwoc2xpZGVyLmNvbnRyb2xzW3N0YXRlXSk7XHJcbiAgICAgIC8vIGlmIGF1dG9Db250cm9sc0NvbWJpbmUgaXMgZmFsc2UsIGFwcGx5IHRoZSBcImFjdGl2ZVwiIGNsYXNzIHRvIHRoZSBhcHByb3ByaWF0ZSBjb250cm9sXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xpZGVyLmNvbnRyb2xzLmF1dG9FbC5maW5kKCdhJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5hdXRvRWwuZmluZCgnYTpub3QoLmJ4LScgKyBzdGF0ZSArICcpJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgZGlyZWN0aW9uIGNvbnRyb2xzIChjaGVja3MgaWYgZWl0aGVyIHNob3VsZCBiZSBoaWRkZW4pXHJcbiAgICAgKi9cclxuICAgIHZhciB1cGRhdGVEaXJlY3Rpb25Db250cm9scyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBpZiAoZ2V0UGFnZXJRdHkoKSA9PT0gMSkge1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5wcmV2LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICB9IGVsc2UgaWYgKCFzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wICYmIHNsaWRlci5zZXR0aW5ncy5oaWRlQ29udHJvbE9uRW5kKSB7XHJcbiAgICAgICAgLy8gaWYgZmlyc3Qgc2xpZGVcclxuICAgICAgICBpZiAoc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLnByZXYuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMubmV4dC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAvLyBpZiBsYXN0IHNsaWRlXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSBnZXRQYWdlclF0eSgpIC0gMSkge1xyXG4gICAgICAgICAgc2xpZGVyLmNvbnRyb2xzLm5leHQuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAvLyBpZiBhbnkgc2xpZGUgaW4gdGhlIG1pZGRsZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzbGlkZXIuY29udHJvbHMucHJldi5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgIHNsaWRlci5jb250cm9scy5uZXh0LnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemVzIHRoZSBhdXRvIHByb2Nlc3NcclxuICAgICAqL1xyXG4gICAgdmFyIGluaXRBdXRvID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGlmIGF1dG9EZWxheSB3YXMgc3VwcGxpZWQsIGxhdW5jaCB0aGUgYXV0byBzaG93IHVzaW5nIGEgc2V0VGltZW91dCgpIGNhbGxcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvRGVsYXkgPiAwKSB7XHJcbiAgICAgICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGVsLnN0YXJ0QXV0bywgc2xpZGVyLnNldHRpbmdzLmF1dG9EZWxheSk7XHJcbiAgICAgIC8vIGlmIGF1dG9EZWxheSB3YXMgbm90IHN1cHBsaWVkLCBzdGFydCB0aGUgYXV0byBzaG93IG5vcm1hbGx5XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWwuc3RhcnRBdXRvKCk7XHJcblxyXG4gICAgICAgIC8vYWRkIGZvY3VzIGFuZCBibHVyIGV2ZW50cyB0byBlbnN1cmUgaXRzIHJ1bm5pbmcgaWYgdGltZW91dCBnZXRzIHBhdXNlZFxyXG4gICAgICAgICQod2luZG93KS5mb2N1cyhmdW5jdGlvbigpIHtcclxuICAgICAgICAgIGVsLnN0YXJ0QXV0bygpO1xyXG4gICAgICAgIH0pLmJsdXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBlbC5zdG9wQXV0bygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIC8vIGlmIGF1dG9Ib3ZlciBpcyByZXF1ZXN0ZWRcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvSG92ZXIpIHtcclxuICAgICAgICAvLyBvbiBlbCBob3ZlclxyXG4gICAgICAgIGVsLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgLy8gaWYgdGhlIGF1dG8gc2hvdyBpcyBjdXJyZW50bHkgcGxheWluZyAoaGFzIGFuIGFjdGl2ZSBpbnRlcnZhbClcclxuICAgICAgICAgIGlmIChzbGlkZXIuaW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgLy8gc3RvcCB0aGUgYXV0byBzaG93IGFuZCBwYXNzIHRydWUgYXJndW1lbnQgd2hpY2ggd2lsbCBwcmV2ZW50IGNvbnRyb2wgdXBkYXRlXHJcbiAgICAgICAgICAgIGVsLnN0b3BBdXRvKHRydWUpO1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgYSBuZXcgYXV0b1BhdXNlZCB2YWx1ZSB3aGljaCB3aWxsIGJlIHVzZWQgYnkgdGhlIHJlbGF0aXZlIFwibW91c2VvdXRcIiBldmVudFxyXG4gICAgICAgICAgICBzbGlkZXIuYXV0b1BhdXNlZCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAvLyBpZiB0aGUgYXV0b1BhdXNlZCB2YWx1ZSB3YXMgY3JlYXRlZCBiZSB0aGUgcHJpb3IgXCJtb3VzZW92ZXJcIiBldmVudFxyXG4gICAgICAgICAgaWYgKHNsaWRlci5hdXRvUGF1c2VkKSB7XHJcbiAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSBhdXRvIHNob3cgYW5kIHBhc3MgdHJ1ZSBhcmd1bWVudCB3aGljaCB3aWxsIHByZXZlbnQgY29udHJvbCB1cGRhdGVcclxuICAgICAgICAgICAgZWwuc3RhcnRBdXRvKHRydWUpO1xyXG4gICAgICAgICAgICAvLyByZXNldCB0aGUgYXV0b1BhdXNlZCB2YWx1ZVxyXG4gICAgICAgICAgICBzbGlkZXIuYXV0b1BhdXNlZCA9IG51bGw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplcyB0aGUgdGlja2VyIHByb2Nlc3NcclxuICAgICAqL1xyXG4gICAgdmFyIGluaXRUaWNrZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHN0YXJ0UG9zaXRpb24gPSAwLFxyXG4gICAgICBwb3NpdGlvbiwgdHJhbnNmb3JtLCB2YWx1ZSwgaWR4LCByYXRpbywgcHJvcGVydHksIG5ld1NwZWVkLCB0b3RhbERpbWVucztcclxuICAgICAgLy8gaWYgYXV0b0RpcmVjdGlvbiBpcyBcIm5leHRcIiwgYXBwZW5kIGEgY2xvbmUgb2YgdGhlIGVudGlyZSBzbGlkZXJcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcclxuICAgICAgICBlbC5hcHBlbmQoc2xpZGVyLmNoaWxkcmVuLmNsb25lKCkuYWRkQ2xhc3MoJ2J4LWNsb25lJykpO1xyXG4gICAgICAvLyBpZiBhdXRvRGlyZWN0aW9uIGlzIFwicHJldlwiLCBwcmVwZW5kIGEgY2xvbmUgb2YgdGhlIGVudGlyZSBzbGlkZXIsIGFuZCBzZXQgdGhlIGxlZnQgcG9zaXRpb25cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbC5wcmVwZW5kKHNsaWRlci5jaGlsZHJlbi5jbG9uZSgpLmFkZENsYXNzKCdieC1jbG9uZScpKTtcclxuICAgICAgICBwb3NpdGlvbiA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgc3RhcnRQb3NpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcG9zaXRpb24ubGVmdCA6IC1wb3NpdGlvbi50b3A7XHJcbiAgICAgIH1cclxuICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShzdGFydFBvc2l0aW9uLCAncmVzZXQnLCAwKTtcclxuICAgICAgLy8gZG8gbm90IGFsbG93IGNvbnRyb2xzIGluIHRpY2tlciBtb2RlXHJcbiAgICAgIHNsaWRlci5zZXR0aW5ncy5wYWdlciA9IGZhbHNlO1xyXG4gICAgICBzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgPSBmYWxzZTtcclxuICAgICAgc2xpZGVyLnNldHRpbmdzLmF1dG9Db250cm9scyA9IGZhbHNlO1xyXG4gICAgICAvLyBpZiBhdXRvSG92ZXIgaXMgcmVxdWVzdGVkXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MudGlja2VySG92ZXIpIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnVzaW5nQ1NTKSB7XHJcbiAgICAgICAgICBpZHggPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gNCA6IDU7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZm9ybSA9IGVsLmNzcygnLScgKyBzbGlkZXIuY3NzUHJlZml4ICsgJy10cmFuc2Zvcm0nKTtcclxuICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHRyYW5zZm9ybS5zcGxpdCgnLCcpW2lkeF0pO1xyXG4gICAgICAgICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHZhbHVlLCAncmVzZXQnLCAwKTtcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0b3RhbERpbWVucyA9IDA7XHJcbiAgICAgICAgICAgIHNsaWRlci5jaGlsZHJlbi5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgdG90YWxEaW1lbnMgKz0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICQodGhpcykub3V0ZXJXaWR0aCh0cnVlKSA6ICQodGhpcykub3V0ZXJIZWlnaHQodHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHNwZWVkIHJhdGlvICh1c2VkIHRvIGRldGVybWluZSB0aGUgbmV3IHNwZWVkIHRvIGZpbmlzaCB0aGUgcGF1c2VkIGFuaW1hdGlvbilcclxuICAgICAgICAgICAgcmF0aW8gPSBzbGlkZXIuc2V0dGluZ3Muc3BlZWQgLyB0b3RhbERpbWVucztcclxuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIHByb3BlcnR5IHRvIHVzZVxyXG4gICAgICAgICAgICBwcm9wZXJ0eSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAnbGVmdCcgOiAndG9wJztcclxuICAgICAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBuZXcgc3BlZWRcclxuICAgICAgICAgICAgbmV3U3BlZWQgPSByYXRpbyAqICh0b3RhbERpbWVucyAtIChNYXRoLmFicyhwYXJzZUludCh2YWx1ZSkpKSk7XHJcbiAgICAgICAgICAgIHRpY2tlckxvb3AobmV3U3BlZWQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIG9uIGVsIGhvdmVyXHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuaG92ZXIoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsLnN0b3AoKTtcclxuICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIHRvdGFsIHdpZHRoIG9mIGNoaWxkcmVuICh1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8pXHJcbiAgICAgICAgICAgIHRvdGFsRGltZW5zID0gMDtcclxuICAgICAgICAgICAgc2xpZGVyLmNoaWxkcmVuLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcclxuICAgICAgICAgICAgICB0b3RhbERpbWVucyArPSBzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnID8gJCh0aGlzKS5vdXRlcldpZHRoKHRydWUpIDogJCh0aGlzKS5vdXRlckhlaWdodCh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgc3BlZWQgcmF0aW8gKHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBuZXcgc3BlZWQgdG8gZmluaXNoIHRoZSBwYXVzZWQgYW5pbWF0aW9uKVxyXG4gICAgICAgICAgICByYXRpbyA9IHNsaWRlci5zZXR0aW5ncy5zcGVlZCAvIHRvdGFsRGltZW5zO1xyXG4gICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hpY2ggcHJvcGVydHkgdG8gdXNlXHJcbiAgICAgICAgICAgIHByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/ICdsZWZ0JyA6ICd0b3AnO1xyXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIG5ldyBzcGVlZFxyXG4gICAgICAgICAgICBuZXdTcGVlZCA9IHJhdGlvICogKHRvdGFsRGltZW5zIC0gKE1hdGguYWJzKHBhcnNlSW50KGVsLmNzcyhwcm9wZXJ0eSkpKSkpO1xyXG4gICAgICAgICAgICB0aWNrZXJMb29wKG5ld1NwZWVkKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICAvLyBzdGFydCB0aGUgdGlja2VyIGxvb3BcclxuICAgICAgdGlja2VyTG9vcCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJ1bnMgYSBjb250aW51b3VzIGxvb3AsIG5ld3MgdGlja2VyLXN0eWxlXHJcbiAgICAgKi9cclxuICAgIHZhciB0aWNrZXJMb29wID0gZnVuY3Rpb24ocmVzdW1lU3BlZWQpIHtcclxuICAgICAgdmFyIHNwZWVkID0gcmVzdW1lU3BlZWQgPyByZXN1bWVTcGVlZCA6IHNsaWRlci5zZXR0aW5ncy5zcGVlZCxcclxuICAgICAgcG9zaXRpb24gPSB7bGVmdDogMCwgdG9wOiAwfSxcclxuICAgICAgcmVzZXQgPSB7bGVmdDogMCwgdG9wOiAwfSxcclxuICAgICAgYW5pbWF0ZVByb3BlcnR5LCByZXNldFZhbHVlLCBwYXJhbXM7XHJcblxyXG4gICAgICAvLyBpZiBcIm5leHRcIiBhbmltYXRlIGxlZnQgcG9zaXRpb24gdG8gbGFzdCBjaGlsZCwgdGhlbiByZXNldCBsZWZ0IHRvIDBcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvRGlyZWN0aW9uID09PSAnbmV4dCcpIHtcclxuICAgICAgICBwb3NpdGlvbiA9IGVsLmZpbmQoJy5ieC1jbG9uZScpLmZpcnN0KCkucG9zaXRpb24oKTtcclxuICAgICAgLy8gaWYgXCJwcmV2XCIgYW5pbWF0ZSBsZWZ0IHBvc2l0aW9uIHRvIDAsIHRoZW4gcmVzZXQgbGVmdCB0byBmaXJzdCBub24tY2xvbmUgY2hpbGRcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNldCA9IHNsaWRlci5jaGlsZHJlbi5maXJzdCgpLnBvc2l0aW9uKCk7XHJcbiAgICAgIH1cclxuICAgICAgYW5pbWF0ZVByb3BlcnR5ID0gc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdob3Jpem9udGFsJyA/IC1wb3NpdGlvbi5sZWZ0IDogLXBvc2l0aW9uLnRvcDtcclxuICAgICAgcmVzZXRWYWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtcmVzZXQubGVmdCA6IC1yZXNldC50b3A7XHJcbiAgICAgIHBhcmFtcyA9IHtyZXNldFZhbHVlOiByZXNldFZhbHVlfTtcclxuICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eShhbmltYXRlUHJvcGVydHksICd0aWNrZXInLCBzcGVlZCwgcGFyYW1zKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVjayBpZiBlbCBpcyBvbiBzY3JlZW5cclxuICAgICAqL1xyXG4gICAgdmFyIGlzT25TY3JlZW4gPSBmdW5jdGlvbihlbCkge1xyXG4gICAgICB2YXIgd2luID0gJCh3aW5kb3cpLFxyXG4gICAgICB2aWV3cG9ydCA9IHtcclxuICAgICAgICB0b3A6IHdpbi5zY3JvbGxUb3AoKSxcclxuICAgICAgICBsZWZ0OiB3aW4uc2Nyb2xsTGVmdCgpXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvdW5kcyA9IGVsLm9mZnNldCgpO1xyXG5cclxuICAgICAgdmlld3BvcnQucmlnaHQgPSB2aWV3cG9ydC5sZWZ0ICsgd2luLndpZHRoKCk7XHJcbiAgICAgIHZpZXdwb3J0LmJvdHRvbSA9IHZpZXdwb3J0LnRvcCArIHdpbi5oZWlnaHQoKTtcclxuICAgICAgYm91bmRzLnJpZ2h0ID0gYm91bmRzLmxlZnQgKyBlbC5vdXRlcldpZHRoKCk7XHJcbiAgICAgIGJvdW5kcy5ib3R0b20gPSBib3VuZHMudG9wICsgZWwub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgIHJldHVybiAoISh2aWV3cG9ydC5yaWdodCA8IGJvdW5kcy5sZWZ0IHx8IHZpZXdwb3J0LmxlZnQgPiBib3VuZHMucmlnaHQgfHwgdmlld3BvcnQuYm90dG9tIDwgYm91bmRzLnRvcCB8fCB2aWV3cG9ydC50b3AgPiBib3VuZHMuYm90dG9tKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMga2V5Ym9hcmQgZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIHZhciBrZXlQcmVzcyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnRUYWcgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxcclxuICAgICAgdGFnRmlsdGVycyA9ICdpbnB1dHx0ZXh0YXJlYScsXHJcbiAgICAgIHAgPSBuZXcgUmVnRXhwKGFjdGl2ZUVsZW1lbnRUYWcsWydpJ10pLFxyXG4gICAgICByZXN1bHQgPSBwLmV4ZWModGFnRmlsdGVycyk7XHJcblxyXG4gICAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgaXNPblNjcmVlbihlbCkpIHtcclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAzOSkge1xyXG4gICAgICAgICAgY2xpY2tOZXh0QmluZChlKTtcclxuICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcpIHtcclxuICAgICAgICAgIGNsaWNrUHJldkJpbmQoZSk7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgdG91Y2ggZXZlbnRzXHJcbiAgICAgKi9cclxuICAgIHZhciBpbml0VG91Y2ggPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gaW5pdGlhbGl6ZSBvYmplY3QgdG8gY29udGFpbiBhbGwgdG91Y2ggdmFsdWVzXHJcbiAgICAgIHNsaWRlci50b3VjaCA9IHtcclxuICAgICAgICBzdGFydDoge3g6IDAsIHk6IDB9LFxyXG4gICAgICAgIGVuZDoge3g6IDAsIHk6IDB9XHJcbiAgICAgIH07XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC5iaW5kKCd0b3VjaHN0YXJ0IE1TUG9pbnRlckRvd24gcG9pbnRlcmRvd24nLCBvblRvdWNoU3RhcnQpO1xyXG5cclxuICAgICAgLy9mb3IgYnJvd3NlcnMgdGhhdCBoYXZlIGltcGxlbWVudGVkIHBvaW50ZXIgZXZlbnRzIGFuZCBmaXJlIGEgY2xpY2sgYWZ0ZXJcclxuICAgICAgLy9ldmVyeSBwb2ludGVydXAgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHBvaW50ZXJ1cCBpcyBvbiBzYW1lIHNjcmVlbiBsb2NhdGlvbiBhcyBwb2ludGVyZG93biBvciBub3RcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0Lm9uKCdjbGljaycsICcuYnhzbGlkZXIgYScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0Lmhhc0NsYXNzKCdjbGljay1kaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQucmVtb3ZlQ2xhc3MoJ2NsaWNrLWRpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNoc3RhcnRcIlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIG9uVG91Y2hTdGFydCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgLy9kaXNhYmxlIHNsaWRlciBjb250cm9scyB3aGlsZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggc2xpZGVzIHRvIGF2b2lkIHNsaWRlciBmcmVlemUgdGhhdCBoYXBwZW5zIG9uIHRvdWNoIGRldmljZXMgd2hlbiBhIHNsaWRlIHN3aXBlIGhhcHBlbnMgaW1tZWRpYXRlbHkgYWZ0ZXIgaW50ZXJhY3Rpbmcgd2l0aCBzbGlkZXIgY29udHJvbHNcclxuICAgICAgc2xpZGVyLmNvbnRyb2xzLmVsLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG5cclxuICAgICAgaWYgKHNsaWRlci53b3JraW5nKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyByZWNvcmQgdGhlIG9yaWdpbmFsIHBvc2l0aW9uIHdoZW4gdG91Y2ggc3RhcnRzXHJcbiAgICAgICAgc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zID0gZWwucG9zaXRpb24oKTtcclxuICAgICAgICB2YXIgb3JpZyA9IGUub3JpZ2luYWxFdmVudCxcclxuICAgICAgICB0b3VjaFBvaW50cyA9ICh0eXBlb2Ygb3JpZy5jaGFuZ2VkVG91Y2hlcyAhPT0gJ3VuZGVmaW5lZCcpID8gb3JpZy5jaGFuZ2VkVG91Y2hlcyA6IFtvcmlnXTtcclxuICAgICAgICAvLyByZWNvcmQgdGhlIHN0YXJ0aW5nIHRvdWNoIHgsIHkgY29vcmRpbmF0ZXNcclxuICAgICAgICBzbGlkZXIudG91Y2guc3RhcnQueCA9IHRvdWNoUG9pbnRzWzBdLnBhZ2VYO1xyXG4gICAgICAgIHNsaWRlci50b3VjaC5zdGFydC55ID0gdG91Y2hQb2ludHNbMF0ucGFnZVk7XHJcblxyXG4gICAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuZ2V0KDApLnNldFBvaW50ZXJDYXB0dXJlKSB7XHJcbiAgICAgICAgICBzbGlkZXIucG9pbnRlcklkID0gb3JpZy5wb2ludGVySWQ7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuZ2V0KDApLnNldFBvaW50ZXJDYXB0dXJlKHNsaWRlci5wb2ludGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBiaW5kIGEgXCJ0b3VjaG1vdmVcIiBldmVudCB0byB0aGUgdmlld3BvcnRcclxuICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgndG91Y2htb3ZlIE1TUG9pbnRlck1vdmUgcG9pbnRlcm1vdmUnLCBvblRvdWNoTW92ZSk7XHJcbiAgICAgICAgLy8gYmluZCBhIFwidG91Y2hlbmRcIiBldmVudCB0byB0aGUgdmlld3BvcnRcclxuICAgICAgICBzbGlkZXIudmlld3BvcnQuYmluZCgndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XHJcbiAgICAgICAgc2xpZGVyLnZpZXdwb3J0LmJpbmQoJ01TUG9pbnRlckNhbmNlbCBwb2ludGVyY2FuY2VsJywgb25Qb2ludGVyQ2FuY2VsKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbmNlbCBQb2ludGVyIGZvciBXaW5kb3dzIFBob25lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGUgKGV2ZW50KVxyXG4gICAgICogIC0gRE9NIGV2ZW50IG9iamVjdFxyXG4gICAgICovXHJcbiAgICB2YXIgb25Qb2ludGVyQ2FuY2VsID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAvKiBvblBvaW50ZXJDYW5jZWwgaGFuZGxlciBpcyBuZWVkZWQgdG8gZGVhbCB3aXRoIHNpdHVhdGlvbnMgd2hlbiBhIHRvdWNoZW5kXHJcbiAgICAgIGRvZXNuJ3QgZmlyZSBhZnRlciBhIHRvdWNoc3RhcnQgKHRoaXMgaGFwcGVucyBvbiB3aW5kb3dzIHBob25lcyBvbmx5KSAqL1xyXG4gICAgICBzZXRQb3NpdGlvblByb3BlcnR5KHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0LCAncmVzZXQnLCAwKTtcclxuXHJcbiAgICAgIC8vcmVtb3ZlIGhhbmRsZXJzXHJcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgnTVNQb2ludGVyQ2FuY2VsIHBvaW50ZXJjYW5jZWwnLCBvblBvaW50ZXJDYW5jZWwpO1xyXG4gICAgICBzbGlkZXIudmlld3BvcnQudW5iaW5kKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcclxuICAgICAgc2xpZGVyLnZpZXdwb3J0LnVuYmluZCgndG91Y2hlbmQgTVNQb2ludGVyVXAgcG9pbnRlcnVwJywgb25Ub3VjaEVuZCk7XHJcbiAgICAgIGlmIChzbGlkZXIudmlld3BvcnQuZ2V0KDApLnJlbGVhc2VQb2ludGVyQ2FwdHVyZSkge1xyXG4gICAgICAgIHNsaWRlci52aWV3cG9ydC5nZXQoMCkucmVsZWFzZVBvaW50ZXJDYXB0dXJlKHNsaWRlci5wb2ludGVySWQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZlbnQgaGFuZGxlciBmb3IgXCJ0b3VjaG1vdmVcIlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlIChldmVudClcclxuICAgICAqICAtIERPTSBldmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgdmFyIG9uVG91Y2hNb3ZlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgb3JpZyA9IGUub3JpZ2luYWxFdmVudCxcclxuICAgICAgdG91Y2hQb2ludHMgPSAodHlwZW9mIG9yaWcuY2hhbmdlZFRvdWNoZXMgIT09ICd1bmRlZmluZWQnKSA/IG9yaWcuY2hhbmdlZFRvdWNoZXMgOiBbb3JpZ10sXHJcbiAgICAgIC8vIGlmIHNjcm9sbGluZyBvbiB5IGF4aXMsIGRvIG5vdCBwcmV2ZW50IGRlZmF1bHRcclxuICAgICAgeE1vdmVtZW50ID0gTWF0aC5hYnModG91Y2hQb2ludHNbMF0ucGFnZVggLSBzbGlkZXIudG91Y2guc3RhcnQueCksXHJcbiAgICAgIHlNb3ZlbWVudCA9IE1hdGguYWJzKHRvdWNoUG9pbnRzWzBdLnBhZ2VZIC0gc2xpZGVyLnRvdWNoLnN0YXJ0LnkpLFxyXG4gICAgICB2YWx1ZSA9IDAsXHJcbiAgICAgIGNoYW5nZSA9IDA7XHJcblxyXG4gICAgICAvLyB4IGF4aXMgc3dpcGVcclxuICAgICAgaWYgKCh4TW92ZW1lbnQgKiAzKSA+IHlNb3ZlbWVudCAmJiBzbGlkZXIuc2V0dGluZ3MucHJldmVudERlZmF1bHRTd2lwZVgpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIC8vIHkgYXhpcyBzd2lwZVxyXG4gICAgICB9IGVsc2UgaWYgKCh5TW92ZW1lbnQgKiAzKSA+IHhNb3ZlbWVudCAmJiBzbGlkZXIuc2V0dGluZ3MucHJldmVudERlZmF1bHRTd2lwZVkpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlICE9PSAnZmFkZScgJiYgc2xpZGVyLnNldHRpbmdzLm9uZVRvT25lVG91Y2gpIHtcclxuICAgICAgICAvLyBpZiBob3Jpem9udGFsLCBkcmFnIGFsb25nIHggYXhpc1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MubW9kZSA9PT0gJ2hvcml6b250YWwnKSB7XHJcbiAgICAgICAgICBjaGFuZ2UgPSB0b3VjaFBvaW50c1swXS5wYWdlWCAtIHNsaWRlci50b3VjaC5zdGFydC54O1xyXG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MubGVmdCArIGNoYW5nZTtcclxuICAgICAgICAvLyBpZiB2ZXJ0aWNhbCwgZHJhZyBhbG9uZyB5IGF4aXNcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY2hhbmdlID0gdG91Y2hQb2ludHNbMF0ucGFnZVkgLSBzbGlkZXIudG91Y2guc3RhcnQueTtcclxuICAgICAgICAgIHZhbHVlID0gc2xpZGVyLnRvdWNoLm9yaWdpbmFsUG9zLnRvcCArIGNoYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciBcInRvdWNoZW5kXCJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZSAoZXZlbnQpXHJcbiAgICAgKiAgLSBET00gZXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIHZhciBvblRvdWNoRW5kID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICBzbGlkZXIudmlld3BvcnQudW5iaW5kKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIG9uVG91Y2hNb3ZlKTtcclxuICAgICAgLy9lbmFibGUgc2xpZGVyIGNvbnRyb2xzIGFzIHNvb24gYXMgdXNlciBzdG9wcyBpbnRlcmFjaW5nIHdpdGggc2xpZGVzXHJcbiAgICAgIHNsaWRlci5jb250cm9scy5lbC5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgdmFyIG9yaWcgICAgPSBlLm9yaWdpbmFsRXZlbnQsXHJcbiAgICAgIHRvdWNoUG9pbnRzID0gKHR5cGVvZiBvcmlnLmNoYW5nZWRUb3VjaGVzICE9PSAndW5kZWZpbmVkJykgPyBvcmlnLmNoYW5nZWRUb3VjaGVzIDogW29yaWddLFxyXG4gICAgICB2YWx1ZSAgICAgICA9IDAsXHJcbiAgICAgIGRpc3RhbmNlICAgID0gMDtcclxuICAgICAgLy8gcmVjb3JkIGVuZCB4LCB5IHBvc2l0aW9uc1xyXG4gICAgICBzbGlkZXIudG91Y2guZW5kLnggPSB0b3VjaFBvaW50c1swXS5wYWdlWDtcclxuICAgICAgc2xpZGVyLnRvdWNoLmVuZC55ID0gdG91Y2hQb2ludHNbMF0ucGFnZVk7XHJcbiAgICAgIC8vIGlmIGZhZGUgbW9kZSwgY2hlY2sgaWYgYWJzb2x1dGUgeCBkaXN0YW5jZSBjbGVhcnMgdGhlIHRocmVzaG9sZFxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLm1vZGUgPT09ICdmYWRlJykge1xyXG4gICAgICAgIGRpc3RhbmNlID0gTWF0aC5hYnMoc2xpZGVyLnRvdWNoLnN0YXJ0LnggLSBzbGlkZXIudG91Y2guZW5kLngpO1xyXG4gICAgICAgIGlmIChkaXN0YW5jZSA+PSBzbGlkZXIuc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgIGlmIChzbGlkZXIudG91Y2guc3RhcnQueCA+IHNsaWRlci50b3VjaC5lbmQueCkge1xyXG4gICAgICAgICAgICBlbC5nb1RvTmV4dFNsaWRlKCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbC5zdG9wQXV0bygpO1xyXG4gICAgICAgIH1cclxuICAgICAgLy8gbm90IGZhZGUgbW9kZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBkaXN0YW5jZSBhbmQgZWwncyBhbmltYXRlIHByb3BlcnR5XHJcbiAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgIGRpc3RhbmNlID0gc2xpZGVyLnRvdWNoLmVuZC54IC0gc2xpZGVyLnRvdWNoLnN0YXJ0Lng7XHJcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci50b3VjaC5vcmlnaW5hbFBvcy5sZWZ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkaXN0YW5jZSA9IHNsaWRlci50b3VjaC5lbmQueSAtIHNsaWRlci50b3VjaC5zdGFydC55O1xyXG4gICAgICAgICAgdmFsdWUgPSBzbGlkZXIudG91Y2gub3JpZ2luYWxQb3MudG9wO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBub3QgaW5maW5pdGUgbG9vcCBhbmQgZmlyc3QgLyBsYXN0IHNsaWRlLCBkbyBub3QgYXR0ZW1wdCBhIHNsaWRlIHRyYW5zaXRpb25cclxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgKChzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwICYmIGRpc3RhbmNlID4gMCkgfHwgKHNsaWRlci5hY3RpdmUubGFzdCAmJiBkaXN0YW5jZSA8IDApKSkge1xyXG4gICAgICAgICAgc2V0UG9zaXRpb25Qcm9wZXJ0eSh2YWx1ZSwgJ3Jlc2V0JywgMjAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy8gY2hlY2sgaWYgZGlzdGFuY2UgY2xlYXJzIHRocmVzaG9sZFxyXG4gICAgICAgICAgaWYgKE1hdGguYWJzKGRpc3RhbmNlKSA+PSBzbGlkZXIuc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgMCkge1xyXG4gICAgICAgICAgICAgIGVsLmdvVG9OZXh0U2xpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWwuc3RvcEF1dG8oKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGVsLmFuaW1hdGUocHJvcGVydHksIDIwMCk7XHJcbiAgICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdyZXNldCcsIDIwMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHNsaWRlci52aWV3cG9ydC51bmJpbmQoJ3RvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cCcsIG9uVG91Y2hFbmQpO1xyXG4gICAgICBpZiAoc2xpZGVyLnZpZXdwb3J0LmdldCgwKS5yZWxlYXNlUG9pbnRlckNhcHR1cmUpIHtcclxuICAgICAgICBzbGlkZXIudmlld3BvcnQuZ2V0KDApLnJlbGVhc2VQb2ludGVyQ2FwdHVyZShzbGlkZXIucG9pbnRlcklkKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFdpbmRvdyByZXNpemUgZXZlbnQgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgdmFyIHJlc2l6ZVdpbmRvdyA9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgLy8gZG9uJ3QgZG8gYW55dGhpbmcgaWYgc2xpZGVyIGlzbid0IGluaXRpYWxpemVkLlxyXG4gICAgICBpZiAoIXNsaWRlci5pbml0aWFsaXplZCkgeyByZXR1cm47IH1cclxuICAgICAgLy8gRGVsYXkgaWYgc2xpZGVyIHdvcmtpbmcuXHJcbiAgICAgIGlmIChzbGlkZXIud29ya2luZykge1xyXG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KHJlc2l6ZVdpbmRvdywgMTApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIGdldCB0aGUgbmV3IHdpbmRvdyBkaW1lbnMgKGFnYWluLCB0aGFuayB5b3UgSUUpXHJcbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoTmV3ID0gJCh3aW5kb3cpLndpZHRoKCksXHJcbiAgICAgICAgd2luZG93SGVpZ2h0TmV3ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGF0IGl0IGlzIGEgdHJ1ZSB3aW5kb3cgcmVzaXplXHJcbiAgICAgICAgLy8gKndlIG11c3QgY2hlY2sgdGhpcyBiZWNhdXNlIG91ciBkaW5vc2F1ciBmcmllbmQgSUUgZmlyZXMgYSB3aW5kb3cgcmVzaXplIGV2ZW50IHdoZW4gY2VydGFpbiBET00gZWxlbWVudHNcclxuICAgICAgICAvLyBhcmUgcmVzaXplZC4gQ2FuIHlvdSBqdXN0IGRpZSBhbHJlYWR5PypcclxuICAgICAgICBpZiAod2luZG93V2lkdGggIT09IHdpbmRvd1dpZHRoTmV3IHx8IHdpbmRvd0hlaWdodCAhPT0gd2luZG93SGVpZ2h0TmV3KSB7XHJcbiAgICAgICAgICAvLyBzZXQgdGhlIG5ldyB3aW5kb3cgZGltZW5zXHJcbiAgICAgICAgICB3aW5kb3dXaWR0aCA9IHdpbmRvd1dpZHRoTmV3O1xyXG4gICAgICAgICAgd2luZG93SGVpZ2h0ID0gd2luZG93SGVpZ2h0TmV3O1xyXG4gICAgICAgICAgLy8gdXBkYXRlIGFsbCBkeW5hbWljIGVsZW1lbnRzXHJcbiAgICAgICAgICBlbC5yZWRyYXdTbGlkZXIoKTtcclxuICAgICAgICAgIC8vIENhbGwgdXNlciByZXNpemUgaGFuZGxlclxyXG4gICAgICAgICAgc2xpZGVyLnNldHRpbmdzLm9uU2xpZGVyUmVzaXplLmNhbGwoZWwsIHNsaWRlci5hY3RpdmUuaW5kZXgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gYXJpYS1oaWRkZW49dHJ1ZSBhdHRyaWJ1dGUgdG8gZWFjaCBlbGVtZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHN0YXJ0VmlzaWJsZUluZGV4IChpbnQpXHJcbiAgICAgKiAgLSB0aGUgZmlyc3QgdmlzaWJsZSBlbGVtZW50J3MgaW5kZXhcclxuICAgICAqL1xyXG4gICAgdmFyIGFwcGx5QXJpYUhpZGRlbkF0dHJpYnV0ZXMgPSBmdW5jdGlvbihzdGFydFZpc2libGVJbmRleCkge1xyXG4gICAgICB2YXIgbnVtYmVyT2ZTbGlkZXNTaG93aW5nID0gZ2V0TnVtYmVyU2xpZGVzU2hvd2luZygpO1xyXG4gICAgICAvLyBvbmx5IGFwcGx5IGF0dHJpYnV0ZXMgaWYgdGhlIHNldHRpbmcgaXMgZW5hYmxlZCBhbmQgbm90IGluIHRpY2tlciBtb2RlXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUhpZGRlbiAmJiAhc2xpZGVyLnNldHRpbmdzLnRpY2tlcikge1xyXG4gICAgICAgIC8vIGFkZCBhcmlhLWhpZGRlbj10cnVlIHRvIGFsbCBlbGVtZW50c1xyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XHJcbiAgICAgICAgLy8gZ2V0IHRoZSB2aXNpYmxlIGVsZW1lbnRzIGFuZCBjaGFuZ2UgdG8gYXJpYS1oaWRkZW49ZmFsc2VcclxuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uc2xpY2Uoc3RhcnRWaXNpYmxlSW5kZXgsIHN0YXJ0VmlzaWJsZUluZGV4ICsgbnVtYmVyT2ZTbGlkZXNTaG93aW5nKS5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBpbmRleCBhY2NvcmRpbmcgdG8gcHJlc2VudCBwYWdlIHJhbmdlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNsaWRlT25kZXggKGludClcclxuICAgICAqICAtIHRoZSBkZXNpcmVkIHNsaWRlIGluZGV4XHJcbiAgICAgKi9cclxuICAgIHZhciBzZXRTbGlkZUluZGV4ID0gZnVuY3Rpb24oc2xpZGVJbmRleCkge1xyXG4gICAgICBpZiAoc2xpZGVJbmRleCA8IDApIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCkge1xyXG4gICAgICAgICAgcmV0dXJuIGdldFBhZ2VyUXR5KCkgLSAxO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgIC8vd2UgZG9uJ3QgZ28gdG8gdW5kZWZpbmVkIHNsaWRlc1xyXG4gICAgICAgICAgcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBpZiBzbGlkZUluZGV4IGlzIGdyZWF0ZXIgdGhhbiBjaGlsZHJlbiBsZW5ndGgsIHNldCBhY3RpdmUgaW5kZXggdG8gMCAodGhpcyBoYXBwZW5zIGR1cmluZyBpbmZpbml0ZSBsb29wKVxyXG4gICAgICB9IGVsc2UgaWYgKHNsaWRlSW5kZXggPj0gZ2V0UGFnZXJRdHkoKSkge1xyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuaW5maW5pdGVMb29wKSB7XHJcbiAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgLy93ZSBkb24ndCBtb3ZlIHRvIHVuZGVmaW5lZCBwYWdlc1xyXG4gICAgICAgICAgcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7XHJcbiAgICAgICAgfVxyXG4gICAgICAvLyBzZXQgYWN0aXZlIGluZGV4IHRvIHJlcXVlc3RlZCBzbGlkZVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzbGlkZUluZGV4O1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqID0gUFVCTElDIEZVTkNUSU9OU1xyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGVyZm9ybXMgc2xpZGUgdHJhbnNpdGlvbiB0byB0aGUgc3BlY2lmaWVkIHNsaWRlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNsaWRlSW5kZXggKGludClcclxuICAgICAqICAtIHRoZSBkZXN0aW5hdGlvbiBzbGlkZSdzIGluZGV4ICh6ZXJvLWJhc2VkKVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkaXJlY3Rpb24gKHN0cmluZylcclxuICAgICAqICAtIElOVEVSTkFMIFVTRSBPTkxZIC0gdGhlIGRpcmVjdGlvbiBvZiB0cmF2ZWwgKFwicHJldlwiIC8gXCJuZXh0XCIpXHJcbiAgICAgKi9cclxuICAgIGVsLmdvVG9TbGlkZSA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgsIGRpcmVjdGlvbikge1xyXG4gICAgICAvLyBvblNsaWRlQmVmb3JlLCBvblNsaWRlTmV4dCwgb25TbGlkZVByZXYgY2FsbGJhY2tzXHJcbiAgICAgIC8vIEFsbG93IHRyYW5zaXRpb24gY2FuY2VsaW5nIGJhc2VkIG9uIHJldHVybmVkIHZhbHVlXHJcbiAgICAgIHZhciBwZXJmb3JtVHJhbnNpdGlvbiA9IHRydWUsXHJcbiAgICAgIG1vdmVCeSA9IDAsXHJcbiAgICAgIHBvc2l0aW9uID0ge2xlZnQ6IDAsIHRvcDogMH0sXHJcbiAgICAgIGxhc3RDaGlsZCA9IG51bGwsXHJcbiAgICAgIGxhc3RTaG93aW5nSW5kZXgsIGVxLCB2YWx1ZSwgcmVxdWVzdEVsO1xyXG4gICAgICAvLyBzdG9yZSB0aGUgb2xkIGluZGV4XHJcbiAgICAgIHNsaWRlci5vbGRJbmRleCA9IHNsaWRlci5hY3RpdmUuaW5kZXg7XHJcbiAgICAgIC8vc2V0IG5ldyBpbmRleFxyXG4gICAgICBzbGlkZXIuYWN0aXZlLmluZGV4ID0gc2V0U2xpZGVJbmRleChzbGlkZUluZGV4KTtcclxuXHJcbiAgICAgIC8vIGlmIHBsdWdpbiBpcyBjdXJyZW50bHkgaW4gbW90aW9uLCBpZ25vcmUgcmVxdWVzdFxyXG4gICAgICBpZiAoc2xpZGVyLndvcmtpbmcgfHwgc2xpZGVyLmFjdGl2ZS5pbmRleCA9PT0gc2xpZGVyLm9sZEluZGV4KSB7IHJldHVybjsgfVxyXG4gICAgICAvLyBkZWNsYXJlIHRoYXQgcGx1Z2luIGlzIGluIG1vdGlvblxyXG4gICAgICBzbGlkZXIud29ya2luZyA9IHRydWU7XHJcblxyXG4gICAgICBwZXJmb3JtVHJhbnNpdGlvbiA9IHNsaWRlci5zZXR0aW5ncy5vblNsaWRlQmVmb3JlLmNhbGwoZWwsIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KSwgc2xpZGVyLm9sZEluZGV4LCBzbGlkZXIuYWN0aXZlLmluZGV4KTtcclxuXHJcbiAgICAgIC8vIElmIHRyYW5zaXRpb25zIGNhbmNlbGVkLCByZXNldCBhbmQgcmV0dXJuXHJcbiAgICAgIGlmICh0eXBlb2YgKHBlcmZvcm1UcmFuc2l0aW9uKSAhPT0gJ3VuZGVmaW5lZCcgJiYgIXBlcmZvcm1UcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IHNsaWRlci5vbGRJbmRleDsgLy8gcmVzdG9yZSBvbGQgaW5kZXhcclxuICAgICAgICBzbGlkZXIud29ya2luZyA9IGZhbHNlOyAvLyBpcyBub3QgaW4gbW90aW9uXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcclxuICAgICAgICAvLyBQcmV2ZW50IGNhbmNlbGluZyBpbiBmdXR1cmUgZnVuY3Rpb25zIG9yIGxhY2sgdGhlcmUtb2YgZnJvbSBuZWdhdGluZyBwcmV2aW91cyBjb21tYW5kcyB0byBjYW5jZWxcclxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5vblNsaWRlTmV4dC5jYWxsKGVsLCBzbGlkZXIuY2hpbGRyZW4uZXEoc2xpZGVyLmFjdGl2ZS5pbmRleCksIHNsaWRlci5vbGRJbmRleCwgc2xpZGVyLmFjdGl2ZS5pbmRleCkpIHtcclxuICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gJ3ByZXYnKSB7XHJcbiAgICAgICAgLy8gUHJldmVudCBjYW5jZWxpbmcgaW4gZnV0dXJlIGZ1bmN0aW9ucyBvciBsYWNrIHRoZXJlLW9mIGZyb20gbmVnYXRpbmcgcHJldmlvdXMgY29tbWFuZHMgdG8gY2FuY2VsXHJcbiAgICAgICAgaWYgKCFzbGlkZXIuc2V0dGluZ3Mub25TbGlkZVByZXYuY2FsbChlbCwgc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpLCBzbGlkZXIub2xkSW5kZXgsIHNsaWRlci5hY3RpdmUuaW5kZXgpKSB7XHJcbiAgICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gY2hlY2sgaWYgbGFzdCBzbGlkZVxyXG4gICAgICBzbGlkZXIuYWN0aXZlLmxhc3QgPSBzbGlkZXIuYWN0aXZlLmluZGV4ID49IGdldFBhZ2VyUXR5KCkgLSAxO1xyXG4gICAgICAvLyB1cGRhdGUgdGhlIHBhZ2VyIHdpdGggYWN0aXZlIGNsYXNzXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIgfHwgc2xpZGVyLnNldHRpbmdzLnBhZ2VyQ3VzdG9tKSB7IHVwZGF0ZVBhZ2VyQWN0aXZlKHNsaWRlci5hY3RpdmUuaW5kZXgpOyB9XHJcbiAgICAgIC8vIC8vIGNoZWNrIGZvciBkaXJlY3Rpb24gY29udHJvbCB1cGRhdGVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5jb250cm9scykgeyB1cGRhdGVEaXJlY3Rpb25Db250cm9scygpOyB9XHJcbiAgICAgIC8vIGlmIHNsaWRlciBpcyBzZXQgdG8gbW9kZTogXCJmYWRlXCJcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnZmFkZScpIHtcclxuICAgICAgICAvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgJiYgc2xpZGVyLnZpZXdwb3J0LmhlaWdodCgpICE9PSBnZXRWaWV3cG9ydEhlaWdodCgpKSB7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OiBnZXRWaWV3cG9ydEhlaWdodCgpfSwgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBmYWRlIG91dCB0aGUgdmlzaWJsZSBjaGlsZCBhbmQgcmVzZXQgaXRzIHotaW5kZXggdmFsdWVcclxuICAgICAgICBzbGlkZXIuY2hpbGRyZW4uZmlsdGVyKCc6dmlzaWJsZScpLmZhZGVPdXQoc2xpZGVyLnNldHRpbmdzLnNwZWVkKS5jc3Moe3pJbmRleDogMH0pO1xyXG4gICAgICAgIC8vIGZhZGUgaW4gdGhlIG5ld2x5IHJlcXVlc3RlZCBzbGlkZVxyXG4gICAgICAgIHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuYWN0aXZlLmluZGV4KS5jc3MoJ3pJbmRleCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCArIDEpLmZhZGVJbihzbGlkZXIuc2V0dGluZ3Muc3BlZWQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgJCh0aGlzKS5jc3MoJ3pJbmRleCcsIHNsaWRlci5zZXR0aW5ncy5zbGlkZVpJbmRleCk7XHJcbiAgICAgICAgICB1cGRhdGVBZnRlclNsaWRlVHJhbnNpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAvLyBzbGlkZXIgbW9kZSBpcyBub3QgXCJmYWRlXCJcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBpZiBhZGFwdGl2ZUhlaWdodCBpcyB0cnVlIGFuZCBuZXh0IGhlaWdodCBpcyBkaWZmZXJlbnQgZnJvbSBjdXJyZW50IGhlaWdodCwgYW5pbWF0ZSB0byB0aGUgbmV3IGhlaWdodFxyXG4gICAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYWRhcHRpdmVIZWlnaHQgJiYgc2xpZGVyLnZpZXdwb3J0LmhlaWdodCgpICE9PSBnZXRWaWV3cG9ydEhlaWdodCgpKSB7XHJcbiAgICAgICAgICBzbGlkZXIudmlld3BvcnQuYW5pbWF0ZSh7aGVpZ2h0OiBnZXRWaWV3cG9ydEhlaWdodCgpfSwgc2xpZGVyLnNldHRpbmdzLmFkYXB0aXZlSGVpZ2h0U3BlZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZiBjYXJvdXNlbCBhbmQgbm90IGluZmluaXRlIGxvb3BcclxuICAgICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy5pbmZpbml0ZUxvb3AgJiYgc2xpZGVyLmNhcm91c2VsICYmIHNsaWRlci5hY3RpdmUubGFzdCkge1xyXG4gICAgICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcpIHtcclxuICAgICAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IGNoaWxkIHBvc2l0aW9uXHJcbiAgICAgICAgICAgIGxhc3RDaGlsZCA9IHNsaWRlci5jaGlsZHJlbi5lcShzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gbGFzdENoaWxkLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGxhc3Qgc2xpZGVcclxuICAgICAgICAgICAgbW92ZUJ5ID0gc2xpZGVyLnZpZXdwb3J0LndpZHRoKCkgLSBsYXN0Q2hpbGQub3V0ZXJXaWR0aCgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gZ2V0IGxhc3Qgc2hvd2luZyBpbmRleCBwb3NpdGlvblxyXG4gICAgICAgICAgICBsYXN0U2hvd2luZ0luZGV4ID0gc2xpZGVyLmNoaWxkcmVuLmxlbmd0aCAtIHNsaWRlci5zZXR0aW5ncy5taW5TbGlkZXM7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uID0gc2xpZGVyLmNoaWxkcmVuLmVxKGxhc3RTaG93aW5nSW5kZXgpLnBvc2l0aW9uKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBob3Jpem9udGFsIGNhcm91c2VsLCBnb2luZyBwcmV2aW91cyB3aGlsZSBvbiBmaXJzdCBzbGlkZSAoaW5maW5pdGVMb29wIG1vZGUpXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZXIuY2Fyb3VzZWwgJiYgc2xpZGVyLmFjdGl2ZS5sYXN0ICYmIGRpcmVjdGlvbiA9PT0gJ3ByZXYnKSB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2hpbGQgcG9zaXRpb25cclxuICAgICAgICAgIGVxID0gc2xpZGVyLnNldHRpbmdzLm1vdmVTbGlkZXMgPT09IDEgPyBzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzIC0gZ2V0TW92ZUJ5KCkgOiAoKGdldFBhZ2VyUXR5KCkgLSAxKSAqIGdldE1vdmVCeSgpKSAtIChzbGlkZXIuY2hpbGRyZW4ubGVuZ3RoIC0gc2xpZGVyLnNldHRpbmdzLm1heFNsaWRlcyk7XHJcbiAgICAgICAgICBsYXN0Q2hpbGQgPSBlbC5jaGlsZHJlbignLmJ4LWNsb25lJykuZXEoZXEpO1xyXG4gICAgICAgICAgcG9zaXRpb24gPSBsYXN0Q2hpbGQucG9zaXRpb24oKTtcclxuICAgICAgICAvLyBpZiBpbmZpbml0ZSBsb29wIGFuZCBcIk5leHRcIiBpcyBjbGlja2VkIG9uIHRoZSBsYXN0IHNsaWRlXHJcbiAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICduZXh0JyAmJiBzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAvLyBnZXQgdGhlIGxhc3QgY2xvbmUgcG9zaXRpb25cclxuICAgICAgICAgIHBvc2l0aW9uID0gZWwuZmluZCgnPiAuYngtY2xvbmUnKS5lcShzbGlkZXIuc2V0dGluZ3MubWF4U2xpZGVzKS5wb3NpdGlvbigpO1xyXG4gICAgICAgICAgc2xpZGVyLmFjdGl2ZS5sYXN0ID0gZmFsc2U7XHJcbiAgICAgICAgLy8gbm9ybWFsIG5vbi16ZXJvIHJlcXVlc3RzXHJcbiAgICAgICAgfSBlbHNlIGlmIChzbGlkZUluZGV4ID49IDApIHtcclxuICAgICAgICAgIC8vcGFyc2VJbnQgaXMgYXBwbGllZCB0byBhbGxvdyBmbG9hdHMgZm9yIHNsaWRlcy9wYWdlXHJcbiAgICAgICAgICByZXF1ZXN0RWwgPSBzbGlkZUluZGV4ICogcGFyc2VJbnQoZ2V0TW92ZUJ5KCkpO1xyXG4gICAgICAgICAgcG9zaXRpb24gPSBzbGlkZXIuY2hpbGRyZW4uZXEocmVxdWVzdEVsKS5wb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogSWYgdGhlIHBvc2l0aW9uIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICAgKiAoZS5nLiBpZiB5b3UgZGVzdHJveSB0aGUgc2xpZGVyIG9uIGEgbmV4dCBjbGljayksXHJcbiAgICAgICAgICogaXQgZG9lc24ndCB0aHJvdyBhbiBlcnJvci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZiAodHlwZW9mIChwb3NpdGlvbikgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IHNsaWRlci5zZXR0aW5ncy5tb2RlID09PSAnaG9yaXpvbnRhbCcgPyAtKHBvc2l0aW9uLmxlZnQgLSBtb3ZlQnkpIDogLXBvc2l0aW9uLnRvcDtcclxuICAgICAgICAgIC8vIHBsdWdpbiB2YWx1ZXMgdG8gYmUgYW5pbWF0ZWRcclxuICAgICAgICAgIHNldFBvc2l0aW9uUHJvcGVydHkodmFsdWUsICdzbGlkZScsIHNsaWRlci5zZXR0aW5ncy5zcGVlZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNsaWRlci53b3JraW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXJpYUhpZGRlbikgeyBhcHBseUFyaWFIaWRkZW5BdHRyaWJ1dGVzKHNsaWRlci5hY3RpdmUuaW5kZXggKiBnZXRNb3ZlQnkoKSk7IH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2l0aW9ucyB0byB0aGUgbmV4dCBzbGlkZSBpbiB0aGUgc2hvd1xyXG4gICAgICovXHJcbiAgICBlbC5nb1RvTmV4dFNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXHJcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuYWN0aXZlLmxhc3QpIHsgcmV0dXJuOyB9XHJcbiAgICAgIHZhciBwYWdlckluZGV4ID0gcGFyc2VJbnQoc2xpZGVyLmFjdGl2ZS5pbmRleCkgKyAxO1xyXG4gICAgICBlbC5nb1RvU2xpZGUocGFnZXJJbmRleCwgJ25leHQnKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2l0aW9ucyB0byB0aGUgcHJldiBzbGlkZSBpbiB0aGUgc2hvd1xyXG4gICAgICovXHJcbiAgICBlbC5nb1RvUHJldlNsaWRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGlmIGluZmluaXRlTG9vcCBpcyBmYWxzZSBhbmQgbGFzdCBwYWdlIGlzIHNob3dpbmcsIGRpc3JlZ2FyZCBjYWxsXHJcbiAgICAgIGlmICghc2xpZGVyLnNldHRpbmdzLmluZmluaXRlTG9vcCAmJiBzbGlkZXIuYWN0aXZlLmluZGV4ID09PSAwKSB7IHJldHVybjsgfVxyXG4gICAgICB2YXIgcGFnZXJJbmRleCA9IHBhcnNlSW50KHNsaWRlci5hY3RpdmUuaW5kZXgpIC0gMTtcclxuICAgICAgZWwuZ29Ub1NsaWRlKHBhZ2VySW5kZXgsICdwcmV2Jyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnRzIHRoZSBhdXRvIHNob3dcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJldmVudENvbnRyb2xVcGRhdGUgKGJvb2xlYW4pXHJcbiAgICAgKiAgLSBpZiB0cnVlLCBhdXRvIGNvbnRyb2xzIHN0YXRlIHdpbGwgbm90IGJlIHVwZGF0ZWRcclxuICAgICAqL1xyXG4gICAgZWwuc3RhcnRBdXRvID0gZnVuY3Rpb24ocHJldmVudENvbnRyb2xVcGRhdGUpIHtcclxuICAgICAgLy8gaWYgYW4gaW50ZXJ2YWwgYWxyZWFkeSBleGlzdHMsIGRpc3JlZ2FyZCBjYWxsXHJcbiAgICAgIGlmIChzbGlkZXIuaW50ZXJ2YWwpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIGNyZWF0ZSBhbiBpbnRlcnZhbFxyXG4gICAgICBzbGlkZXIuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmF1dG9EaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgICAgZWwuZ29Ub05leHRTbGlkZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlbC5nb1RvUHJldlNsaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBzbGlkZXIuc2V0dGluZ3MucGF1c2UpO1xyXG4gICAgICAvLyBpZiBhdXRvIGNvbnRyb2xzIGFyZSBkaXNwbGF5ZWQgYW5kIHByZXZlbnRDb250cm9sVXBkYXRlIGlzIG5vdCB0cnVlXHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MuYXV0b0NvbnRyb2xzICYmIHByZXZlbnRDb250cm9sVXBkYXRlICE9PSB0cnVlKSB7IHVwZGF0ZUF1dG9Db250cm9scygnc3RvcCcpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RvcHMgdGhlIGF1dG8gc2hvd1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcmV2ZW50Q29udHJvbFVwZGF0ZSAoYm9vbGVhbilcclxuICAgICAqICAtIGlmIHRydWUsIGF1dG8gY29udHJvbHMgc3RhdGUgd2lsbCBub3QgYmUgdXBkYXRlZFxyXG4gICAgICovXHJcbiAgICBlbC5zdG9wQXV0byA9IGZ1bmN0aW9uKHByZXZlbnRDb250cm9sVXBkYXRlKSB7XHJcbiAgICAgIC8vIGlmIG5vIGludGVydmFsIGV4aXN0cywgZGlzcmVnYXJkIGNhbGxcclxuICAgICAgaWYgKCFzbGlkZXIuaW50ZXJ2YWwpIHsgcmV0dXJuOyB9XHJcbiAgICAgIC8vIGNsZWFyIHRoZSBpbnRlcnZhbFxyXG4gICAgICBjbGVhckludGVydmFsKHNsaWRlci5pbnRlcnZhbCk7XHJcbiAgICAgIHNsaWRlci5pbnRlcnZhbCA9IG51bGw7XHJcbiAgICAgIC8vIGlmIGF1dG8gY29udHJvbHMgYXJlIGRpc3BsYXllZCBhbmQgcHJldmVudENvbnRyb2xVcGRhdGUgaXMgbm90IHRydWVcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5hdXRvQ29udHJvbHMgJiYgcHJldmVudENvbnRyb2xVcGRhdGUgIT09IHRydWUpIHsgdXBkYXRlQXV0b0NvbnRyb2xzKCdzdGFydCcpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBjdXJyZW50IHNsaWRlIGluZGV4ICh6ZXJvLWJhc2VkKVxyXG4gICAgICovXHJcbiAgICBlbC5nZXRDdXJyZW50U2xpZGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHNsaWRlci5hY3RpdmUuaW5kZXg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBjdXJyZW50IHNsaWRlIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZWwuZ2V0Q3VycmVudFNsaWRlRWxlbWVudCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc2xpZGVyLmNoaWxkcmVuLmVxKHNsaWRlci5hY3RpdmUuaW5kZXgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBzbGlkZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gaW5kZXggKGludClcclxuICAgICAqICAtIFRoZSBpbmRleCAoemVyby1iYXNlZCkgb2YgdGhlIGVsZW1lbnQgeW91IHdhbnQgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIGVsLmdldFNsaWRlRWxlbWVudCA9IGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgIHJldHVybiBzbGlkZXIuY2hpbGRyZW4uZXEoaW5kZXgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgbnVtYmVyIG9mIHNsaWRlcyBpbiBzaG93XHJcbiAgICAgKi9cclxuICAgIGVsLmdldFNsaWRlQ291bnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHNsaWRlci5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIHNsaWRlci53b3JraW5nIHZhcmlhYmxlXHJcbiAgICAgKi9cclxuICAgIGVsLmlzV29ya2luZyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gc2xpZGVyLndvcmtpbmc7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIGFsbCBkeW5hbWljIHNsaWRlciBlbGVtZW50c1xyXG4gICAgICovXHJcbiAgICBlbC5yZWRyYXdTbGlkZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gcmVzaXplIGFsbCBjaGlsZHJlbiBpbiByYXRpbyB0byBuZXcgc2NyZWVuIHNpemVcclxuICAgICAgc2xpZGVyLmNoaWxkcmVuLmFkZChlbC5maW5kKCcuYngtY2xvbmUnKSkub3V0ZXJXaWR0aChnZXRTbGlkZVdpZHRoKCkpO1xyXG4gICAgICAvLyBhZGp1c3QgdGhlIGhlaWdodFxyXG4gICAgICBzbGlkZXIudmlld3BvcnQuY3NzKCdoZWlnaHQnLCBnZXRWaWV3cG9ydEhlaWdodCgpKTtcclxuICAgICAgLy8gdXBkYXRlIHRoZSBzbGlkZSBwb3NpdGlvblxyXG4gICAgICBpZiAoIXNsaWRlci5zZXR0aW5ncy50aWNrZXIpIHsgc2V0U2xpZGVQb3NpdGlvbigpOyB9XHJcbiAgICAgIC8vIGlmIGFjdGl2ZS5sYXN0IHdhcyB0cnVlIGJlZm9yZSB0aGUgc2NyZWVuIHJlc2l6ZSwgd2Ugd2FudFxyXG4gICAgICAvLyB0byBrZWVwIGl0IGxhc3Qgbm8gbWF0dGVyIHdoYXQgc2NyZWVuIHNpemUgd2UgZW5kIG9uXHJcbiAgICAgIGlmIChzbGlkZXIuYWN0aXZlLmxhc3QpIHsgc2xpZGVyLmFjdGl2ZS5pbmRleCA9IGdldFBhZ2VyUXR5KCkgLSAxOyB9XHJcbiAgICAgIC8vIGlmIHRoZSBhY3RpdmUgaW5kZXggKHBhZ2UpIG5vIGxvbmdlciBleGlzdHMgZHVlIHRvIHRoZSByZXNpemUsIHNpbXBseSBzZXQgdGhlIGluZGV4IGFzIGxhc3RcclxuICAgICAgaWYgKHNsaWRlci5hY3RpdmUuaW5kZXggPj0gZ2V0UGFnZXJRdHkoKSkgeyBzbGlkZXIuYWN0aXZlLmxhc3QgPSB0cnVlOyB9XHJcbiAgICAgIC8vIGlmIGEgcGFnZXIgaXMgYmVpbmcgZGlzcGxheWVkIGFuZCBhIGN1c3RvbSBwYWdlciBpcyBub3QgYmVpbmcgdXNlZCwgdXBkYXRlIGl0XHJcbiAgICAgIGlmIChzbGlkZXIuc2V0dGluZ3MucGFnZXIgJiYgIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkge1xyXG4gICAgICAgIHBvcHVsYXRlUGFnZXIoKTtcclxuICAgICAgICB1cGRhdGVQYWdlckFjdGl2ZShzbGlkZXIuYWN0aXZlLmluZGV4KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoc2xpZGVyLnNldHRpbmdzLmFyaWFIaWRkZW4pIHsgYXBwbHlBcmlhSGlkZGVuQXR0cmlidXRlcyhzbGlkZXIuYWN0aXZlLmluZGV4ICogZ2V0TW92ZUJ5KCkpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVzdHJveSB0aGUgY3VycmVudCBpbnN0YW5jZSBvZiB0aGUgc2xpZGVyIChyZXZlcnQgZXZlcnl0aGluZyBiYWNrIHRvIG9yaWdpbmFsIHN0YXRlKVxyXG4gICAgICovXHJcbiAgICBlbC5kZXN0cm95U2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIGRvbid0IGRvIGFueXRoaW5nIGlmIHNsaWRlciBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZFxyXG4gICAgICBpZiAoIXNsaWRlci5pbml0aWFsaXplZCkgeyByZXR1cm47IH1cclxuICAgICAgc2xpZGVyLmluaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICQoJy5ieC1jbG9uZScsIHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICBzbGlkZXIuY2hpbGRyZW4uZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAkKHRoaXMpLmF0dHIoJ3N0eWxlJywgJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoJCh0aGlzKS5kYXRhKCdvcmlnU3R5bGUnKSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpcy5hdHRyKCdzdHlsZScsICQodGhpcykuZGF0YSgnb3JpZ1N0eWxlJykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgfVxyXG4gICAgICAkKHRoaXMpLnVud3JhcCgpLnVud3JhcCgpO1xyXG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmVsKSB7IHNsaWRlci5jb250cm9scy5lbC5yZW1vdmUoKTsgfVxyXG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLm5leHQpIHsgc2xpZGVyLmNvbnRyb2xzLm5leHQucmVtb3ZlKCk7IH1cclxuICAgICAgaWYgKHNsaWRlci5jb250cm9scy5wcmV2KSB7IHNsaWRlci5jb250cm9scy5wcmV2LnJlbW92ZSgpOyB9XHJcbiAgICAgIGlmIChzbGlkZXIucGFnZXJFbCAmJiBzbGlkZXIuc2V0dGluZ3MuY29udHJvbHMgJiYgIXNsaWRlci5zZXR0aW5ncy5wYWdlckN1c3RvbSkgeyBzbGlkZXIucGFnZXJFbC5yZW1vdmUoKTsgfVxyXG4gICAgICAkKCcuYngtY2FwdGlvbicsIHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICBpZiAoc2xpZGVyLmNvbnRyb2xzLmF1dG9FbCkgeyBzbGlkZXIuY29udHJvbHMuYXV0b0VsLnJlbW92ZSgpOyB9XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwoc2xpZGVyLmludGVydmFsKTtcclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5yZXNwb25zaXZlKSB7ICQod2luZG93KS51bmJpbmQoJ3Jlc2l6ZScsIHJlc2l6ZVdpbmRvdyk7IH1cclxuICAgICAgaWYgKHNsaWRlci5zZXR0aW5ncy5rZXlib2FyZEVuYWJsZWQpIHsgJChkb2N1bWVudCkudW5iaW5kKCdrZXlkb3duJywga2V5UHJlc3MpOyB9XHJcbiAgICAgIC8vcmVtb3ZlIHNlbGYgcmVmZXJlbmNlIGluIGRhdGFcclxuICAgICAgJCh0aGlzKS5yZW1vdmVEYXRhKCdieFNsaWRlcicpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbG9hZCB0aGUgc2xpZGVyIChyZXZlcnQgYWxsIERPTSBjaGFuZ2VzLCBhbmQgcmUtaW5pdGlhbGl6ZSlcclxuICAgICAqL1xyXG4gICAgZWwucmVsb2FkU2xpZGVyID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcclxuICAgICAgaWYgKHNldHRpbmdzICE9PSB1bmRlZmluZWQpIHsgb3B0aW9ucyA9IHNldHRpbmdzOyB9XHJcbiAgICAgIGVsLmRlc3Ryb3lTbGlkZXIoKTtcclxuICAgICAgaW5pdCgpO1xyXG4gICAgICAvL3N0b3JlIHJlZmVyZW5jZSB0byBzZWxmIGluIG9yZGVyIHRvIGFjY2VzcyBwdWJsaWMgZnVuY3Rpb25zIGxhdGVyXHJcbiAgICAgICQoZWwpLmRhdGEoJ2J4U2xpZGVyJywgdGhpcyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGluaXQoKTtcclxuXHJcbiAgICAkKGVsKS5kYXRhKCdieFNsaWRlcicsIHRoaXMpO1xyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIGN1cnJlbnQgalF1ZXJ5IG9iamVjdFxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG4kKGZ1bmN0aW9uKCkge1xyXG5cclxuXHR2YXIgJHNpZGViYXIgPSAkKCcuc2lkZWJhcicpO1xyXG5cdHZhciAkbmF2YmFyID0gJCgnLm5hdmJhcl9fbGlua3MnKTtcclxuICB2YXIgJG5hdmJhckNvbnRhaW5lciA9ICQoJy5uYXZiYXInKVxyXG5cdHZhciAkYnVyZ2VyID0gJCgnI2J1cmdlcicpO1xyXG5cdHZhciAkbGlua0l0ZW0gPSAkKCcubGlua3NfX2l0ZW0nKTtcclxuICB2YXIgJHNpZGViYXJsYXlvdXQgPSAkKCcuc2lkZWJhcmxheW91dCcpO1xyXG5cclxuXHJcblx0JHNpZGViYXIuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHQkbmF2YmFyLnRvZ2dsZUNsYXNzKCctLXZpc2libGUnKTtcclxuXHRcdCRzaWRlYmFyLnRvZ2dsZUNsYXNzKCctLW9uJyk7XHJcblx0XHQkYnVyZ2VyLnRvZ2dsZUNsYXNzKCdjbG9zZScpLnRvZ2dsZUNsYXNzKCdvcGVuZWQnKTtcclxuICB9KTtcclxuICAkbmF2YmFyQ29udGFpbmVyLnNpYmxpbmdzKCkuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkbmF2YmFyLnJlbW92ZUNsYXNzKCctLXZpc2libGUnKTtcclxuICAgICRzaWRlYmFyLnJlbW92ZUNsYXNzKCctLW9uJyk7XHJcbiAgICAkYnVyZ2VyLmFkZENsYXNzKCdjbG9zZScpLnJlbW92ZUNsYXNzKCdvcGVuZWQnKTtcclxuICB9KTtcclxuXHJcblxyXG5cclxuXHQvLyBwb3AtdXBcclxuXHJcblx0dmFyICR3aGl0ZVBhcHBlciA9ICQoJyNzaG93LXBvcC11cCcpO1xyXG4gIHZhciAkd2hpdGVQYXBwZXJCdG4gPSAkKCcud3BidG4tZm9vdGVyJyk7XHJcblx0dmFyICRvdmVybGF5ID0gJCgnLmNvdmVyJyk7XHJcbiAgdmFyICRjbG9zZUJ0biA9ICQoJy5jbG9zZS1idXR0b24nKTtcclxuXHR2YXIgJHBvcFVwV2hpdGVwYXBwZXIgPSAkKCcud2hpdGVwYXBwZXInKTtcclxuICB2YXIgJGZlZWRiYWNrID0gJCgnI3Nob3ctZmVlZGJhY2snKTtcclxuICB2YXIgJHBvcFVwRmVlZGJhY2sgPSAkKCcuZmVlZGJhY2std3JhcCcpO1xyXG4gIHZhciAkY2xvc2VTcGFjZSA9ICQoJy5zcGFjZS1jbG9zZScpO1xyXG4gIHZhciAkcXJXZUNoYXQgPSAkKCcjcXItd2VjaGF0Jyk7XHJcbiAgdmFyICRsaW5rV2VDaGF0ID0gJCgnI2xpbmstd2VjaGF0Jyk7XHJcbiAgdmFyICRmZWVkYmFja0xpbmtzID0gJCgnLmZlZWRiYWNrLWljbycpO1xyXG5cclxuICAkcXJXZUNoYXQuaGlkZSgpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJHFyV2VDaGF0LmZhZGVUb2dnbGUoNjAwKTtcclxuICAgICRmZWVkYmFja0xpbmtzLmRlbGF5KDYwMCkuZmFkZVRvZ2dsZSg0MDApO1xyXG4gIH0pO1xyXG4gICRsaW5rV2VDaGF0LmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICRxcldlQ2hhdC5kZWxheSg0MDApLmZhZGVUb2dnbGUoNjAwKTtcclxuICAgICRmZWVkYmFja0xpbmtzLmZhZGVUb2dnbGUoNDAwKTtcclxuICB9KTtcclxuXHJcblxyXG4gICRmZWVkYmFjay5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAkcG9wVXBGZWVkYmFjay5mYWRlVG9nZ2xlKCc0MDAnKTtcclxuICAgICRmZWVkYmFjay50b2dnbGVDbGFzcygnd2hpdGUnKTtcclxuICAgICRjbG9zZVNwYWNlLnRvZ2dsZSg0MDApO1xyXG4gIH0pO1xyXG5cclxuXHJcbiAgJGNsb3NlU3BhY2UuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkcG9wVXBGZWVkYmFjay5mYWRlT3V0KDQwMCk7XHJcbiAgICAkZmVlZGJhY2sucmVtb3ZlQ2xhc3MoJ3doaXRlJyk7XHJcbiAgICAkY2xvc2VTcGFjZS5oaWRlKCk7XHJcbiAgfSk7XHJcblxyXG5cclxuXHJcbiAgJHdoaXRlUGFwcGVyLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJG92ZXJsYXkuZmFkZUluKDQwMCk7XHJcbiAgICAkcG9wVXBXaGl0ZXBhcHBlci5mYWRlSW4oNDAwKTtcclxuICB9KTtcclxuXHJcbiAgJHdoaXRlUGFwcGVyQnRuLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJG92ZXJsYXkuZmFkZUluKDQwMCk7XHJcbiAgICAkcG9wVXBXaGl0ZXBhcHBlci5mYWRlSW4oNDAwKTtcclxuICB9KTtcclxuXHJcblxyXG5cdCRjbG9zZUJ0bi5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCRvdmVybGF5LmZhZGVPdXQoNDAwKTtcclxuXHRcdCRwb3BVcFdoaXRlcGFwcGVyLmZhZGVPdXQoNDAwKTtcclxuXHR9KTtcclxuXHQkb3ZlcmxheS5jbGljayhmdW5jdGlvbigpIHtcclxuXHRcdCRvdmVybGF5LmZhZGVPdXQoNDAwKTtcclxuXHRcdCRwb3BVcFdoaXRlcGFwcGVyLmZhZGVPdXQoNDAwKTtcclxuXHR9KTtcclxuXHJcblxyXG5cdFx0XHJcblx0Ly8gUm9hZG1hcFxyXG5cclxuXHJcblxyXG5cdHZhciAkaGV4YWdvbmUgPSAkKCcuaGV4b2dvbicpO1xyXG5cdHZhciAkbGluZUNvbm5lY3QgPSAkKCcubGluZScpO1xyXG5cdHZhciAkdGV4dFBvaW50cyA9ICQoJ2cudGV4dCcpO1xyXG5cclxuXHR2YXIgJHJvYWRtYXAgPSAkKCcucm9hZG1hcCcpO1xyXG5cclxuXHQkbGluZUNvbm5lY3QuaGlkZSgpO1xyXG5cdCR0ZXh0UG9pbnRzLmhpZGUoKTtcclxuXHQkaGV4YWdvbmUuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHQkcm9hZG1hcC5hZGRDbGFzcygnc3RlcDEnKTtcclxuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHQkcm9hZG1hcC5hZGRDbGFzcygnc3RlcDInKTtcclxuXHRcdH0sIDEyMDApO1xyXG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcblx0XHRcdCRsaW5lQ29ubmVjdC5mYWRlSW4oJzEwMDAnKTtcclxuXHRcdFx0JHRleHRQb2ludHMuZGVsYXkoMTAwMCkuZmFkZUluKCc0MDAnKTtcclxuXHRcdH0sMjAwMClcclxuXHR9KTtcclxuXHJcbiAvLyBMYW5ndWFnZSBzd2l0Y2hcclxuXHJcbiAgdmFyICRsYW5nSXRlbSA9ICQoJ2EubGFuZycpXHJcbiAgdmFyICRlbmcgPSAkKCcjbGFuZy11cycpO1xyXG4gIHZhciAkY24gPSAkKCcjbGFuZy1jbicpO1xyXG4gIHZhciAkaW5kID0gJCgnI2xhbmctaW4nKTtcclxuXHJcbiAgdmFyICRsYW5nQnRuID0gJCgnLmxhbmdzd2l0Y2gtd3JhcCcpO1xyXG4gIHZhciAkbGFuZ1N3aXRjaCA9ICQoJy5sYW5nc3dpdGNoJyk7XHJcbiAgdmFyICRsYW5nU3dpdGNoQ2FydXNlbCA9ICQoJy5sYW5nc3dpdGNoLWNhcnVzZWwnKTtcclxuXHJcbiAgJGxhbmdCdG4uY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkbGFuZ1N3aXRjaC50b2dnbGUoNDAwKTtcclxuICAgICQoJy5saW5rc19faXRlbScpLnRvZ2dsZUNsYXNzKCdoaWRlZCcpO1xyXG4gIH0pO1xyXG5cclxuICAkbGFuZ1N3aXRjaENhcnVzZWwuYnhTbGlkZXIoe1xyXG4gICAgYXV0bzogdHJ1ZSxcclxuICAgIGNvbnRyb2xzOiBmYWxzZSxcclxuICAgIHBhdXNlOiAyMDAwLFxyXG4gICAgcGFnZXI6IGZhbHNlLFxyXG4gIH0pXHJcblxyXG5cclxuXHJcbiAvLyB2aWRlbyBwb3AtdXBcclxuXHJcblxyXG4gIHZhciAkcG9wVXBWaWRlb0NvbnRhaW5lciA9ICQoXCIucG9wLXVwLXZpZGVvXCIpO1xyXG4gIHZhciAkcG9wVXBWaWRlb0J0biA9ICQoJyNwbGF5LXZpZGVvLWVuZy1idG4nKTtcclxuICB2YXIgJHBvcFVwVmlkZW9DbkJ0biA9ICQoJyNwbGF5LXZpZGVvLWNuLWJ0bicpO1xyXG5cclxuXHJcbiAgJHBvcFVwVmlkZW9CdG4uY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICRwb3BVcFZpZGVvQ29udGFpbmVyLmFwcGVuZCgnPGlmcmFtZSBpZD1cInZpZGVvXCIgc3JjPVwiaHR0cHM6Ly93d3cueW91dHViZS5jb20vZW1iZWQvcDFZaURLbFNlOGs/cmVsPTAmYXV0b3BsYXk9MVwiIGZyYW1lYm9yZGVyPVwiMFwiIHdlYmtpdGFsbG93ZnVsbHNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPicpO1xyXG4gICAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5mYWRlSW4oNzAwKTtcclxuICB9KTtcclxuXHJcbiAgJHBvcFVwVmlkZW9DbkJ0bi5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgJHBvcFVwVmlkZW9Db250YWluZXIuYXBwZW5kKCc8dmlkZW8gaWQ9XCJ2aWRlb1wiIGNvbnRyb2xzIGF1dG9wbGF5Pjxzb3VyY2Ugc3JjPVwiaHR0cDovL29ucGxhY2UuaW8vaW1nL3ZpZGVvL29ucGxhY2UtY2hpbmEtc3VidGl0bGUubXA0XCIgdHlwZT1cInZpZGVvL21wNFwiLz48L3ZpZGVvPicpO1xyXG4gICAgICAkcG9wVXBWaWRlb0NvbnRhaW5lci5mYWRlSW4oNzAwKTtcclxuICB9KVxyXG5cclxuICAkKCcuY2xvc2UtYnV0dG9uLXZpZGVvJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyICR2aWRlbyA9ICQoJyN2aWRlbycpO1xyXG4gICAgdmFyICR2aWRlb1NjcmVlbiA9ICQoJyN2aWRlby1wb3AtdXAnKTtcclxuICAgIFxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgJHBvcFVwVmlkZW9Db250YWluZXIuaGlkZSg3MDApO1xyXG4gICAgJHZpZGVvU2NyZWVuLnJlbW92ZSgpO1xyXG4gICAgJHZpZGVvLnJlbW92ZSgpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgJCgnLnBhcnRuZXJzLWNhcm91c2VsJykuYnhTbGlkZXIoe1xyXG4gICAgYXV0bzogdHJ1ZSxcclxuICAgIGNvbnRyb2xzOiBmYWxzZSxcclxuICAgIHBhdXNlOiAzMDAwLFxyXG4gICAgcGFnZXI6IGZhbHNlXHJcbiAgfSlcclxuXHJcbiAgLy8gbWFpbiB0ZWFtIHBhZ2UgXHJcblxyXG4gIHZhciBwaWN0dXJlcyA9IHsgIFxyXG4gICAgRW1wdHk6ICQoJyNwaWN0dXJlLWVtcHR5JyksXHJcbiAgICBFZHdhcmQ6ICQoJyNwaWN0dXJlLUVkd2FyZCcpLFxyXG4gICAgQW5kcmVpOiAkKCcjcGljdHVyZS1BbmRyZWknKSxcclxuICAgIERtaXRyaXk6ICQoJyNwaWN0dXJlLURtaXRyaXknKSxcclxuICAgIElseWE6ICQoJyNwaWN0dXJlLUlseWEnKSxcclxuICAgIE1pa2U6ICQoJyNwaWN0dXJlLU1pa2UnKSxcclxuICAgIE9sZWc6ICQoJyNwaWN0dXJlLU9sZWcnKSxcclxuICAgIE1pY2hhZWw6ICQoJyNwaWN0dXJlLU1pY2hhZWwnKSxcclxuICAgIEV1Z2VuZTogJCgnI3BpY3R1cmUtRXVnZW5lJyksXHJcbiAgICBSdXNsYW46ICQoJyNwaWN0dXJlLVJ1c2xhbicpLFxyXG4gICAgVmxhZGltaXI6ICQoJyNwaWN0dXJlLVZsYWRpbWlyJylcclxuICB9XHJcblxyXG4gIHZhciBkZXNjcmlwdGlvbiA9IHtcclxuICAgIHRlYW06ICQoJyN0ZWFtLWRlc2NyaXB0aW9uJyksXHJcbiAgICBFZHdhcmQ6ICQoJyNFZHdhcmQtZGVzY3JpcHRpb24nKSxcclxuICAgIEFuZHJlaTogJCgnI0FuZHJlaS1kZXNjcmlwdGlvbicpLFxyXG4gICAgRG1pdHJpeTogJCgnI0RtaXRyaXktZGVzY3JpcHRpb24nKSxcclxuICAgIElseWE6ICQoJyNJbHlhLWRlc2NyaXB0aW9uJyksXHJcbiAgICBNaWtlOiAkKCcjTWlrZS1kZXNjcmlwdGlvbicpLFxyXG4gICAgT2xlZzogJCgnI09sZWctZGVzY3JpcHRpb24nKSxcclxuICAgIE1pY2hhZWw6ICQoJyNNaWNoYWVsLWRlc2NyaXB0aW9uJyksXHJcbiAgICBFdWdlbmU6ICQoJyNFdWdlbmUtZGVzY3JpcHRpb24nKSxcclxuICAgIFJ1c2xhbjogJCgnI1J1c2xhbi1kZXNjcmlwdGlvbicpLFxyXG4gICAgVmxhZGltaXI6ICQoJyNWbGFkaW1pci1kZXNjcmlwdGlvbicpXHJcbiAgfVxyXG5cclxuICB2YXIgYmFja2dyb3VuZHMgPSB7XHJcbiAgICB0b3RhbDogJCgnLmJhY2tncm91bmRzLWl0ZW0nKSxcclxuICAgIEVkd2FyZDogJCgnI0Vkd2FyZC1iYWNrZ3JvdW5kJyksXHJcbiAgICBBbmRyZWk6ICQoJyNBbmRyZWktYmFja2dyb3VuZCcpLFxyXG4gICAgTWlrZTogJCgnI01pa2UtYmFja2dyb3VuZCcpLFxyXG4gICAgRG1pdHJpeTogJCgnI0RtaXRyaXktYmFja2dyb3VuZCcpLFxyXG4gICAgSWx5YTogJCgnI0lseWEtYmFja2dyb3VuZCcpLFxyXG4gICAgT2xlZzogJCgnI09sZWctYmFja2dyb3VuZCcpLFxyXG4gICAgTWljaGFlbDogJCgnI01pY2hhZWwtYmFja2dyb3VuZCcpLFxyXG4gICAgRXVnZW5lOiAkKCcjRXVnZW5lLWJhY2tncm91bmQnKSxcclxuICAgIFJ1c2xhbjogJCgnI1J1c2xhbi1iYWNrZ3JvdW5kJyksXHJcbiAgICBWbGFkaW1pcjogJCgnI1ZsYWRpbWlyLWJhY2tncm91bmQnKVxyXG4gIH1cclxuXHJcbiAgdmFyIGhleG9saW5rcyA9ICQoJy5tZW1iZXItcGljdHVyZScpO1xyXG4gIHZhciBibHVlaGV4ZXMgPSAkKCcuYmx1ZV9wb2x5Z29ucycpO1xyXG4gIHZhciB0ZWFtU2VjdGlvbiA9ICQoJy50ZWFtJyk7XHJcblxyXG4gIGRlc2NyaXB0aW9uLnRlYW0uc2hvdygpO1xyXG5cclxuICBoZXhvbGlua3MuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgYmx1ZWhleGVzLmZhZGVPdXQoODAwKTtcclxuICAgIHRlYW1TZWN0aW9uLmFkZENsYXNzKCd3aGl0ZScpO1xyXG5cclxuICB9KTtcclxuXHJcbiAgcGljdHVyZXMuRW1wdHkuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMudG90YWwuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24udGVhbS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKVxyXG4gICAgYmx1ZWhleGVzLmZhZGVJbig4MDApO1xyXG4gICAgdGVhbVNlY3Rpb24ucmVtb3ZlQ2xhc3MoJ3doaXRlJylcclxuICB9KTtcclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VCZyhhKSB7XHJcbiAgICAgIGJhY2tncm91bmRzLmEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICAgIGRlc2NyaXB0aW9uLmEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICB9XHJcblxyXG4gIHBpY3R1cmVzLkFuZHJlaS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5BbmRyZWkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5BbmRyZWkuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcblxyXG4gIHBpY3R1cmVzLkVkd2FyZC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5FZHdhcmQuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5FZHdhcmQuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuRG1pdHJpeS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5EbWl0cml5LmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uRG1pdHJpeS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5JbHlhLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGJhY2tncm91bmRzLklseWEuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5JbHlhLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIHBpY3R1cmVzLk1pa2UuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYmFja2dyb3VuZHMuTWlrZS5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLk1pa2UuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuT2xlZy5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5PbGVnLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gICAgZGVzY3JpcHRpb24uT2xlZy5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5NaWNoYWVsLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGJhY2tncm91bmRzLk1pY2hhZWwuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5NaWNoYWVsLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIHBpY3R1cmVzLkV1Z2VuZS5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5FdWdlbmUuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgICBkZXNjcmlwdGlvbi5FdWdlbmUuZmFkZUluKDgwMCkuc2libGluZ3MoKS5mYWRlT3V0KDgwMCk7XHJcbiAgfSk7XHJcbiAgcGljdHVyZXMuUnVzbGFuLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGJhY2tncm91bmRzLlJ1c2xhbi5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLlJ1c2xhbi5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICB9KTtcclxuICBwaWN0dXJlcy5WbGFkaW1pci5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBiYWNrZ3JvdW5kcy5WbGFkaW1pci5mYWRlSW4oODAwKS5zaWJsaW5ncygpLmZhZGVPdXQoODAwKTtcclxuICAgIGRlc2NyaXB0aW9uLlZsYWRpbWlyLmZhZGVJbig4MDApLnNpYmxpbmdzKCkuZmFkZU91dCg4MDApO1xyXG4gIH0pO1xyXG4gIFxyXG5cclxuXHJcbiAgLy8gc2Nyb2xsIGRyYXdpbmdcclxuXHJcbiAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgYmFja2dyb3VuZHMudG90YWwuY3NzKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDBweCwgLScgKyBzdC8zICsncHgpJ30pO1xyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIC8vIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgPHBhdGg+XHJcbiAgLy8gdmFyIHBhdGggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbGluZScpO1xyXG5cclxuICAvLyAvLyBHZXQgbGVuZ3RoIG9mIHBhdGguLi4gfjE2NjhweFxyXG4gIC8vIHZhciBwYXRoTGVuZ3RoID0gcGF0aC5nZXRUb3RhbExlbmd0aCgpO1xyXG5cclxuICAvLyAvLyBNYWtlIHZlcnkgbG9uZyBkYXNoZXMgKHRoZSBsZW5ndGggb2YgdGhlIHBhdGggaXRzZWxmKVxyXG4gIC8vIHBhdGguc3R5bGUuc3Ryb2tlRGFzaGFycmF5ID0gcGF0aExlbmd0aCArICcgJyArIHBhdGhMZW5ndGg7XHJcblxyXG4gIC8vIC8vIE9mZnNldCB0aGUgZGFzaGVzIHNvIHRoZSBpdCBhcHBlYXJzIGhpZGRlbiBlbnRpcmVseVxyXG4gIC8vIHBhdGguc3R5bGUuc3Ryb2tlRGFzaG9mZnNldCA9IHBhdGhMZW5ndGg7XHJcblxyXG4gIC8vIC8vIFdoZW4gdGhlIHBhZ2Ugc2Nyb2xscy4uLlxyXG4gIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgXHJcbiAgLy8gICAvLyBXaGF0ICUgZG93biBpcyBpdD8gXHJcbiAgLy8gICB2YXIgc2Nyb2xsUGVyY2VudGFnZSA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wICsgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3ApIC8gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQgLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcclxuICAgICAgXHJcbiAgLy8gICAvLyBMZW5ndGggdG8gb2Zmc2V0IHRoZSBkYXNoZXNcclxuICAvLyAgIHZhciBkcmF3TGVuZ3RoID0gcGF0aExlbmd0aCAqIHNjcm9sbFBlcmNlbnRhZ2U7XHJcbiAgICBcclxuICAvLyAgIC8vIERyYXcgaW4gcmV2ZXJzZVxyXG4gIC8vICAgcGF0aC5zdHlsZS5zdHJva2VEYXNob2Zmc2V0ID0gcGF0aExlbmd0aCAtIGRyYXdMZW5ndGg7XHJcbiAgICBcclxuICAgIFxyXG59KTsiXX0=
